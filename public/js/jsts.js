/*
  javascript.util is a port of selected parts of java.util to JavaScript which
  main purpose is to ease porting Java code to JavaScript.
  
  The MIT License (MIT)

  Copyright (C) 2011,2012 by The Authors

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to deal
  in the Software without restriction, including without limitation the rights
  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
  THE SOFTWARE.
*/
javascript={util:{}},typeof module!="undefined"&&(module.exports=javascript),function(){function e(e){this.message=e||""}e.prototype=new Error,e.prototype.name="EmptyStackException",javascript.util.EmptyStackException=e}(),function(){function e(e){this.message=e||""}e.prototype=new Error,e.prototype.name="IndexOutOfBoundsException",javascript.util.IndexOutOfBoundsException=e}(),function(){function e(e){this.message=e||""}e.prototype=new Error,e.prototype.name="NoSuchElementException",javascript.util.NoSuchElementException=e}(),function(){function e(e){this.message=e||""}e.prototype=new Error,e.prototype.name="OperationNotSupported",javascript.util.OperationNotSupported=e}(),function(){function e(){}e.prototype.get=function(e){},e.prototype.put=function(e,t){},e.prototype.size=function(){},e.prototype.values=function(){},javascript.util.Map=e}(),function(){function t(){}var e=javascript.util.Map;t.prototype=new e,javascript.util.SortedMap=t}(),function(){function e(){}e.sort=function(){var e=arguments[0],t,n,r,i;if(arguments.length===1){e.sort();return}if(arguments.length===2)r=arguments[1],i=function(e,t){return r.compare(e,t)},e.sort(i);else{if(arguments.length===3){n=e.slice(arguments[1],arguments[2]),n.sort();var s=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length));e.splice(0,e.length);for(t=0;t<s.length;t++)e.push(s[t]);return}if(arguments.length===4){n=e.slice(arguments[1],arguments[2]),r=arguments[3],i=function(e,t){return r.compare(e,t)},n.sort(i),s=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length)),e.splice(0,e.length);for(t=0;t<s.length;t++)e.push(s[t]);return}}},e.asList=function(e){var t=new javascript.util.ArrayList;for(var n=0,r=e.length;n<r;n++)t.add(e[n]);return t},javascript.util.Arrays=e}(),function(){function e(){}e.prototype.hasNext=function(){},e.prototype.next=function(){},e.prototype.remove=function(){},javascript.util.Iterator=e}(),function(){function t(){}var e=javascript.util.Iterator;t.prototype.add=function(e){},t.prototype.addAll=function(e){},t.prototype.isEmpty=function(){},t.prototype.iterator=function(){},t.prototype.size=function(){},t.prototype.toArray=function(){},t.prototype.remove=function(e){},javascript.util.Collection=t}(),function(){function t(){}var e=javascript.util.Collection;t.prototype=new e,t.prototype.get=function(e){},t.prototype.set=function(e,t){},t.prototype.isEmpty=function(){},javascript.util.List=t}(),function(){function s(){this.array=[],arguments[0]instanceof e&&this.addAll(arguments[0])}var e=javascript.util.Collection,t=javascript.util.List,n=javascript.util.OperationNotSupported,r=javascript.util.NoSuchElementException,i=javascript.util.IndexOutOfBoundsException;s.prototype=new t,s.prototype.array=null,s.prototype.add=function(e){return this.array.push(e),!0},s.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},s.prototype.set=function(e,t){var n=this.array[e];return this.array[e]=t,n},s.prototype.iterator=function(){return new s.Iterator(this)},s.prototype.get=function(e){if(e<0||e>=this.size())throw new i;return this.array[e]},s.prototype.isEmpty=function(){return this.array.length===0},s.prototype.size=function(){return this.array.length},s.prototype.toArray=function(){var e=[];for(var t=0,n=this.array.length;t<n;t++)e.push(this.array[t]);return e},s.prototype.remove=function(e){var t=!1;for(var n=0,r=this.array.length;n<r;n++)if(this.array[n]===e){this.array.splice(n,1),t=!0;break}return t},s.Iterator=function(e){this.arrayList=e},s.Iterator.prototype.arrayList=null,s.Iterator.prototype.position=0,s.Iterator.prototype.next=function(){if(this.position===this.arrayList.size())throw new r;return this.arrayList.get(this.position++)},s.Iterator.prototype.hasNext=function(){return this.position<this.arrayList.size()?!0:!1},s.Iterator.prototype.remove=function(){throw new n},javascript.util.ArrayList=s}(),function(){function n(){this.object={}}var e=javascript.util.Map,t=javascript.util.ArrayList;n.prototype=new e,n.prototype.object=null,n.prototype.get=function(e){return this.object[e]||null},n.prototype.put=function(e,t){return this.object[e]=t,t},n.prototype.values=function(){var e=new javascript.util.ArrayList;for(var t in this.object)this.object.hasOwnProperty(t)&&e.add(this.object[t]);return e},n.prototype.size=function(){return this.values().size()},javascript.util.HashMap=n}(),function(){function t(){}var e=javascript.util.Collection;t.prototype=new e,t.prototype.contains=function(e){},javascript.util.Set=t}(),function(){function t(){}var e=javascript.util.Set;t.prototype=new e,javascript.util.SortedSet=t}(),function(){function i(){this.array=[],arguments[0]instanceof e&&this.addAll(arguments[0])}var e=javascript.util.Collection,t=javascript.util.SortedSet,n=javascript.util.OperationNotSupported,r=javascript.util.NoSuchElementException;i.prototype=new t,i.prototype.array=null,i.prototype.contains=function(e){for(var t=0,n=this.array.length;t<n;t++){var r=this.array[t];if(r.compareTo(e)===0)return!0}return!1},i.prototype.add=function(e){if(this.contains(e))return!1;for(var t=0,n=this.array.length;t<n;t++){var r=this.array[t];if(r.compareTo(e)===1)return this.array.splice(t,0,e),!0}return this.array.push(e),!0},i.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},i.prototype.remove=function(e){throw new n},i.prototype.size=function(){return this.array.length},i.prototype.isEmpty=function(){return this.array.length===0},i.prototype.toArray=function(){var e=[];for(var t=0,n=this.array.length;t<n;t++)e.push(this.array[t]);return e},i.prototype.iterator=function(){return new i.Iterator(this)},i.Iterator=function(e){this.treeSet=e},i.Iterator.prototype.treeSet=null,i.Iterator.prototype.position=0,i.Iterator.prototype.next=function(){if(this.position===this.treeSet.size())throw new r;return this.treeSet.array[this.position++]},i.Iterator.prototype.hasNext=function(){return this.position<this.treeSet.size()?!0:!1},i.Iterator.prototype.remove=function(){throw new javascript.util.OperationNotSupported},javascript.util.TreeSet=i}(),function(){function n(){this.array=[]}var e=javascript.util.List,t=javascript.util.EmptyStackException;n.prototype=new e,n.prototype.array=null,n.prototype.push=function(e){return this.array.push(e),e},n.prototype.pop=function(e){if(this.array.length===0)throw new t;return this.array.pop()},n.prototype.peek=function(){if(this.array.length===0)throw new t;return this.array[this.array.length-1]},n.prototype.empty=function(e){return this.array.length===0?!0:!1},n.prototype.isEmpty=function(){return this.empty()},n.prototype.search=function(e){return this.array.indexOf(e)},n.prototype.size=function(){return this.array.length},n.prototype.toArray=function(){var e=[];for(var t=0,n=this.array.length;t<n;t++)e.push(this.array[t]);return e},javascript.util.Stack=n}(),function(){function r(){this.array=[]}var e=javascript.util.Map,t=javascript.util.SortedMap,n=javascript.util.ArrayList;r.prototype=new e,r.prototype.array=null,r.prototype.get=function(e){for(var t=0,n=this.array.length;t<n;t++){var r=this.array[t];if(r.key.compareTo(e)===0)return r.value}return null},r.prototype.put=function(e,t){var n=this.get(e);if(n){var r=n.value;return n.value=t,r}var i={key:e,value:t};for(var s=0,o=this.array.length;s<o;s++){n=this.array[s];if(n.key.compareTo(e)===1)return this.array.splice(s,0,i),null}return this.array.push({key:e,value:t}),null},r.prototype.values=function(){var e=new javascript.util.ArrayList;for(var t=0,n=this.array.length;t<n;t++)e.add(this.array[t].value);return e},r.prototype.size=function(){return this.values().size()},javascript.util.TreeMap=r}(),function(){function i(){this.array=[],arguments[0]instanceof e&&this.addAll(arguments[0])}var e=javascript.util.Collection,t=javascript.util.Set,n=javascript.util.OperationNotSupported,r=javascript.util.NoSuchElementException;i.prototype=new t,i.prototype.array=null,i.prototype.contains=function(e){for(var t=0,n=this.array.length;t<n;t++){var r=this.array[t];if(r===e)return!0}return!1},i.prototype.add=function(e){return this.contains(e)?!1:(this.array.push(e),!0)},i.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},i.prototype.remove=function(e){throw new n},i.prototype.size=function(){return this.array.length},i.prototype.isEmpty=function(){return this.array.length===0},i.prototype.toArray=function(){var e=[];for(var t=0,n=this.array.length;t<n;t++)e.push(this.array[t]);return e},i.prototype.iterator=function(){return new i.Iterator(this)},i.Iterator=function(e){this.hashSet=e},i.Iterator.prototype.hashSet=null,i.Iterator.prototype.position=0,i.Iterator.prototype.next=function(){if(this.position===this.hashSet.size())throw new r;return this.hashSet.array[this.position++]},i.Iterator.prototype.hasNext=function(){return this.position<this.hashSet.size()?!0:!1},i.Iterator.prototype.remove=function(){throw new javascript.util.OperationNotSupported},javascript.util.HashSet=i}(),jsts={version:"0.13.2",algorithm:{distance:{},locate:{}},error:{},geom:{util:{}},geomgraph:{index:{}},index:{bintree:{},chain:{},kdtree:{},quadtree:{},strtree:{}},io:{},noding:{snapround:{}},operation:{buffer:{},distance:{},overlay:{snap:{}},polygonize:{},relate:{},union:{},valid:{}},planargraph:{},simplify:{},triangulate:{quadedge:{}},util:{}},typeof String.prototype.trim!="function"&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),jsts.abstractFunc=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.error={},jsts.error.IllegalArgumentError=function(e){this.name="IllegalArgumentError",this.message=e},jsts.error.IllegalArgumentError.prototype=new Error,jsts.error.TopologyError=function(e,t){this.name="TopologyError",this.message=t?e+" [ "+t+" ]":e},jsts.error.TopologyError.prototype=new Error,jsts.error.AbstractMethodInvocationError=function(){this.name="AbstractMethodInvocationError",this.message="Abstract method called, should be implemented in subclass."},jsts.error.AbstractMethodInvocationError.prototype=new Error,jsts.error.NotImplementedError=function(){this.name="NotImplementedError",this.message="This method has not yet been implemented."},jsts.error.NotImplementedError.prototype=new Error,jsts.error.NotRepresentableError=function(e){this.name="NotRepresentableError",this.message=e},jsts.error.NotRepresentableError.prototype=new Error,jsts.error.LocateFailureError=function(e){this.name="LocateFailureError",this.message=e},jsts.error.LocateFailureError.prototype=new Error,typeof module!="undefined"&&(module.exports=jsts),function(){var e=function(e){this.message=e};e.prototype=new Error,e.prototype.name="AssertionFailedException",jsts.util.AssertionFailedException=e}(),function(){var e=jsts.util.AssertionFailedException;jsts.util.Assert=function(){},jsts.util.Assert.isTrue=function(t,n){if(!t)throw n===null?new e:new e(n)},jsts.util.Assert.equals=function(t,n,r){if(!n.equals(t))throw new e("Expected "+t+" but encountered "+n+(r!=null?": "+r:""))},jsts.util.Assert.shouldNeverReachHere=function(t){throw new e("Should never reach here"+(t!=null?": "+t:""))}}(),jsts.geom.CoordinateArrays=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.CoordinateArrays.removeRepeatedPoints=function(e){var t;return this.hasRepeatedPoints(e)?(t=new jsts.geom.CoordinateList(e,!1),t.toCoordinateArray()):e},jsts.geom.CoordinateArrays.hasRepeatedPoints=function(e){var t;for(t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1},jsts.geom.CoordinateArrays.ptNotInList=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(jsts.geom.CoordinateArrays.indexOf(r,t)<0)return r}return null},jsts.geom.CoordinateArrays.increasingDirection=function(e){for(var t=0;t<parseInt(e.length/2);t++){var n=e.length-1-t,r=e[t].compareTo(e[n]);if(r!=0)return r}return 1},jsts.geom.CoordinateArrays.minCoordinate=function(e){var t=null;for(var n=0;n<e.length;n++)if(t===null||t.compareTo(e[n])>0)t=e[n];return t},jsts.geom.CoordinateArrays.scroll=function(e,t){var n=jsts.geom.CoordinateArrays.indexOf(t,e);if(n<0)return;var r=e.slice(n).concat(e.slice(0,n));for(n=0;n<r.length;n++)e[n]=r[n]},jsts.geom.CoordinateArrays.indexOf=function(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return n;return-1},jsts.geom.CoordinateFilter=function(){},jsts.geom.CoordinateFilter.prototype.filter=function(e){throw new jsts.error.AbstractMethodInvocationError},function(){var e=javascript.util.ArrayList,t=javascript.util.TreeSet,n=jsts.geom.CoordinateFilter;jsts.util.UniqueCoordinateArrayFilter=function(){this.treeSet=new t,this.list=new e},jsts.util.UniqueCoordinateArrayFilter.prototype=new n,jsts.util.UniqueCoordinateArrayFilter.prototype.treeSet=null,jsts.util.UniqueCoordinateArrayFilter.prototype.list=null,jsts.util.UniqueCoordinateArrayFilter.prototype.getCoordinates=function(){return this.list.toArray()},jsts.util.UniqueCoordinateArrayFilter.prototype.filter=function(e){this.treeSet.contains(e)||(this.list.add(e),this.treeSet.add(e))}}(),jsts.geom.CoordinateList=function(e,t){javascript.util.ArrayList.apply(this,arguments),t=t===undefined?!0:t,e!==undefined&&this.add(e,t)},jsts.geom.CoordinateList.prototype=new javascript.util.ArrayList,jsts.geom.CoordinateList.prototype.add=function(){return arguments.length>1?this.addCoordinates.apply(this,arguments):javascript.util.ArrayList.prototype.add.apply(this,arguments)},jsts.geom.CoordinateList.prototype.addCoordinates=function(e,t,n){if(e instanceof jsts.geom.Coordinate)return this.addCoordinate.apply(this,arguments);if(typeof e=="number")return this.insertCoordinate.apply(this,arguments);n=n||!0;if(n)for(var r=0;r<e.length;r++)this.addCoordinate(e[r],t);else for(var r=e.length-1;r>=0;r--)this.addCoordinate(e[r],t);return!0},jsts.geom.CoordinateList.prototype.addCoordinate=function(e,t){if(!t&&this.size()>=1){var n=this.get(this.size()-1);if(n.equals2D(e))return}this.add(e)},jsts.geom.CoordinateList.prototype.insertCoordinate=function(e,t,n){if(!n){var r=e>0?e-1:-1;if(r!==-1&&this.get(r).equals2D(t))return;var i=e<this.size()-1?e+1:-1;if(i!==-1&&this.get(i).equals2D(t))return}this.array.splice(e,0,t)},jsts.geom.CoordinateList.prototype.closeRing=function(){this.size()>0&&this.addCoordinate(new jsts.geom.Coordinate(this.get(0)),!1)},jsts.geom.CoordinateList.prototype.toArray=function(){var e,t,n;e=0,t=this.size(),n=[];for(e;e<t;e++)n[e]=this.get(e);return n},jsts.geom.CoordinateList.prototype.toCoordinateArray=function(){return this.toArray()},jsts.geom.Dimension=function(){},jsts.geom.Dimension.P=0,jsts.geom.Dimension.L=1,jsts.geom.Dimension.A=2,jsts.geom.Dimension.FALSE=-1,jsts.geom.Dimension.TRUE=-2,jsts.geom.Dimension.DONTCARE=-3,jsts.geom.Dimension.toDimensionSymbol=function(e){switch(e){case jsts.geom.Dimension.FALSE:return"F";case jsts.geom.Dimension.TRUE:return"T";case jsts.geom.Dimension.DONTCARE:return"*";case jsts.geom.Dimension.P:return"0";case jsts.geom.Dimension.L:return"1";case jsts.geom.Dimension.A:return"2"}throw new jsts.IllegalArgumentError("Unknown dimension value: "+e)},jsts.geom.Dimension.toDimensionValue=function(e){switch(e.toUpperCase()){case"F":return jsts.geom.Dimension.FALSE;case"T":return jsts.geom.Dimension.TRUE;case"*":return jsts.geom.Dimension.DONTCARE;case"0":return jsts.geom.Dimension.P;case"1":return jsts.geom.Dimension.L;case"2":return jsts.geom.Dimension.A}throw new jsts.error.IllegalArgumentError("Unknown dimension symbol: "+e)},jsts.geom.Location=function(){},jsts.geom.Location.INTERIOR=0,jsts.geom.Location.BOUNDARY=1,jsts.geom.Location.EXTERIOR=2,jsts.geom.Location.NONE=-1,jsts.geom.Location.toLocationSymbol=function(e){switch(e){case jsts.geom.Location.EXTERIOR:return"e";case jsts.geom.Location.BOUNDARY:return"b";case jsts.geom.Location.INTERIOR:return"i";case jsts.geom.Location.NONE:return"-"}throw new jsts.IllegalArgumentError("Unknown location value: "+e)},jsts.geom.Geometry=function(e){this.factory=e},jsts.geom.Geometry.prototype.envelope=null,jsts.geom.Geometry.prototype.factory=null,jsts.geom.Geometry.prototype.getGeometryType=function(){return"Geometry"},jsts.geom.Geometry.hasNonEmptyElements=function(e){var t;for(t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1},jsts.geom.Geometry.hasNullElements=function(e){var t;for(t=0;t<e.length;t++)if(e[t]===null)return!0;return!1},jsts.geom.Geometry.prototype.getFactory=function(){if(this.factory===null||this.factory===undefined)this.factory=new jsts.geom.GeometryFactory;return this.factory},jsts.geom.Geometry.prototype.getNumGeometries=function(){return 1},jsts.geom.Geometry.prototype.getGeometryN=function(e){return this},jsts.geom.Geometry.prototype.getPrecisionModel=function(){return this.getFactory().getPrecisionModel()},jsts.geom.Geometry.prototype.getCoordinate=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.getCoordinates=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.getNumPoints=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.isSimple=function(){this.checkNotGeometryCollection(this);var e=new jsts.operation.IsSimpleOp(this);return e.isSimple()},jsts.geom.Geometry.prototype.isValid=function(){var e=new jsts.operation.valid.IsValidOp(this);return e.isValid()},jsts.geom.Geometry.prototype.isEmpty=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.distance=function(e){return jsts.operation.distance.DistanceOp.distance(this,e)},jsts.geom.Geometry.prototype.isWithinDistance=function(e,t){var n=this.getEnvelopeInternal().distance(e.getEnvelopeInternal());return n>t?!1:DistanceOp.isWithinDistance(this,e,t)},jsts.geom.Geometry.prototype.isRectangle=function(){return!1},jsts.geom.Geometry.prototype.getArea=function(){return 0},jsts.geom.Geometry.prototype.getLength=function(){return 0},jsts.geom.Geometry.prototype.getCentroid=function(){if(this.isEmpty())return null;var e,t=null,n=this.getDimension();return n===0?(e=new jsts.algorithm.CentroidPoint,e.add(this),t=e.getCentroid()):n===1?(e=new jsts.algorithm.CentroidLine,e.add(this),t=e.getCentroid()):(e=new jsts.algorithm.CentroidArea,e.add(this),t=e.getCentroid()),this.createPointFromInternalCoord(t,this)},jsts.geom.Geometry.prototype.getInteriorPoint=function(){var e,t=null,n=this.getDimension();return n===0?(e=new InteriorPointPoint(this),t=e.getInteriorPoint()):n===1?(e=new InteriorPointLine(this),t=e.getInteriorPoint()):(e=new InteriorPointArea(this),t=e.getInteriorPoint()),this.createPointFromInternalCoord(t,this)},jsts.geom.Geometry.prototype.getDimension=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.getBoundary=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.getBoundaryDimension=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},jsts.geom.Geometry.prototype.getEnvelopeInternal=function(){return this.envelope===null&&(this.envelope=this.computeEnvelopeInternal()),this.envelope},jsts.geom.Geometry.prototype.disjoint=function(e){return!this.intersects(e)},jsts.geom.Geometry.prototype.touches=function(e){return this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?this.relate(e).isTouches(this.getDimension(),e.getDimension()):!1},jsts.geom.Geometry.prototype.intersects=function(e){return this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?this.isRectangle()?RectangleIntersects.intersects(this,e):e.isRectangle()?RectangleIntersects.intersects(e,this):this.relate(e).isIntersects():!1},jsts.geom.Geometry.prototype.crosses=function(e){return this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?this.relate(e).isCrosses(this.getDimension(),e.getDimension()):!1},jsts.geom.Geometry.prototype.within=function(e){return e.contains(this)},jsts.geom.Geometry.prototype.contains=function(e){return this.getEnvelopeInternal().contains(e.getEnvelopeInternal())?this.isRectangle()?RectangleContains.contains(this,e):this.relate(e).isContains():!1},jsts.geom.Geometry.prototype.overlaps=function(e){return this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?this.relate(e).isOverlaps(this.getDimension(),e.getDimension()):!1},jsts.geom.Geometry.prototype.covers=function(e){return this.getEnvelopeInternal().covers(e.getEnvelopeInternal())?this.isRectangle()?!0:this.relate(e).isCovers():!1},jsts.geom.Geometry.prototype.coveredBy=function(e){return e.covers(this)},jsts.geom.Geometry.prototype.relate=function(e,t){return arguments.length===1?this.relate2.apply(this,arguments):this.relate2(e).matches(t)},jsts.geom.Geometry.prototype.relate2=function(e){return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),jsts.operation.relate.RelateOp.relate(this,e)},jsts.geom.Geometry.prototype.equalsTopo=function(e){return this.getEnvelopeInternal().equals(e.getEnvelopeInternal())?this.relate(e).isEquals(this.getDimension(),e.getDimension()):!1},jsts.geom.Geometry.prototype.equals=function(e){return e instanceof jsts.geom.Geometry||e instanceof jsts.geom.LinearRing||e instanceof jsts.geom.Polygon||e instanceof jsts.geom.GeometryCollection||e instanceof jsts.geom.MultiPoint||e instanceof jsts.geom.MultiLineString||e instanceof jsts.geom.MultiPolygon?this.equalsExact(e):!1},jsts.geom.Geometry.prototype.buffer=function(e,t,n){var r=new jsts.operation.buffer.BufferParameters(t,n);return jsts.operation.buffer.BufferOp.bufferOp2(this,e,r)},jsts.geom.Geometry.prototype.convexHull=function(){return(new jsts.algorithm.ConvexHull(this)).getConvexHull()},jsts.geom.Geometry.prototype.intersection=function(e){if(this.isEmpty())return this.getFactory().createGeometryCollection(null);if(e.isEmpty())return this.getFactory().createGeometryCollection(null);if(this.isGeometryCollection(this))var t=e;return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,e,jsts.operation.overlay.OverlayOp.INTERSECTION)},jsts.geom.Geometry.prototype.union=function(e){return arguments.length===0?jsts.operation.union.UnaryUnionOp.union(this):this.isEmpty()?e.clone():e.isEmpty()?this.clone():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,e,jsts.operation.overlay.OverlayOp.UNION))},jsts.geom.Geometry.prototype.difference=function(e){return this.isEmpty()?this.getFactory().createGeometryCollection(null):e.isEmpty()?this.clone():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,e,jsts.operation.overlay.OverlayOp.DIFFERENCE))},jsts.geom.Geometry.prototype.symDifference=function(e){return this.isEmpty()?e.clone():e.isEmpty()?this.clone():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,e,jsts.operation.overlay.OverlayOp.SYMDIFFERENCE))},jsts.geom.Geometry.prototype.equalsExact=function(e,t){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.equalsNorm=function(e){return e===null||e===undefined?!1:this.norm().equalsExact(e.norm())},jsts.geom.Geometry.prototype.apply=function(e){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.clone=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.normalize=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.norm=function(){var e=this.clone();return e.normalize(),e},jsts.geom.Geometry.prototype.compareTo=function(e){var t=e;return this.getClassSortIndex()!==t.getClassSortIndex()?this.getClassSortIndex()-t.getClassSortIndex():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)},jsts.geom.Geometry.prototype.isEquivalentClass=function(e){return this instanceof jsts.geom.Point&&e instanceof jsts.geom.Point?!0:this instanceof jsts.geom.LineString&&e instanceof jsts.geom.LineString|e instanceof jsts.geom.LinearRing?!0:this instanceof jsts.geom.LinearRing&&e instanceof jsts.geom.LineString|e instanceof jsts.geom.LinearRing?!0:this instanceof jsts.geom.Polygon&&e instanceof jsts.geom.Polygon?!0:this instanceof jsts.geom.MultiPoint&&e instanceof jsts.geom.MultiPoint?!0:this instanceof jsts.geom.MultiLineString&&e instanceof jsts.geom.MultiLineString?!0:this instanceof jsts.geom.MultiPolygon&&e instanceof jsts.geom.MultiPolygon?!0:this instanceof jsts.geom.GeometryCollection&&e instanceof jsts.geom.GeometryCollection?!0:!1},jsts.geom.Geometry.prototype.checkNotGeometryCollection=function(e){if(e.isGeometryCollectionBase())throw new jsts.error.IllegalArgumentError("This method does not support GeometryCollection")},jsts.geom.Geometry.prototype.isGeometryCollection=function(){return this instanceof jsts.geom.GeometryCollection},jsts.geom.Geometry.prototype.isGeometryCollectionBase=function(){return this.CLASS_NAME==="jsts.geom.GeometryCollection"},jsts.geom.Geometry.prototype.computeEnvelopeInternal=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.compareToSameClass=function(e){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.compare=function(e,t){var n=e.iterator(),r=t.iterator();while(n.hasNext()&&r.hasNext()){var i=n.next(),s=r.next(),o=i.compareTo(s);if(o!==0)return o}return n.hasNext()?1:r.hasNext()?-1:0},jsts.geom.Geometry.prototype.equal=function(e,t,n){return n===undefined||n===null||n===0?e.equals(t):e.distance(t)<=n},jsts.geom.Geometry.prototype.getClassSortIndex=function(){var e=[jsts.geom.Point,jsts.geom.MultiPoint,jsts.geom.LineString,jsts.geom.LinearRing,jsts.geom.MultiLineString,jsts.geom.Polygon,jsts.geom.MultiPolygon,jsts.geom.GeometryCollection];for(var t=0;t<e.length;t++)if(this instanceof e[t])return t;return jsts.util.Assert.shouldNeverReachHere("Class not supported: "+this),-1},jsts.geom.Geometry.prototype.toString=function(){return(new jsts.io.WKTWriter).write(this)},jsts.geom.Geometry.prototype.createPointFromInternalCoord=function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)},function(){var e=jsts.geom.Geometry,t=javascript.util.TreeSet,n=javascript.util.Arrays;jsts.geom.GeometryCollection=function(e,t){this.geometries=e||[],this.factory=t},jsts.geom.GeometryCollection.prototype=new e,jsts.geom.GeometryCollection.constructor=jsts.geom.GeometryCollection,jsts.geom.GeometryCollection.prototype.isEmpty=function(){for(var e=0,t=this.geometries.length;e<t;e++){var n=this.getGeometryN(e);if(!n.isEmpty())return!1}return!0},jsts.geom.Geometry.prototype.getArea=function(){var e=0;for(var t=0,n=this.geometries.length;t<n;t++)e+=this.getGeometryN(t).getArea();return e},jsts.geom.Geometry.prototype.getLength=function(){var e=0;for(var t=0,n=this.geometries.length;t<n;t++)e+=this.getGeometryN(t).getLength();return e},jsts.geom.GeometryCollection.prototype.getCoordinate=function(){return this.isEmpty()?null:this.getGeometryN(0).getCoordinate()},jsts.geom.GeometryCollection.prototype.getCoordinates=function(){var e=[],t=-1;for(var n=0,r=this.geometries.length;n<r;n++){var i=this.getGeometryN(n),s=i.getCoordinates();for(var o=0;o<s.length;o++)t++,e[t]=s[o]}return e},jsts.geom.GeometryCollection.prototype.getNumGeometries=function(){return this.geometries.length},jsts.geom.GeometryCollection.prototype.getGeometryN=function(e){var t=this.geometries[e];return t instanceof jsts.geom.Coordinate&&(t=new jsts.geom.Point(t)),t},jsts.geom.GeometryCollection.prototype.equalsExact=function(e,t){if(!this.isEquivalentClass(e))return!1;if(this.geometries.length!==e.geometries.length)return!1;for(var n=0,r=this.geometries.length;n<r;n++){var i=this.getGeometryN(n);if(!i.equalsExact(e.getGeometryN(n),t))return!1}return!0},jsts.geom.GeometryCollection.prototype.clone=function(){var e=[];for(var t=0,n=this.geometries.length;t<n;t++)e.push(this.geometries[t].clone());return this.factory.createGeometryCollection(e)},jsts.geom.GeometryCollection.prototype.normalize=function(){for(var e=0,t=this.geometries.length;e<t;e++)this.getGeometryN(e).normalize();this.geometries.sort()},jsts.geom.GeometryCollection.prototype.compareToSameClass=function(e){var r=new t(n.asList(this.geometries)),i=new t(n.asList(e.geometries));return this.compare(r,i)},jsts.geom.GeometryCollection.prototype.apply=function(e){if(e instanceof jsts.geom.GeometryFilter||e instanceof jsts.geom.GeometryComponentFilter){e.filter(this);for(var t=0,n=this.geometries.length;t<n;t++)this.getGeometryN(t).apply(e)}else if(e instanceof jsts.geom.CoordinateFilter)for(var t=0,n=this.geometries.length;t<n;t++)this.getGeometryN(t).apply(e);else e instanceof jsts.geom.CoordinateSequenceFilter&&this.apply2.apply(this,arguments)},jsts.geom.GeometryCollection.prototype.apply2=function(e){if(this.geometries.length==0)return;for(var t=0;t<this.geometries.length;t++){this.geometries[t].apply(e);if(e.isDone())break}e.isGeometryChanged()},jsts.geom.GeometryCollection.prototype.getDimension=function(){var e=jsts.geom.Dimension.FALSE;for(var t=0,n=this.geometries.length;t<n;t++){var r=this.getGeometryN(t);e=Math.max(e,r.getDimension())}return e},jsts.geom.GeometryCollection.prototype.computeEnvelopeInternal=function(){var e=new jsts.geom.Envelope;for(var t=0,n=this.geometries.length;t<n;t++){var r=this.getGeometryN(t);e.expandToInclude(r.getEnvelopeInternal())}return e},jsts.geom.GeometryCollection.prototype.CLASS_NAME="jsts.geom.GeometryCollection"}(),jsts.geom.GeometryFilter=function(){},jsts.geom.GeometryFilter.prototype.filter=function(e){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.GeometryComponentFilter=function(){},jsts.geom.GeometryComponentFilter.prototype.filter=function(e){throw new jsts.error.AbstractMethodInvocationError},function(){var e=jsts.geom.Location,t=jsts.geom.Dimension;jsts.geom.IntersectionMatrix=function(n){var r=n;n===undefined||n===null?(this.matrix=[[],[],[]],this.setAll(t.FALSE)):typeof n=="string"?this.set(n):r instanceof jsts.geom.IntersectionMatrix&&(this.matrix[e.INTERIOR][e.INTERIOR]=r.matrix[e.INTERIOR][e.INTERIOR],this.matrix[e.INTERIOR][e.BOUNDARY]=r.matrix[e.INTERIOR][e.BOUNDARY],this.matrix[e.INTERIOR][e.EXTERIOR]=r.matrix[e.INTERIOR][e.EXTERIOR],this.matrix[e.BOUNDARY][e.INTERIOR]=r.matrix[e.BOUNDARY][e.INTERIOR],this.matrix[e.BOUNDARY][e.BOUNDARY]=r.matrix[e.BOUNDARY][e.BOUNDARY],this.matrix[e.BOUNDARY][e.EXTERIOR]=r.matrix[e.BOUNDARY][e.EXTERIOR],this.matrix[e.EXTERIOR][e.INTERIOR]=r.matrix[e.EXTERIOR][e.INTERIOR],this.matrix[e.EXTERIOR][e.BOUNDARY]=r.matrix[e.EXTERIOR][e.BOUNDARY],this.matrix[e.EXTERIOR][e.EXTERIOR]=r.matrix[e.EXTERIOR][e.EXTERIOR])},jsts.geom.IntersectionMatrix.prototype.matrix=null,jsts.geom.IntersectionMatrix.prototype.add=function(e){var t,n;for(t=0;t<3;t++)for(n=0;n<3;n++)this.setAtLeast(t,n,e.get(t,n))},jsts.geom.IntersectionMatrix.matches=function(e,n){return typeof e=="string"?jsts.geom.IntersectionMatrix.matches2.call(this,arguments):n==="*"?!0:n==="T"&&(e>=0||e===t.TRUE)?!0:n==="F"&&e===t.FALSE?!0:n==="0"&&e===t.P?!0:n==="1"&&e===t.L?!0:n==="2"&&e===t.A?!0:!1},jsts.geom.IntersectionMatrix.matches2=function(e,t){var n=new jsts.geom.IntersectionMatrix(e);return n.matches(t)},jsts.geom.IntersectionMatrix
.prototype.set=function(e,t,n){if(typeof e=="string"){this.set2(e);return}this.matrix[e][t]=n},jsts.geom.IntersectionMatrix.prototype.set2=function(e){for(var n=0;n<e.length();n++){var r=n/3,i=n%3;this.matrix[r][i]=t.toDimensionValue(e.charAt(n))}},jsts.geom.IntersectionMatrix.prototype.setAtLeast=function(e,t,n){if(arguments.length===1){this.setAtLeast2(arguments[0]);return}this.matrix[e][t]<n&&(this.matrix[e][t]=n)},jsts.geom.IntersectionMatrix.prototype.setAtLeastIfValid=function(e,t,n){e>=0&&t>=0&&this.setAtLeast(e,t,n)},jsts.geom.IntersectionMatrix.prototype.setAtLeast2=function(e){var t;for(t=0;t<e.length;t++){var n=parseInt(t/3),r=parseInt(t%3);this.setAtLeast(n,r,jsts.geom.Dimension.toDimensionValue(e.charAt(t)))}},jsts.geom.IntersectionMatrix.prototype.setAll=function(e){var t,n;for(t=0;t<3;t++)for(n=0;n<3;n++)this.matrix[t][n]=e},jsts.geom.IntersectionMatrix.prototype.get=function(e,t){return this.matrix[e][t]},jsts.geom.IntersectionMatrix.prototype.isDisjoint=function(){return this.matrix[e.INTERIOR][e.INTERIOR]===t.FALSE&&this.matrix[e.INTERIOR][e.BOUNDARY]===t.FALSE&&this.matrix[e.BOUNDARY][e.INTERIOR]===t.FALSE&&this.matrix[e.BOUNDARY][e.BOUNDARY]===t.FALSE},jsts.geom.IntersectionMatrix.prototype.isIntersects=function(){return!this.isDisjoint()},jsts.geom.IntersectionMatrix.prototype.isTouches=function(n,r){return n>r?this.isTouches(r,n):n==t.A&&r==t.A||n==t.L&&r==t.L||n==t.L&&r==t.A||n==t.P&&r==t.A||n==t.P&&r==t.L?this.matrix[e.INTERIOR][e.INTERIOR]===t.FALSE&&(jsts.geom.IntersectionMatrix.matches(this.matrix[e.INTERIOR][e.BOUNDARY],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[e.BOUNDARY][e.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[e.BOUNDARY][e.BOUNDARY],"T")):!1},jsts.geom.IntersectionMatrix.prototype.isCrosses=function(n,r){return n==t.P&&r==t.L||n==t.P&&r==t.A||n==t.L&&r==t.A?jsts.geom.IntersectionMatrix.matches(this.matrix[e.INTERIOR][e.INTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[e.INTERIOR][e.EXTERIOR],"T"):n==t.L&&r==t.P||n==t.A&&r==t.P||n==t.A&&r==t.L?jsts.geom.IntersectionMatrix.matches(matrix[e.INTERIOR][e.INTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[e.EXTERIOR][e.INTERIOR],"T"):n===t.L&&r===t.L?this.matrix[e.INTERIOR][e.INTERIOR]===0:!1},jsts.geom.IntersectionMatrix.prototype.isWithin=function(){return jsts.geom.IntersectionMatrix.matches(this.matrix[e.INTERIOR][e.INTERIOR],"T")&&this.matrix[e.INTERIOR][e.EXTERIOR]==t.FALSE&&this.matrix[e.BOUNDARY][e.EXTERIOR]==t.FALSE},jsts.geom.IntersectionMatrix.prototype.isContains=function(){return jsts.geom.IntersectionMatrix.matches(this.matrix[e.INTERIOR][e.INTERIOR],"T")&&this.matrix[e.EXTERIOR][e.INTERIOR]==t.FALSE&&this.matrix[e.EXTERIOR][e.BOUNDARY]==t.FALSE},jsts.geom.IntersectionMatrix.prototype.isCovers=function(){var n=jsts.geom.IntersectionMatrix.matches(this.matrix[e.INTERIOR][e.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[e.INTERIOR][e.BOUNDARY],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[e.BOUNDARY][e.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[e.BOUNDARY][e.BOUNDARY],"T");return n&&this.matrix[e.EXTERIOR][e.INTERIOR]==t.FALSE&&this.matrix[e.EXTERIOR][e.BOUNDARY]==t.FALSE},jsts.geom.IntersectionMatrix.prototype.isCoveredBy=function(){var n=jsts.geom.IntersectionMatrix.matches(this.matrix[e.INTERIOR][e.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[e.INTERIOR][e.BOUNDARY],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[e.BOUNDARY][e.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[e.BOUNDARY][e.BOUNDARY],"T");return n&&this.matrix[e.INTERIOR][e.EXTERIOR]===t.FALSE&&this.matrix[e.BOUNDARY][e.EXTERIOR]===t.FALSE},jsts.geom.IntersectionMatrix.prototype.isEquals=function(n,r){return n!==r?!1:jsts.geom.IntersectionMatrix.matches(this.matrix[e.INTERIOR][e.INTERIOR],"T")&&this.matrix[e.EXTERIOR][e.INTERIOR]===t.FALSE&&this.matrix[e.INTERIOR][e.EXTERIOR]===t.FALSE&&this.matrix[e.EXTERIOR][e.BOUNDARY]===t.FALSE&&this.matrix[e.BOUNDARY][e.EXTERIOR]===t.FALSE},jsts.geom.IntersectionMatrix.prototype.isOverlaps=function(n,r){return n==t.P&&r===t.P||n==t.A&&r===t.A?jsts.geom.IntersectionMatrix.matches(this.matrix[e.INTERIOR][e.INTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[e.INTERIOR][e.EXTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[e.EXTERIOR][e.INTERIOR],"T"):n===t.L&&r===t.L?this.matrix[e.INTERIOR][e.INTERIOR]==1&&jsts.geom.IntersectionMatrix.matches(this.matrix[e.INTERIOR][e.EXTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[e.EXTERIOR][e.INTERIOR],"T"):!1},jsts.geom.IntersectionMatrix.prototype.matches=function(e){if(e.length!=9)throw new jsts.error.IllegalArgumentException("Should be length 9: "+e);for(var t=0;t<3;t++)for(var n=0;n<3;n++)if(!jsts.geom.IntersectionMatrix.matches(this.matrix[t][n],e.charAt(3*t+n)))return!1;return!0},jsts.geom.IntersectionMatrix.prototype.transpose=function(){var e=matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=e,e=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=e,e=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=e,this},jsts.geom.IntersectionMatrix.prototype.toString=function(){var e,n,r="";for(e=0;e<3;e++)for(n=0;n<3;n++)r+=t.toDimensionSymbol(this.matrix[e][n]);return r}}(),function(){jsts.geom.Coordinate=function(e,t){typeof e=="number"?(this.x=e,this.y=t):e instanceof jsts.geom.Coordinate?(this.x=parseFloat(e.x),this.y=parseFloat(e.y)):e===undefined||e===null?(this.x=0,this.y=0):typeof e=="string"&&(this.x=parseFloat(e),this.y=parseFloat(t))},jsts.geom.Coordinate.prototype.setCoordinate=function(e){this.x=e.x,this.y=e.y},jsts.geom.Coordinate.prototype.clone=function(){return new jsts.geom.Coordinate(this.x,this.y)},jsts.geom.Coordinate.prototype.distance=function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)},jsts.geom.Coordinate.prototype.equals2D=function(e){return this.x!==e.x?!1:this.y!==e.y?!1:!0},jsts.geom.Coordinate.prototype.equals=function(e){return!e instanceof jsts.geom.Coordinate||e===undefined?!1:this.equals2D(e)},jsts.geom.Coordinate.prototype.compareTo=function(e){return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},jsts.geom.Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+")"}}(),jsts.geom.Envelope=function(){jsts.geom.Envelope.prototype.init.apply(this,arguments)},jsts.geom.Envelope.prototype.minx=null,jsts.geom.Envelope.prototype.maxx=null,jsts.geom.Envelope.prototype.miny=null,jsts.geom.Envelope.prototype.maxy=null,jsts.geom.Envelope.prototype.init=function(){typeof arguments[0]=="number"&&arguments.length===4?this.initFromValues(arguments[0],arguments[1],arguments[2],arguments[3]):arguments[0]instanceof jsts.geom.Coordinate&&arguments.length===1?this.initFromCoordinate(arguments[0]):arguments[0]instanceof jsts.geom.Coordinate&&arguments.length===2?this.initFromCoordinates(arguments[0],arguments[1]):arguments[0]instanceof jsts.geom.Envelope&&arguments.length===1?this.initFromEnvelope(arguments[0]):this.setToNull()},jsts.geom.Envelope.prototype.initFromValues=function(e,t,n,r){e<t?(this.minx=e,this.maxx=t):(this.minx=t,this.maxx=e),n<r?(this.miny=n,this.maxy=r):(this.miny=r,this.maxy=n)},jsts.geom.Envelope.prototype.initFromCoordinates=function(e,t){this.initFromValues(e.x,t.x,e.y,t.y)},jsts.geom.Envelope.prototype.initFromCoordinate=function(e){this.initFromValues(e.x,e.x,e.y,e.y)},jsts.geom.Envelope.prototype.initFromEnvelope=function(e){this.minx=e.minx,this.maxx=e.maxx,this.miny=e.miny,this.maxy=e.maxy},jsts.geom.Envelope.prototype.setToNull=function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1},jsts.geom.Envelope.prototype.isNull=function(){return this.maxx<this.minx},jsts.geom.Envelope.prototype.getHeight=function(){return this.isNull()?0:this.maxy-this.miny},jsts.geom.Envelope.prototype.getWidth=function(){return this.isNull()?0:this.maxx-this.minx},jsts.geom.Envelope.prototype.getMinX=function(){return this.minx},jsts.geom.Envelope.prototype.getMaxX=function(){return this.maxx},jsts.geom.Envelope.prototype.getMinY=function(){return this.miny},jsts.geom.Envelope.prototype.getMaxY=function(){return this.maxy},jsts.geom.Envelope.prototype.getArea=function(){return this.getWidth()*this.getHeight()},jsts.geom.Envelope.prototype.expandToInclude=function(){arguments[0]instanceof jsts.geom.Coordinate?this.expandToIncludeCoordinate(arguments[0]):arguments[0]instanceof jsts.geom.Envelope?this.expandToIncludeEnvelope(arguments[0]):this.expandToIncludeValues(arguments[0],arguments[1])},jsts.geom.Envelope.prototype.expandToIncludeCoordinate=function(e){this.expandToIncludeValues(e.x,e.y)},jsts.geom.Envelope.prototype.expandToIncludeValues=function(e,t){this.isNull()?(this.minx=e,this.maxx=e,this.miny=t,this.maxy=t):(e<this.minx&&(this.minx=e),e>this.maxx&&(this.maxx=e),t<this.miny&&(this.miny=t),t>this.maxy&&(this.maxy=t))},jsts.geom.Envelope.prototype.expandToIncludeEnvelope=function(e){if(e.isNull())return;this.isNull()?(this.minx=e.getMinX(),this.maxx=e.getMaxX(),this.miny=e.getMinY(),this.maxy=e.getMaxY()):(e.minx<this.minx&&(this.minx=e.minx),e.maxx>this.maxx&&(this.maxx=e.maxx),e.miny<this.miny&&(this.miny=e.miny),e.maxy>this.maxy&&(this.maxy=e.maxy))},jsts.geom.Envelope.prototype.expandBy=function(){arguments.length===1?this.expandByDistance(arguments[0]):this.expandByDistances(arguments[0],arguments[1])},jsts.geom.Envelope.prototype.expandByDistance=function(e){this.expandByDistances(e,e)},jsts.geom.Envelope.prototype.expandByDistances=function(e,t){if(this.isNull())return;this.minx-=e,this.maxx+=e,this.miny-=t,this.maxy+=t,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull()},jsts.geom.Envelope.prototype.translate=function(e,t){if(this.isNull())return;this.init(this.minx+e,this.maxx+e,this.miny+t,this.maxy+t)},jsts.geom.Envelope.prototype.centre=function(){return this.isNull()?null:new jsts.geom.Coordinate((this.minx+this.maxx)/2,(this.miny+this.maxy)/2)},jsts.geom.Envelope.prototype.intersection=function(e){if(this.isNull()||e.isNull()||!this.intersects(e))return new jsts.geom.Envelope;var t=this.minx>e.minx?this.minx:e.minx,n=this.miny>e.miny?this.miny:e.miny,r=this.maxx<e.maxx?this.maxx:e.maxx,i=this.maxy<e.maxy?this.maxy:e.maxy;return new jsts.geom.Envelope(t,r,n,i)},jsts.geom.Envelope.prototype.intersects=function(){return arguments[0]instanceof jsts.geom.Envelope?this.intersectsEnvelope(arguments[0]):arguments[0]instanceof jsts.geom.Coordinate?this.intersectsCoordinate(arguments[0]):this.intersectsValues(arguments[0],arguments[1])},jsts.geom.Envelope.prototype.intersectsEnvelope=function(e){if(this.isNull()||e.isNull())return!1;var t=!(e.minx>this.maxx||e.maxx<this.minx||e.miny>this.maxy||e.maxy<this.miny);return t},jsts.geom.Envelope.prototype.intersectsCoordinate=function(e){return this.intersectsValues(e.x,e.y)},jsts.geom.Envelope.prototype.intersectsValues=function(e,t){return this.isNull()?!1:!(e>this.maxx||e<this.minx||t>this.maxy||t<this.miny)},jsts.geom.Envelope.prototype.contains=function(){return arguments[0]instanceof jsts.geom.Envelope?this.containsEnvelope(arguments[0]):arguments[0]instanceof jsts.geom.Coordinate?this.containsCoordinate(arguments[0]):this.containsValues(arguments[0],arguments[1])},jsts.geom.Envelope.prototype.containsEnvelope=function(e){return this.coversEnvelope(e)},jsts.geom.Envelope.prototype.containsCoordinate=function(e){return this.coversCoordinate(e)},jsts.geom.Envelope.prototype.containsValues=function(e,t){return this.coversValues(e,t)},jsts.geom.Envelope.prototype.covers=function(){p instanceof jsts.geom.Envelope?this.coversEnvelope(arguments[0]):p instanceof jsts.geom.Coordinate?this.coversCoordinate(arguments[0]):this.coversValues(arguments[0],arguments[1])},jsts.geom.Envelope.prototype.coversValues=function(e,t){return this.isNull()?!1:e>=this.minx&&e<=this.maxx&&t>=this.miny&&t<=this.maxy},jsts.geom.Envelope.prototype.coversCoordinate=function(e){return this.coversValues(e.x,e.y)},jsts.geom.Envelope.prototype.coversEnvelope=function(e){return this.isNull()||e.isNull()?!1:e.minx>=this.minx&&e.maxx<=this.maxx&&e.miny>=this.miny&&e.maxy<=this.maxy},jsts.geom.Envelope.prototype.distance=function(e){if(this.intersects(e))return 0;var t=0;this.maxx<e.minx&&(t=e.minx-this.maxx),this.minx>e.maxx&&(t=this.minx-e.maxx);var n=0;return this.maxy<e.miny&&(n=e.miny-this.maxy),this.miny>e.maxy&&(n=this.miny-e.maxy),t===0?n:n===0?t:Math.sqrt(t*t+n*n)},jsts.geom.Envelope.prototype.equals=function(e){return this.isNull()?e.isNull():this.maxx===e.maxx&&this.maxy===e.maxy&&this.minx===e.minx&&this.miny===e.miny},jsts.geom.Envelope.prototype.toString=function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"},jsts.geom.Envelope.intersects=function(e,t,n){if(arguments.length===4)return jsts.geom.Envelope.intersectsEnvelope(arguments[0],arguments[1],arguments[2],arguments[3]);var r=e.x<t.x?e.x:t.x,i=e.x>t.x?e.x:t.x,s=e.y<t.y?e.y:t.y,o=e.y>t.y?e.y:t.y;return n.x>=r&&n.x<=i&&n.y>=s&&n.y<=o?!0:!1},jsts.geom.Envelope.intersectsEnvelope=function(e,t,n,r){var i=Math.min(n.x,r.x),s=Math.max(n.x,r.x),o=Math.min(e.x,t.x),u=Math.max(e.x,t.x);return o>s?!1:u<i?!1:(i=Math.min(n.y,r.y),s=Math.max(n.y,r.y),o=Math.min(e.y,t.y),u=Math.max(e.y,t.y),o>s?!1:u<i?!1:!0)},jsts.geom.Envelope.prototype.clone=function(){return new jsts.geom.Envelope(this.minx,this.maxx,this.miny,this.maxy)},jsts.geom.GeometryFactory=function(e){this.precisionModel=e||new jsts.geom.PrecisionModel},jsts.geom.GeometryFactory.prototype.precisionModel=null,jsts.geom.GeometryFactory.prototype.getPrecisionModel=function(){return this.precisionModel},jsts.geom.GeometryFactory.prototype.createPoint=function(e){var t=new jsts.geom.Point(e,this);return t},jsts.geom.GeometryFactory.prototype.createLineString=function(e){var t=new jsts.geom.LineString(e,this);return t},jsts.geom.GeometryFactory.prototype.createLinearRing=function(e){var t=new jsts.geom.LinearRing(e,this);return t},jsts.geom.GeometryFactory.prototype.createPolygon=function(e,t){var n=new jsts.geom.Polygon(e,t,this);return n},jsts.geom.GeometryFactory.prototype.createMultiPoint=function(e){if(e&&e[0]instanceof jsts.geom.Coordinate){var t=[],n;for(n=0;n<e.length;n++)t.push(this.createPoint(e[n]));e=t}return new jsts.geom.MultiPoint(e,this)},jsts.geom.GeometryFactory.prototype.createMultiLineString=function(e){return new jsts.geom.MultiLineString(e,this)},jsts.geom.GeometryFactory.prototype.createMultiPolygon=function(e){return new jsts.geom.MultiPolygon(e,this)},jsts.geom.GeometryFactory.prototype.buildGeometry=function(e){var t=null,n=!1,r=!1;for(var i=e.iterator();i.hasNext();){var s=i.next(),o=s.CLASS_NAME;t===null&&(t=o),o!==t&&(n=!0),s.isGeometryCollectionBase()&&(r=!0)}if(t===null)return this.createGeometryCollection(null);if(n||r)return this.createGeometryCollection(e.toArray());var u=e.get(0),a=e.size()>1;if(a){if(u instanceof jsts.geom.Polygon)return this.createMultiPolygon(e.toArray());if(u instanceof jsts.geom.LineString)return this.createMultiLineString(e.toArray());if(u instanceof jsts.geom.Point)return this.createMultiPoint(e.toArray());jsts.util.Assert.shouldNeverReachHere("Unhandled class: "+u)}return u},jsts.geom.GeometryFactory.prototype.createGeometryCollection=function(e){return new jsts.geom.GeometryCollection(e,this)},jsts.geom.GeometryFactory.prototype.toGeometry=function(e){return e.isNull()?this.createPoint(null):e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new jsts.geom.Coordinate(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new jsts.geom.Coordinate(e.getMinX(),e.getMinY()),new jsts.geom.Coordinate(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new jsts.geom.Coordinate(e.getMinX(),e.getMinY()),new jsts.geom.Coordinate(e.getMinX(),e.getMaxY()),new jsts.geom.Coordinate(e.getMaxX(),e.getMaxY()),new jsts.geom.Coordinate(e.getMaxX(),e.getMinY()),new jsts.geom.Coordinate(e.getMinX(),e.getMinY())]),null)},function(){var e=jsts.geom.Dimension;jsts.geom.LineString=function(e,t){this.factory=t,this.points=e||[]},jsts.geom.LineString.prototype=new jsts.geom.Geometry,jsts.geom.LineString.constructor=jsts.geom.LineString,jsts.geom.LineString.prototype.points=null,jsts.geom.LineString.prototype.getCoordinates=function(){return this.points},jsts.geom.LineString.prototype.getCoordinateSequence=function(){return this.points},jsts.geom.LineString.prototype.getCoordinateN=function(e){return this.points[e]},jsts.geom.LineString.prototype.getCoordinate=function(){return this.isEmpty()?null:this.getCoordinateN(0)},jsts.geom.LineString.prototype.getDimension=function(){return 1},jsts.geom.LineString.prototype.getBoundaryDimension=function(){return this.isClosed()?e.FALSE:0},jsts.geom.LineString.prototype.isEmpty=function(){return this.points.length===0},jsts.geom.LineString.prototype.getNumPoints=function(){return this.points.length},jsts.geom.LineString.prototype.getPointN=function(e){return this.getFactory().createPoint(this.points[e])},jsts.geom.LineString.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},jsts.geom.LineString.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},jsts.geom.LineString.prototype.isClosed=function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.points.length-1))},jsts.geom.LineString.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},jsts.geom.LineString.prototype.getGeometryType=function(){return"LineString"},jsts.geom.LineString.prototype.getLength=function(){return jsts.algorithm.CGAlgorithms.computeLength(this.points)},jsts.geom.LineString.prototype.getBoundary=function(){return(new jsts.operation.BoundaryOp(this)).getBoundary()},jsts.geom.LineString.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new jsts.geom.Envelope;var e=new jsts.geom.Envelope;return this.points.forEach(function(t){e.expandToInclude(t)}),e},jsts.geom.LineString.prototype.equalsExact=function(e,t){return this.isEquivalentClass(e)?this.points.length!==e.points.length?!1:this.isEmpty()&&e.isEmpty()?!0:this.points.reduce(function(n,r,i){return n&&jsts.geom.Geometry.prototype.equal(r,e.points[i],t)}):!1},jsts.geom.LineString.prototype.isEquivalentClass=function(e){return e instanceof jsts.geom.LineString},jsts.geom.LineString.prototype.compareToSameClass=function(e){var t=e,n=0,r=this.points.length,i=0,s=t.points.length;while(n<r&&i<s){var o=this.points[n].compareTo(t.points[i]);if(o!==0)return o;n++,i++}return n<r?1:i<s?-1:0},jsts.geom.LineString.prototype.apply=function(e){if(e instanceof jsts.geom.GeometryFilter||e instanceof jsts.geom.GeometryComponentFilter)e.filter(this);else if(e instanceof jsts.geom.CoordinateFilter)for(var t=0,n=this.points.length;t<n;t++)e.filter(this.points[t]);else e instanceof jsts.geom.CoordinateSequenceFilter&&this.apply2.apply(this,arguments)},jsts.geom.LineString.prototype.apply2=function(e){if(this.points.length===0)return;for(var t=0;t<this.points.length;t++){e.filter(this.points,t);if(e.isDone())break}e.isGeometryChanged()},jsts.geom.LineString.prototype.clone=function(){var e=[];for(var t=0,n=this.points.length;t<n;t++)e.push(this.points[t].clone());return this.factory.createLineString(e)},jsts.geom.LineString.prototype.normalize=function(){var e,t,n,r,i,s;s=this.points.length,t=parseInt(s/2);for(e=0;e<t;e++){n=s-1-e,r=this.points[e],i=this.points[n];if(!r.equals(i)){r.compareTo(i)>0&&this.points.reverse();return}}},jsts.geom.LineString.prototype.CLASS_NAME="jsts.geom.LineString"}(),function(){jsts.geom.MultiLineString=function(e,t){this.geometries=e||[],this.factory=t},jsts.geom.MultiLineString.prototype=new jsts.geom.GeometryCollection,jsts.geom.MultiLineString.constructor=jsts.geom.MultiLineString,jsts.geom.MultiLineString.prototype.getBoundary=function(){return(new jsts.operation.BoundaryOp(this)).getBoundary()},jsts.geom.MultiLineString.prototype.equalsExact=function(e,t){return this.isEquivalentClass(e)?jsts.geom.GeometryCollection.prototype.equalsExact.call(this,e,t):!1},jsts.geom.MultiLineString.prototype.CLASS_NAME="jsts.geom.MultiLineString"}(),function(){jsts.geom.LinearRing=function(e,t){jsts.geom.LineString.apply(this,arguments)},jsts.geom.LinearRing.prototype=new jsts.geom.LineString,jsts.geom.LinearRing.constructor=jsts.geom.LinearRing,jsts.geom.LinearRing.prototype.getBoundaryDimension=function(){return jsts.geom.Dimension.FALSE},jsts.geom.LinearRing.prototype.isSimple=function(){return!0},jsts.geom.LinearRing.prototype.getGeometryType=function(){return"LinearRing"},jsts.geom.LinearRing.MINIMUM_VALID_SIZE=4,jsts.geom.LinearRing.prototype.CLASS_NAME="jsts.geom.LinearRing"}(),jsts.geom.LineSegment=function(e,t){if(e===undefined){this.p0=new jsts.geom.Coordinate,this.p1=new jsts.geom.Coordinate;return}this.p0=e,this.p1=t},jsts.geom.LineSegment.prototype.p0=null,jsts.geom.LineSegment.prototype.p1=null,jsts.geom.LineSegment.prototype.getLength=function(){return this.p0.distance(this.p1)},jsts.geom.LineSegment.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},jsts.geom.LineSegment.prototype.isVertical=function(){return this.p0.x===this.p1.x},jsts.geom.LineSegment.prototype.reverse=function(){var e=this.p0;this.p0=this.p1,this.p1=e},jsts.geom.LineSegment.prototype.projectionFactor=function(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=t*t+n*n,i=((e.x-this.p0.x)*t+(e.y-this.p0.y)*n)/r;return i},jsts.geom.LineSegment.prototype.closestPoint=function(e){var t=this.projectionFactor(e);if(t>0&&t<1)return this.project(e);var n=this.p0.distance(e),r=this.p1.distance(e);return n<r?this.p0:this.p1},jsts.geom.LineSegment.prototype.closestPoints=function(e){var t=this.intersection(e);if(t!==null)return[t,t];var n=[],r=Number.MAX_VALUE,i,s=this.closestPoint(e.p0);r=s.distance(e.p0),n[0]=s,n[1]=e.p0;var o=this.closestPoint(e.p1);i=o.distance(e.p1),i<r&&(r=i,n[0]=o,n[1]=e.p1);var u=e.closestPoint(this.p0);i=u.distance(this.p0),i<r&&(r=i,n[0]=this.p0,n[1]=u);var a=e.closestPoint(this.p1);return i=a.distance(this.p1),i<r&&(r=i,n[0]=this.p1,n[1]=a),n},jsts.geom.LineSegment.prototype.intersection=function(e){var t=new jsts.algorithm.RobustLineIntersector;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null},jsts.geom.LineSegment.prototype.project=function(e){if(e.equals(this.p0)||e.equals(this.p1))return new jsts.geom.Coordinate(e);var t=this.projectionFactor(e),n=new jsts.geom.Coordinate;return n.x=this.p0.x+t*(this.p1.x-this.p0.x),n.y=this.p0.y+t*(this.p1.y-this.p0.y),n},jsts.geom.LineSegment.prototype.setCoordinates=function(e){if(e instanceof jsts.geom.Coordinate){this.setCoordinates2.apply(this,arguments);return}this.setCoordinates2(e.p0,e.p1)},jsts.geom.LineSegment.prototype.setCoordinates2=function(e,t){this.p0.x=e.x,this.p0.y=e.y,this.p1.x=t.x,this.p1.y=t.y},jsts.geom.LineSegment.prototype.distance=function(e){return jsts.algorithm.CGAlgorithms.distancePointLine(e,this.p0,this.p1)},jsts.geom.Point=function(e,t){this.factory=t;if(e===undefined)return;this.coordinate=e},jsts.geom.Point.prototype=new jsts.geom.Geometry,jsts.geom.Point.constructor=jsts.geom.Point,jsts.geom.Point.CLASS_NAME="jsts.geom.Point",jsts.geom.Point.prototype.coordinate=null,jsts.geom.Point.prototype.getX=function(){return this.coordinate.x},jsts.geom.Point.prototype.getY=function(){return this.coordinate.y},jsts.geom.Point.prototype.getCoordinate=function(){return this.coordinate},jsts.geom.Point.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.coordinate]},jsts.geom.Point.prototype.isEmpty=function(){return this.coordinate===null},jsts.geom.Point.prototype.equalsExact=function(e,t){return this.isEquivalentClass(e)?this.isEmpty()&&e.isEmpty()?!0:this.equal(e.getCoordinate(),this.getCoordinate(),t):!1},jsts.geom.Point.prototype.getNumPoints=function(){return this.isEmpty()?0:1},jsts.geom.Point.prototype.isSimple=function(){return!0},jsts.geom.Point.prototype.getBoundary=function(){return new jsts.geom.GeometryCollection(null)},jsts.geom.Point.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new jsts.geom.Envelope:new jsts.geom.Envelope(this.coordinate)},jsts.geom.Point.prototype.apply=function(e){if(e instanceof jsts.geom.GeometryFilter||e instanceof jsts.geom.GeometryComponentFilter)e.filter(this);else if(e instanceof jsts.geom.CoordinateFilter){if(this.isEmpty())return;e.filter(this.getCoordinate())}},jsts.geom.Point.prototype.clone=function(){return new jsts.geom.Point(this.coordinate.clone(),this.factory)},jsts.geom.Point.prototype.getDimension=function(){return 0},jsts.geom.Point.prototype.getBoundaryDimension=function(){return jsts.geom.Dimension.FALSE},jsts.geom.Point.prototype.reverse=function(){return this.clone()},jsts.geom.Point.prototype.isValid=function(){return jsts.operation.valid.IsValidOp.isValid(this.getCoordinate())?!0:!1},jsts.geom.Point.prototype.normalize=function(){},jsts.geom.Point.prototype.compareToSameClass=function(e){var t=e;return this.getCoordinate().compareTo(t.getCoordinate())},jsts.geom.Point.prototype.getGeometryType=function(){return"Point"},jsts.geom.Point.prototype.hashCode=function(){return"Point_"+this.coordinate.hashCode()},jsts.geom.Point.prototype.CLASS_NAME="jsts.geom.Point",function(){jsts.geom.MultiPoint=function(e,t){this.geometries=e||[],this.factory=t},jsts.geom.MultiPoint.prototype=new jsts.geom.GeometryCollection,jsts.geom.MultiPoint.constructor=jsts.geom.MultiPoint,jsts.geom.MultiPoint.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},jsts.geom.MultiPoint.prototype.getGeometryN=function(e){return this.geometries[e]},jsts.geom.MultiPoint.prototype.equalsExact=function(e,t){return this.isEquivalentClass(e)?jsts.geom.GeometryCollection.prototype.equalsExact.call(this,e,t):!1},jsts.geom.MultiPoint.prototype.CLASS_NAME="jsts.geom.MultiPoint"}(),function(){jsts.geom.Polygon=function(e,t,n){this.shell=e||n.createLinearRing(null),this.holes=t||[],this.factory=n},jsts.geom.Polygon.prototype=new jsts.geom.Geometry,jsts.geom.Polygon.constructor=jsts.geom.Polygon,jsts.geom.Polygon.prototype.getCoordinate=function(){return this.shell.getCoordinate()},jsts.geom.Polygon.prototype.getCoordinates=function(){if(this.isEmpty())return[];var e=[],t=-1,n=this.shell.getCoordinates();for(var r=0;r<n.length;r++)t++,e[t]=n[r];for(var i=0;i<this.holes.length;i++){var s=this.holes[i].getCoordinates();for(var o=0;o<s.length;o++)t++,e[t]=s[o]}return e},jsts.geom.Polygon.prototype.isEmpty=function(){return this.shell.isEmpty()},jsts.geom.Polygon.prototype.getExteriorRing=function(){return this.shell},jsts.geom.Polygon.prototype.getInteriorRingN=function(e){return this.holes[e]},jsts.geom.Polygon.prototype.getNumInteriorRing=function(){return this.holes.length},jsts.geom.Polygon.prototype.getArea=function(){var e=0;e+=Math.abs(jsts.algorithm.CGAlgorithms.signedArea(this.shell.getCoordinateSequence()));for(var t=0;t<this.holes.length;t++)e-=Math.abs(jsts.algorithm.CGAlgorithms.signedArea(this.holes[t].getCoordinateSequence()));return e},jsts.geom.Polygon.prototype.getLength=function(){var e=0;e+=this.shell.getLength();for(var t=0;t<this.holes.length;t++)e+=this.holes[t].getLength();return e},jsts.geom.Polygon.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString(null);var e=[];e[0]=this.shell.clone();for(var t=0,n=this.holes.length;t<n;t++)e[t+1]=this.holes[t].clone();return e.length<=1?e[0]:this.getFactory().createMultiLineString(e)},jsts.geom.Polygon.prototype.computeEnvelopeInternal=function(){return this.shell.getEnvelopeInternal()},jsts.geom.Polygon.prototype.getDimension=function(){return 2},jsts.geom.Polygon.prototype.getBoundaryDimension=function(){return 1},jsts.geom.Polygon.prototype.equalsExact=function(e,t){if(!this.isEquivalentClass(e))return!1;if(this.isEmpty()&&e.isEmpty())return!0;if(this.isEmpty()!==e.isEmpty())return!1;if(!this.shell.equalsExact(e.shell,t))return!1;if(this.holes.length!==e.holes.length)return!1;if(this.holes.length!==e.holes.length)return!1;for(var n=0;n<this.holes.length;n++)if(!this.holes[n].equalsExact(e.holes[n],t))return!1;return!0},jsts.geom.Polygon.prototype.compareToSameClass=function(e){return this.shell.compareToSameClass(e.shell)},jsts.geom.Polygon.prototype.apply=function(e){if(e instanceof jsts.geom.GeometryComponentFilter){e.filter(this),this.shell.apply(e);for(var t=0,n=this.holes.length;t<n;t++)this.holes[t].apply(e)}else if(e instanceof jsts.geom.GeometryFilter)e.filter(this);else if(e instanceof jsts.geom.CoordinateFilter){this.shell.apply(e);for(var t=0,n=this.holes.length;t<n;t++)this.holes[t].apply(e)}else e instanceof jsts.geom.CoordinateSequenceFilter&&this.apply2.apply(this,arguments)},jsts.geom.Polygon.prototype.apply2=function(e){this.shell.apply(e);if(!e.isDone())for(var t=0;t<this.holes.length;t++){this.holes[t].apply(e);if(e.isDone())break}e.isGeometryChanged()},jsts.geom.Polygon.prototype.clone=function(){var e=[];for(var t=0,n=this.holes.length;t<n;t++)e.push(this.holes[t].clone());return this.factory.createPolygon(this.shell.clone(),e)},jsts.geom.Polygon.prototype.normalize=function(){this.normalize2(this.shell,!0);for(var e=0,t=this.holes.length;e<t;e++)this.normalize2(this.holes[e],!1);this.holes.sort()},jsts.geom.Polygon.prototype.normalize2=function(e,t){if(e.isEmpty())return;var n=e.points.slice(0,e.points.length-1),r=jsts.geom.CoordinateArrays.minCoordinate(e.points);jsts.geom.CoordinateArrays.scroll(n,r),e.points=n.concat(),e.points[n.length]=n[0],jsts.algorithm.CGAlgorithms.isCCW(e.points)===t&&e.points.reverse()},jsts.geom.Polygon.prototype.CLASS_NAME="jsts.geom.Polygon"}(),function(){jsts.geom.MultiPolygon=function(e,t){this.geometries=e||[],this.factory=t},jsts.geom.MultiPolygon.prototype=new jsts.geom.GeometryCollection,jsts.geom.MultiPolygon.constructor=jsts.geom.MultiPolygon,jsts.geom.MultiPolygon.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString(null);var e=[];for(var t=0;t<this.geometries.length;t++){var n=this.geometries[t],r=n.getBoundary();for(var i=0;i<r.getNumGeometries();i++)e.push(r.getGeometryN(i))}return this.getFactory().createMultiLineString(e)},jsts.geom.MultiPolygon.prototype.equalsExact=function(e,t){return this.isEquivalentClass(e)?jsts.geom.GeometryCollection.prototype.equalsExact.call(this,e,t):!1},jsts.geom.MultiPolygon.prototype.CLASS_NAME="jsts.geom.MultiPolygon"}(),jsts.geom.PrecisionModel=function(e){if(typeof e=="number"){this.modelType=jsts.geom.PrecisionModel.FIXED,this.scale=e;return}this.modelType=e||jsts.geom.PrecisionModel.FLOATING,this.modelType===jsts.geom.PrecisionModel.FIXED&&(this.scale=1)},jsts.geom.PrecisionModel.FLOATING="FLOATING",jsts.geom.PrecisionModel.FIXED="FIXED",jsts.geom.PrecisionModel.FLOATING_SINGLE="FLOATING_SINGLE",jsts.geom.PrecisionModel.prototype.scale=null,jsts.geom.PrecisionModel.prototype.modelType=null,jsts.geom.PrecisionModel.prototype.isFloating=function(){return this.modelType===jsts.geom.PrecisionModel.FLOATING||this.modelType===jsts.geom.PrecisionModel.FLOATING_SINLGE},jsts.geom.PrecisionModel.prototype.getScale=function(){return this.scale},jsts.geom.PrecisionModel.prototype.getType=function(){return this.modelType},jsts.geom.PrecisionModel.prototype.equals=function(e){return!0},jsts.geom.PrecisionModel.prototype.makePrecise=function(e){if(e instanceof jsts.geom.Coordinate){this.makePrecise2(e);return}return isNaN(e)?e:this.modelType===jsts.geom.PrecisionModel.FIXED?Math.round(e*this.scale)/this.scale:e},jsts.geom.PrecisionModel.prototype.makePrecise2=function(e){if(this.modelType===jsts.geom.PrecisionModel.FLOATING)return;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)},jsts.geom.PrecisionModel.prototype.compareTo=function(e){var t=e;return 0},jsts.geom.Triangle=function(e,t,n){this.p0=e,this.p1=t,this.p2=n},jsts.geom.Triangle.isAcute=function(e,t,n){return jsts.algorithm.Angle.isAcute(e,t,n)?jsts.algorithm.Angle.isAcute(t,n,e)?jsts.algorithm.Angle.isAcute(n,e,t)?!0:!1:!1:!1},jsts.geom.Triangle.perpendicularBisector=function(e,t){var n,r,i,s;return n=t.x-e.x,r=t.y-e.y,i=new jsts.algorithm.HCoordinate(e.x+n/2,e.y+r/2,1),s=new jsts.algorithm.HCoordinate(e.x-r+n/2,e.y+n+r/2,1),new jsts.algorithm.HCoordinate(i,s)},jsts.geom.Triangle.circumcentre=function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p;return r=n.x,i=n.y,s=e.x-r,o=e.y-i,u=t.x-r,a=t.y-i,f=2*jsts.geom.Triangle.det(s,o,u,a),l=jsts.geom.Triangle.det(o,s*s+o*o,a,u*u+a*a),c=jsts.geom.Triangle.det(s,s*s+o*o,u,u*u+a*a),h=r-l/f,p=i+c/f,new 
jsts.geom.Coordinate(h,p)},jsts.geom.Triangle.det=function(e,t,n,r){return e*r-t*n},jsts.geom.Triangle.inCentre=function(e,t,n){var r,i,s,o,u,a;return r=t.distance(n),i=e.distance(n),s=e.distance(t),o=r+i+s,u=(r*e.x+i*t.x+s*n.x)/o,a=(r*e.y+i*t.y+s*n.y)/o,new jsts.geom.Coordinate(u,a)},jsts.geom.Triangle.centroid=function(e,t,n){var r,i;return r=(e.x+t.x+n.x)/3,i=(e.y+t.y+n.y)/3,new jsts.geom.Coordinate(r,i)},jsts.geom.Triangle.longestSideLength=function(e,t,n){var r,i,s,o;return r=e.distance(t),i=t.distance(n),s=n.distance(e),o=r,i>o&&(o=i),s>o&&(o=s),o},jsts.geom.Triangle.angleBisector=function(e,t,n){var r,i,s,o,u,a;return r=t.distance(e),i=t.distance(n),s=r/(r+i),o=n.x-e.x,u=n.y-e.y,a=new jsts.geom.Coordinate(e.x+s*o,e.y+s*u),a},jsts.geom.Triangle.area=function(e,t,n){return Math.abs(((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2)},jsts.geom.Triangle.signedArea=function(e,t,n){return((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2},jsts.geom.Triangle.prototype.inCentre=function(){return jsts.geom.Triangle.inCentre(this.p0,this.p1,this.p2)},jsts.geom.util.GeometryCombiner=function(e){this.geomFactory=jsts.geom.util.GeometryCombiner.extractFactory(e),this.inputGeoms=e},jsts.geom.util.GeometryCombiner.combine=function(e){if(arguments.length>1)return this.combine2.apply(this,arguments);var t=new jsts.geom.util.GeometryCombiner(e);return t.combine()},jsts.geom.util.GeometryCombiner.combine2=function(){var e=new javascript.util.ArrayList;Array.prototype.slice.call(arguments).forEach(function(t){e.add(t)});var t=new jsts.geom.util.GeometryCombiner(e);return t.combine()},jsts.geom.util.GeometryCombiner.prototype.geomFactory=null,jsts.geom.util.GeometryCombiner.prototype.skipEmpty=!1,jsts.geom.util.GeometryCombiner.prototype.inputGeoms,jsts.geom.util.GeometryCombiner.extractFactory=function(e){return e.isEmpty()?null:e.iterator().next().getFactory()},jsts.geom.util.GeometryCombiner.prototype.combine=function(){var e=new javascript.util.ArrayList,t;for(t=this.inputGeoms.iterator();t.hasNext();){var n=t.next();this.extractElements(n,e)}return e.size()===0?this.geomFactory!==null?geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(e)},jsts.geom.util.GeometryCombiner.prototype.extractElements=function(e,t){if(e===null)return;for(var n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n);if(this.skipEmpty&&r.isEmpty())continue;t.add(r)}},jsts.geom.util.GeometryExtracter=function(e,t){this.clz=e,this.comps=t},jsts.geom.util.GeometryExtracter.prototype=new jsts.geom.GeometryFilter,jsts.geom.util.GeometryExtracter.prototype.clz=null,jsts.geom.util.GeometryExtracter.prototype.comps=null,jsts.geom.util.GeometryExtracter.extract=function(e,t,n){return n=n||new javascript.util.ArrayList,e instanceof t?n.add(e):(e instanceof jsts.geom.GeometryCollection||e instanceof jsts.geom.MultiPoint||e instanceof jsts.geom.MultiLineString||e instanceof jsts.geom.MultiPolygon)&&e.apply(new jsts.geom.util.GeometryExtracter(t,n)),n},jsts.geom.util.GeometryExtracter.prototype.filter=function(e){(this.clz===null||e instanceof this.clz)&&this.comps.add(e)},function(){var e=javascript.util.ArrayList,t=function(){};t.prototype.inputGeom=null,t.prototype.factory=null,t.prototype.pruneEmptyGeometry=!0,t.prototype.preserveGeometryCollectionType=!0,t.prototype.preserveCollections=!1,t.prototype.reserveType=!1,t.prototype.getInputGeometry=function(){return this.inputGeom},t.prototype.transform=function(e){this.inputGeom=e,this.factory=e.getFactory();if(e instanceof jsts.geom.Point)return this.transformPoint(e,null);if(e instanceof jsts.geom.MultiPoint)return this.transformMultiPoint(e,null);if(e instanceof jsts.geom.LinearRing)return this.transformLinearRing(e,null);if(e instanceof jsts.geom.LineString)return this.transformLineString(e,null);if(e instanceof jsts.geom.MultiLineString)return this.transformMultiLineString(e,null);if(e instanceof jsts.geom.Polygon)return this.transformPolygon(e,null);if(e instanceof jsts.geom.MultiPolygon)return this.transformMultiPolygon(e,null);if(e instanceof jsts.geom.GeometryCollection)return this.transformGeometryCollection(e,null);throw new jsts.error.IllegalArgumentException("Unknown Geometry subtype: "+e.getClass().getName())},t.prototype.createCoordinateSequence=function(e){return this.factory.getCoordinateSequenceFactory().create(e)},t.prototype.copy=function(e){return e.clone()},t.prototype.transformCoordinates=function(e,t){return this.copy(e)},t.prototype.transformPoint=function(e,t){return this.factory.createPoint(this.transformCoordinates(e.getCoordinateSequence(),e))},t.prototype.transformMultiPoint=function(t,n){var r=new e;for(var i=0;i<t.getNumGeometries();i++){var s=this.transformPoint(t.getGeometryN(i),t);if(s==null)continue;if(s.isEmpty())continue;r.add(s)}return this.factory.buildGeometry(r)},t.prototype.transformLinearRing=function(e,t){var n=this.transformCoordinates(e.getCoordinateSequence(),e),r=n.length;return r>0&&r<4&&!this.preserveType?this.factory.createLineString(n):this.factory.createLinearRing(n)},t.prototype.transformLineString=function(e,t){return this.factory.createLineString(this.transformCoordinates(e.getCoordinateSequence(),e))},t.prototype.transformMultiLineString=function(t,n){var r=new e;for(var i=0;i<t.getNumGeometries();i++){var s=this.transformLineString(t.getGeometryN(i),t);if(s==null)continue;if(s.isEmpty())continue;r.add(s)}return this.factory.buildGeometry(r)},t.prototype.transformPolygon=function(t,n){var r=!0,i=this.transformLinearRing(t.getExteriorRing(),t);if(i==null||!(i instanceof jsts.geom.LinearRing)||i.isEmpty())r=!1;var s=new e;for(var o=0;o<t.getNumInteriorRing();o++){var u=this.transformLinearRing(t.getInteriorRingN(o),t);if(u==null||u.isEmpty())continue;u instanceof jsts.geom.LinearRing||(r=!1),s.add(u)}if(r)return this.factory.createPolygon(i,s.toArray());var a=new e;return i!=null&&a.add(i),a.addAll(s),this.factory.buildGeometry(a)},t.prototype.transformMultiPolygon=function(t,n){var r=new e;for(var i=0;i<t.getNumGeometries();i++){var s=this.transformPolygon(t.getGeometryN(i),t);if(s==null)continue;if(s.isEmpty())continue;r.add(s)}return this.factory.buildGeometry(r)},t.prototype.transformGeometryCollection=function(t,n){var r=new e;for(var i=0;i<t.getNumGeometries();i++){var s=this.transform(t.getGeometryN(i));if(s==null)continue;if(this.pruneEmptyGeometry&&s.isEmpty())continue;r.add(s)}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection(GeometryFactory.toGeometryArray(r)):this.factory.buildGeometry(r)},jsts.geom.util.GeometryTransformer=t}(),jsts.geom.util.LinearComponentExtracter=function(e,t){this.lines=e,this.isForcedToLineString=t},jsts.geom.util.LinearComponentExtracter.prototype=new jsts.geom.GeometryComponentFilter,jsts.geom.util.LinearComponentExtracter.prototype.lines=null,jsts.geom.util.LinearComponentExtracter.prototype.isForcedToLineString=!1,jsts.geom.util.LinearComponentExtracter.getLines=function(e,t){if(arguments.length==1)return jsts.geom.util.LinearComponentExtracter.getLines5.apply(this,arguments);if(arguments.length==2&&typeof t=="boolean")return jsts.geom.util.LinearComponentExtracter.getLines6.apply(this,arguments);if(arguments.length==2&&e instanceof jsts.geom.Geometry)return jsts.geom.util.LinearComponentExtracter.getLines3.apply(this,arguments);if(arguments.length==3&&e instanceof jsts.geom.Geometry)return jsts.geom.util.LinearComponentExtracter.getLines4.apply(this,arguments);if(arguments.length==3)return jsts.geom.util.LinearComponentExtracter.getLines2.apply(this,arguments);for(var n=0;n<e.length;n++){var r=e[n];jsts.geom.util.LinearComponentExtracter.getLines3(r,t)}return t},jsts.geom.util.LinearComponentExtracter.getLines2=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];jsts.geom.util.LinearComponentExtracter.getLines4(i,t,n)}return t},jsts.geom.util.LinearComponentExtracter.getLines3=function(e,t){return e instanceof LineString?t.add(e):e.apply(new jsts.geom.util.LinearComponentExtracter(t)),t},jsts.geom.util.LinearComponentExtracter.getLines4=function(e,t,n){return e.apply(new jsts.geom.util.LinearComponentExtracter(t,n)),t},jsts.geom.util.LinearComponentExtracter.getLines5=function(e){return jsts.geom.util.LinearComponentExtracter.getLines6(e,!1)},jsts.geom.util.LinearComponentExtracter.getLines6=function(e,t){var n=[];return e.apply(new jsts.geom.util.LinearComponentExtracter(n,t)),n},jsts.geom.util.LinearComponentExtracter.prototype.setForceToLineString=function(e){this.isForcedToLineString=e},jsts.geom.util.LinearComponentExtracter.prototype.filter=function(e){if(this.isForcedToLineString&&e instanceof jsts.geom.LinearRing){var t=e.getFactory().createLineString(e.getCoordinateSequence());this.lines.push(t);return}(e instanceof jsts.geom.LineString||e instanceof jsts.geom.LinearRing)&&this.lines.push(e)},jsts.geom.util.PointExtracter=function(e){this.pts=e},jsts.geom.util.PointExtracter.prototype=new jsts.geom.GeometryFilter,jsts.geom.util.PointExtracter.prototype.pts=null,jsts.geom.util.PointExtracter.getPoints=function(e,t){return t===undefined&&(t=[]),e instanceof jsts.geom.Point?t.push(e):(e instanceof jsts.geom.GeometryCollection||e instanceof jsts.geom.MultiPoint||e instanceof jsts.geom.MultiLineString||e instanceof jsts.geom.MultiPolygon)&&e.apply(new jsts.geom.util.PointExtracter(t)),t},jsts.geom.util.PointExtracter.prototype.filter=function(e){e instanceof jsts.geom.Point&&this.pts.push(e)},jsts.geom.util.PolygonExtracter=function(e){this.comps=e},jsts.geom.util.PolygonExtracter.prototype=new jsts.geom.GeometryFilter,jsts.geom.util.PolygonExtracter.prototype.comps=null,jsts.geom.util.PolygonExtracter.getPolygons=function(e,t){return t===undefined&&(t=[]),e instanceof jsts.geom.Polygon?t.push(e):e instanceof jsts.geom.GeometryCollection&&e.apply(new jsts.geom.util.PolygonExtracter(t)),t},jsts.geom.util.PolygonExtracter.prototype.filter=function(e){e instanceof jsts.geom.Polygon&&this.comps.push(e)},jsts.algorithm.BoundaryNodeRule=function(){},jsts.algorithm.BoundaryNodeRule.prototype.isInBoundary=function(e){throw new jsts.error.AbstractMethodInvocationError},jsts.algorithm.Mod2BoundaryNodeRule=function(){},jsts.algorithm.Mod2BoundaryNodeRule.prototype=new jsts.algorithm.BoundaryNodeRule,jsts.algorithm.Mod2BoundaryNodeRule.prototype.isInBoundary=function(e){return e%2===1},jsts.algorithm.BoundaryNodeRule.MOD2_BOUNDARY_RULE=new jsts.algorithm.Mod2BoundaryNodeRule,jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE=jsts.algorithm.BoundaryNodeRule.MOD2_BOUNDARY_RULE,jsts.algorithm.CentralEndpointIntersector=function(e,t,n,r){this.pts=[e,t,n,r],this.compute()},jsts.algorithm.CentralEndpointIntersector.getIntersection=function(e,t,n,r){var i=new jsts.algorithm.CentralEndpointIntersector(e,t,n,r);return i.getIntersection()},jsts.algorithm.CentralEndpointIntersector.prototype.pts=null,jsts.algorithm.CentralEndpointIntersector.prototype.intPt=null,jsts.algorithm.CentralEndpointIntersector.prototype.compute=function(){var e=jsts.algorithm.CentralEndpointIntersector.average(this.pts);this.intPt=this.findNearestPoint(e,this.pts)},jsts.algorithm.CentralEndpointIntersector.prototype.getIntersection=function(){return this.intPt},jsts.algorithm.CentralEndpointIntersector.average=function(e){var t=new jsts.geom.Coordinate,n,r=e.length;for(n=0;n<r;n++)t.x+=e[n].x,t.y+=e[n].y;return r>0&&(t.x/=r,t.y/=r),t},jsts.algorithm.CentralEndpointIntersector.prototype.findNearestPoint=function(e,t){var n=Number.MAX_VALUE,r,i=null,s;for(r=0;r<t.length;r++)s=e.distance(t[r]),s<n&&(n=s,i=t[r]);return i},jsts.algorithm.CentroidArea=function(){this.basePt=null,this.triangleCent3=new jsts.geom.Coordinate,this.centSum=new jsts.geom.Coordinate,this.cg3=new jsts.geom.Coordinate},jsts.algorithm.CentroidArea.prototype.basePt=null,jsts.algorithm.CentroidArea.prototype.triangleCent3=null,jsts.algorithm.CentroidArea.prototype.areasum2=0,jsts.algorithm.CentroidArea.prototype.cg3=null,jsts.algorithm.CentroidArea.prototype.centSum=null,jsts.algorithm.CentroidArea.prototype.totalLength=0,jsts.algorithm.CentroidArea.prototype.add=function(e){if(e instanceof jsts.geom.Polygon){var t=e;this.setBasePoint(t.getExteriorRing().getCoordinateN(0)),this.add3(t)}else if(e instanceof jsts.geom.GeometryCollection||e instanceof jsts.geom.MultiPolygon){var n=e;for(var r=0;r<n.getNumGeometries();r++)this.add(n.getGeometryN(r))}else e instanceof Array&&this.add2(e)},jsts.algorithm.CentroidArea.prototype.add2=function(e){this.setBasePoint(e[0]),this.addShell(e)},jsts.algorithm.CentroidArea.prototype.getCentroid=function(){var e=new jsts.geom.Coordinate;return Math.abs(this.areasum2)>0?(e.x=this.cg3.x/3/this.areasum2,e.y=this.cg3.y/3/this.areasum2):(e.x=this.centSum.x/this.totalLength,e.y=this.centSum.y/this.totalLength),e},jsts.algorithm.CentroidArea.prototype.setBasePoint=function(e){this.basePt==null&&(this.basePt=e)},jsts.algorithm.CentroidArea.prototype.add3=function(e){this.addShell(e.getExteriorRing().getCoordinates());for(var t=0;t<e.getNumInteriorRing();t++)this.addHole(e.getInteriorRingN(t).getCoordinates())},jsts.algorithm.CentroidArea.prototype.addShell=function(e){var t=!jsts.algorithm.CGAlgorithms.isCCW(e);for(var n=0;n<e.length-1;n++)this.addTriangle(this.basePt,e[n],e[n+1],t);this.addLinearSegments(e)},jsts.algorithm.CentroidArea.prototype.addHole=function(e){var t=jsts.algorithm.CGAlgorithms.isCCW(e);for(var n=0;n<e.length-1;n++)this.addTriangle(this.basePt,e[n],e[n+1],t);this.addLinearSegments(e)},jsts.algorithm.CentroidArea.prototype.addTriangle=function(e,t,n,r){var i=r?1:-1;jsts.algorithm.CentroidArea.centroid3(e,t,n,this.triangleCent3);var s=jsts.algorithm.CentroidArea.area2(e,t,n);this.cg3.x+=i*s*this.triangleCent3.x,this.cg3.y+=i*s*this.triangleCent3.y,this.areasum2+=i*s},jsts.algorithm.CentroidArea.centroid3=function(e,t,n,r){r.x=e.x+t.x+n.x,r.y=e.y+t.y+n.y;return},jsts.algorithm.CentroidArea.area2=function(e,t,n){return(t.x-e.x)*(n.y-e.y)-(n.x-e.x)*(t.y-e.y)},jsts.algorithm.CentroidArea.prototype.addLinearSegments=function(e){for(var t=0;t<e.length-1;t++){var n=e[t].distance(e[t+1]);this.totalLength+=n;var r=(e[t].x+e[t+1].x)/2;this.centSum.x+=n*r;var i=(e[t].y+e[t+1].y)/2;this.centSum.y+=n*i}},jsts.algorithm.CentroidLine=function(){this.centSum=new jsts.geom.Coordinate},jsts.algorithm.CentroidLine.prototype.centSum=null,jsts.algorithm.CentroidLine.prototype.totalLength=0,jsts.algorithm.CentroidLine.prototype.add=function(e){if(e instanceof Array){this.add2.apply(this,arguments);return}if(e instanceof jsts.geom.LineString)this.add(e.getCoordinates());else if(e instanceof jsts.geom.Polygon){var t=e;this.add(t.getExteriorRing().getCoordinates());for(var n=0;n<t.getNumInteriorRing();n++)this.add(t.getInteriorRingN(n).getCoordinates())}else if(e instanceof jsts.geom.GeometryCollection||e instanceof jsts.geom.MultiPoint||e instanceof jsts.geom.MultiLineString||e instanceof jsts.geom.MultiPolygon){var r=e;for(var n=0;n<r.getNumGeometries();n++)this.add(r.getGeometryN(n))}},jsts.algorithm.CentroidLine.prototype.getCentroid=function(){var e=new jsts.geom.Coordinate;return e.x=this.centSum.x/this.totalLength,e.y=this.centSum.y/this.totalLength,e},jsts.algorithm.CentroidLine.prototype.add2=function(e){for(var t=0;t<e.length-1;t++){var n=e[t].distance(e[t+1]);this.totalLength+=n;var r=(e[t].x+e[t+1].x)/2;this.centSum.x+=n*r;var i=(e[t].y+e[t+1].y)/2;this.centSum.y+=n*i}},jsts.algorithm.CentroidPoint=function(){this.centSum=new jsts.geom.Coordinate},jsts.algorithm.CentroidPoint.prototype.ptCount=0,jsts.algorithm.CentroidPoint.prototype.centSum=null,jsts.algorithm.CentroidPoint.prototype.add=function(e){if(e instanceof jsts.geom.Point)this.add2(e.getCoordinate());else if(e instanceof jsts.geom.GeometryCollection||e instanceof jsts.geom.MultiPoint||e instanceof jsts.geom.MultiLineString||e instanceof jsts.geom.MultiPolygon){var t=e;for(var n=0;n<t.getNumGeometries();n++)this.add(t.getGeometryN(n))}},jsts.algorithm.CentroidPoint.prototype.add2=function(e){this.ptCount+=1,this.centSum.x+=e.x,this.centSum.y+=e.y},jsts.algorithm.CentroidPoint.prototype.getCentroid=function(){var e=new jsts.geom.Coordinate;return e.x=this.centSum.x/this.ptCount,e.y=this.centSum.y/this.ptCount,e},jsts.algorithm.CGAlgorithms=function(){},jsts.algorithm.CGAlgorithms.CLOCKWISE=-1,jsts.algorithm.CGAlgorithms.RIGHT=jsts.algorithm.CGAlgorithms.CLOCKWISE,jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE=1,jsts.algorithm.CGAlgorithms.LEFT=jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE,jsts.algorithm.CGAlgorithms.COLLINEAR=0,jsts.algorithm.CGAlgorithms.STRAIGHT=jsts.algorithm.CGAlgorithms.COLLINEAR,jsts.algorithm.CGAlgorithms.orientationIndex=function(e,t,n){var r,i,s,o;return r=t.x-e.x,i=t.y-e.y,s=n.x-t.x,o=n.y-t.y,jsts.algorithm.RobustDeterminant.signOfDet2x2(r,i,s,o)},jsts.algorithm.CGAlgorithms.isPointInRing=function(e,t){return jsts.algorithm.CGAlgorithms.locatePointInRing(e,t)!==jsts.geom.Location.EXTERIOR},jsts.algorithm.CGAlgorithms.locatePointInRing=function(e,t){return jsts.algorithm.RayCrossingCounter.locatePointInRing(e,t)},jsts.algorithm.CGAlgorithms.isOnLine=function(e,t){var n,r,i,s,o;n=new jsts.algorithm.RobustLineIntersector;for(r=1,i=t.length;r<i;r++){s=t[r-1],o=t[r],n.computeIntersection(e,s,o);if(n.hasIntersection())return!0}return!1},jsts.algorithm.CGAlgorithms.isCCW=function(e){var t,n,r,i,s,o,u,a,f,l,c;t=e.length-1;if(t<3)throw new jsts.IllegalArgumentError("Ring has fewer than 3 points, so orientation cannot be determined");n=e[0],r=0,f=1;for(f;f<=t;f++)i=e[f],i.y>n.y&&(n=i,r=f);s=r;do s-=1,s<0&&(s=t);while(e[s].equals2D(n)&&s!==r);o=r;do o=(o+1)%t;while(e[o].equals2D(n)&&o!==r);return u=e[s],a=e[o],u.equals2D(n)||a.equals2D(n)||u.equals2D(a)?!1:(l=jsts.algorithm.CGAlgorithms.computeOrientation(u,n,a),c=!1,l===0?c=u.x>a.x:c=l>0,c)},jsts.algorithm.CGAlgorithms.computeOrientation=function(e,t,n){return jsts.algorithm.CGAlgorithms.orientationIndex(e,t,n)},jsts.algorithm.CGAlgorithms.distancePointLine=function(e,t,n){t instanceof jsts.geom.Coordinate||jsts.algorithm.CGAlgorithms.distancePointLine2.apply(this,arguments);if(t.x===n.x&&t.y===n.y)return e.distance(t);var r,i;return r=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y)),r<=0?e.distance(t):r>=1?e.distance(n):(i=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y)),Math.abs(i)*Math.sqrt((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y)))},jsts.algorithm.CGAlgorithms.distancePointLinePerpendicular=function(e,t,n){var r=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y));return Math.abs(r)*Math.sqrt((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y))},jsts.algorithm.CGAlgorithms.distancePointLine2=function(e,t){var n,r,i,s;if(t.length===0)throw new jsts.error.IllegalArgumentError("Line array must contain at least one vertex");n=e.distance(t[0]);for(r=0,i=t.length-1;r<i;r++)s=jsts.algorithm.CGAlgorithms.distancePointLine(e,t[r],t[r+1]),s<n&&(n=s);return n},jsts.algorithm.CGAlgorithms.distanceLineLine=function(e,t,n,r){if(e.equals(t))return jsts.algorithm.CGAlgorithms.distancePointLine(e,n,r);if(n.equals(r))return jsts.algorithm.CGAlgorithms.distancePointLine(r,e,t);var i,s,o,u,a,f;return i=(e.y-n.y)*(r.x-n.x)-(e.x-n.x)*(r.y-n.y),s=(t.x-e.x)*(r.y-n.y)-(t.y-e.y)*(r.x-n.x),o=(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y),u=(t.x-e.x)*(r.y-n.y)-(t.y-e.y)*(r.x-n.x),s===0||u===0?Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(e,n,r),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(t,n,r),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(n,e,t),jsts.algorithm.CGAlgorithms.distancePointLine(r,e,t)))):(a=o/u,f=i/s,f<0||f>1||a<0||a>1?Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(e,n,r),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(t,n,r),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(n,e,t),jsts.algorithm.CGAlgorithms.distancePointLine(r,e,t)))):0)},jsts.algorithm.CGAlgorithms.signedArea=function(e){if(e.length<3)return 0;var t,n,r,i,s,o,u;t=0;for(n=0,r=e.length-1;n<r;n++)i=e[n].x,s=e[n].y,o=e[n+1].x,u=e[n+1].y,t+=(i+o)*(u-s);return-t/2},jsts.algorithm.CGAlgorithms.signedArea=function(e){var t,n,r,i,s,o,u,a;t=e.length;if(t<3)return 0;n=0,r=e[0],i=r.x,s=r.y;for(o=1;o<t;o++)r=e[o],u=r.x,a=r.y,n+=(i+u)*(a-s),i=u,s=a;return-n/2},jsts.algorithm.CGAlgorithms.computeLength=function(e){var t=e.length,n,r,i,s,o,u,a,f,l,c;if(t<=1)return 0;n=0,f=e[0],r=f.x,i=f.y,l=1,c=t;for(l;l<t;l++)f=e[l],s=f.x,o=f.y,u=s-r,a=o-i,n+=Math.sqrt(u*u+a*a),r=s,i=o;return n},jsts.algorithm.CGAlgorithms.length=function(){},function(){var e=jsts.algorithm.CGAlgorithms,t=jsts.util.UniqueCoordinateArrayFilter,n=jsts.util.Assert,r=javascript.util.Stack,i=javascript.util.ArrayList,s=javascript.util.Arrays,o=function(e){this.origin=e};o.prototype.origin=null,o.prototype.compare=function(e,t){var n=e,r=t;return o.polarCompare(this.origin,n,r)},o.polarCompare=function(t,n,r){var i=n.x-t.x,s=n.y-t.y,o=r.x-t.x,u=r.y-t.y,a=e.computeOrientation(t,n,r);if(a==e.COUNTERCLOCKWISE)return 1;if(a==e.CLOCKWISE)return-1;var f=i*i+s*s,l=o*o+u*u;return f<l?-1:f>l?1:0},jsts.algorithm.ConvexHull=function(){if(arguments.length===1){var e=arguments[0];this.inputPts=jsts.algorithm.ConvexHull.extractCoordinates(e),this.geomFactory=e.getFactory()}else this.pts=arguments[0],this.geomFactory=arguments[1]},jsts.algorithm.ConvexHull.prototype.geomFactory=null,jsts.algorithm.ConvexHull.prototype.inputPts=null,jsts.algorithm.ConvexHull.extractCoordinates=function(e){var n=new t;return e.apply(n),n.getCoordinates()},jsts.algorithm.ConvexHull.prototype.getConvexHull=function(){if(this.inputPts.length==0)return this.geomFactory.createGeometryCollection(null);if(this.inputPts.length==1)return this.geomFactory.createPoint(this.inputPts[0]);if(this.inputPts.length==2)return this.geomFactory.createLineString(this.inputPts);var e=this.inputPts;this.inputPts.length>50&&(e=this.reduce(this.inputPts));var t=this.preSort(e),n=this.grahamScan(t),r=n.toArray();return this.lineOrPolygon(r)},jsts.algorithm.ConvexHull.prototype.reduce=function(t){var n=this.computeOctRing(t);if(n==null)return this.inputPts;var r=new javascript.util.TreeSet;for(var i=0;i<n.length;i++)r.add(n[i]);for(var i=0;i<t.length;i++)e.isPointInRing(t[i],n)||r.add(t[i]);var s=r.toArray();return s.length<3?this.padArray3(s):s},jsts.algorithm.ConvexHull.prototype.padArray3=function(e){var t=[];for(var n=0;n<t.length;n++)n<e.length?t[n]=e[n]:t[n]=e[0];return t},jsts.algorithm.ConvexHull.prototype.preSort=function(e){var t;for(var n=1;n<e.length;n++)if(e[n].y<e[0].y||e[n].y==e[0].y&&e[n].x<e[0].x)t=e[0],e[0]=e[n],e[n]=t;return s.sort(e,1,e.length,new o(e[0])),e},jsts.algorithm.ConvexHull.prototype.grahamScan=function(t){var n,i=new r;n=i.push(t[0]),n=i.push(t[1]),n=i.push(t[2]);for(var s=3;s<t.length;s++){n=i.pop();while(!i.empty()&&e.computeOrientation(i.peek(),n,t[s])>0)n=i.pop();n=i.push(n),n=i.push(t[s])}return n=i.push(t[0]),i},jsts.algorithm.ConvexHull.prototype.isBetween=function(t,n,r){if(e.computeOrientation(t,n,r)!==0)return!1;if(t.x!=r.x){if(t.x<=n.x&&n.x<=r.x)return!0;if(r.x<=n.x&&n.x<=t.x)return!0}if(t.y!=r.y){if(t.y<=n.y&&n.y<=r.y)return!0;if(r.y<=n.y&&n.y<=t.y)return!0}return!1},jsts.algorithm.ConvexHull.prototype.computeOctRing=function(e){var t=this.computeOctPts(e),n=new jsts.geom.CoordinateList;return n.add(t,!1),n.size()<3?null:(n.closeRing(),n.toCoordinateArray())},jsts.algorithm.ConvexHull.prototype.computeOctPts=function(e){var t=[];for(var n=0;n<8;n++)t[n]=e[0];for(var r=1;r<e.length;r++)e[r].x<t[0].x&&(t[0]=e[r]),e[r].x-e[r].y<t[1].x-t[1].y&&(t[1]=e[r]),e[r].y>t[2].y&&(t[2]=e[r]),e[r].x+e[r].y>t[3].x+t[3].y&&(t[3]=e[r]),e[r].x>t[4].x&&(t[4]=e[r]),e[r].x-e[r].y>t[5].x-t[5].y&&(t[5]=e[r]),e[r].y<t[6].y&&(t[6]=e[r]),e[r].x+e[r].y<t[7].x+t[7].y&&(t[7]=e[r]);return t},jsts.algorithm.ConvexHull.prototype.lineOrPolygon=function(e){e=this.cleanRing(e);if(e.length==3)return this.geomFactory.createLineString([e[0],e[1]]);var t=this.geomFactory.createLinearRing(e);return this.geomFactory.createPolygon(t,null)},jsts.algorithm.ConvexHull.prototype.cleanRing=function(e){n.equals(e[0],e[e.length-1]);var t=new i,r=null;for(var s=0;s<=e.length-2;s++){var o=e[s],u=e[s+1];if(o.equals(u))continue;if(r!=null&&this.isBetween(r,o,u))continue;t.add(o),r=o}t.add(e[e.length-1]);var a=[];return t.toArray(a)}}(),jsts.algorithm.HCoordinate=function(){this.x=0,this.y=0,this.w=1,arguments.length===1?this.initFrom1Coordinate(arguments[0]):arguments.length===2&&arguments[0]instanceof jsts.geom.Coordinate?this.initFrom2Coordinates(arguments[0],arguments[1]):arguments.length===2&&arguments[0]instanceof jsts.algorithm.HCoordinate?this.initFrom2HCoordinates(arguments[0],arguments[1]):arguments.length===2?this.initFromXY(arguments[0],arguments[1]):arguments.length===3?this.initFromXYW(arguments[0],arguments[1],arguments[2]):arguments.length===4&&this.initFromXYW(arguments[0],arguments[1],arguments[2],arguments[3])},jsts.algorithm.HCoordinate.intersection=function(e,t,n,r){var i,s,o,u,a,f,l,c,h,p,d;i=e.y-t.y,s=t.x-e.x,o=e.x*t.y-t.x*e.y,u=n.y-r.y,a=r.x-n.x,f=n.x*r.y-r.x*n.y,l=s*f-a*o,c=u*o-i*f,h=i*a-u*s,p=l/h,d=c/h;if(!isFinite(p)||!isFinite(d))throw new jsts.error.NotRepresentableError;return new jsts.geom.Coordinate(p,d)},jsts.algorithm.HCoordinate.prototype.initFrom1Coordinate=function(e){this.x=e.x,this.y=e.y,this.w=1},jsts.algorithm.HCoordinate.prototype.initFrom2Coordinates=function(e,t){this.x=e.y-t.y,this.y=t.x-e.x,this.w=e.x*t.y-t.x*e.y},jsts.algorithm.HCoordinate.prototype.initFrom2HCoordinates=function(e,t){this.x=e.y*t.w-t.y*e.w,this.y=t.x*e.w-e.x*t.w,this.w=e.x*t.y-t.x*e.y},jsts.algorithm.HCoordinate.prototype.initFromXYW=function(e,t,n){this.x=e,this.y=t,this.w=n},jsts.algorithm.HCoordinate.prototype.initFromXY=function(e,t){this.x=e,this.y=t,this.w=1},jsts.algorithm.HCoordinate.prototype.initFrom4Coordinates=function(e,t,n,r){var i,s,o,u,a,f;i=e.y-t.y,s=t.x-e.x,o=e.x*t.y-t.x*e.y,u=n.y-r.y,a=r.x-n.x,f=n.x*r.y-r.x*n.y,this.x=s*f-a*o,this.y=u*o-i*f,this.w=i*a-u*s},jsts.algorithm.HCoordinate.prototype.getX=function(){var e=this.x/this.w;if(!isFinite(e))throw new jsts.error.NotRepresentableError;return e},jsts.algorithm.HCoordinate.prototype.getY=function(){var e=this.y/this.w;if(!isFinite(e))throw new jsts.error.NotRepresentableError;return e},jsts.algorithm.HCoordinate.prototype.getCoordinate=function(){var e=new jsts.geom.Coordinate;return e.x=this.getX(),e.y=this.getY(),e},jsts.algorithm.LineIntersector=function(){this.inputLines=[[],[]],this.intPt=[null,null],this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=jsts.algorithm.LineIntersector.NO_INTERSECTION},jsts.algorithm.LineIntersector.NO_INTERSECTION=0,jsts.algorithm.LineIntersector.POINT_INTERSECTION=1,jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION=2,jsts.algorithm.LineIntersector.prototype.setPrecisionModel=function(e){this.precisionModel=e},jsts.algorithm.LineIntersector.prototype.getEndpoint=function(e,t){return this.inputLines[e][t]},jsts.algorithm.LineIntersector.computeEdgeDistance=function(e,t,n){var r=Math.abs(n.x-t.x),i=Math.abs(n.y-t.y),s=-1;if(e.equals(t))s=0;else if(e.equals(n))r>i?s=r:s=i;else{var o=Math.abs(e.x-t.x),u=Math.abs(e.y-t.y);r>i?s=o:s=u,s===0&&!e.equals(t)&&(s=Math.max(o,u))}if(s===0&&!e.equals(t))throw new jsts.error.IllegalArgumentError("Bad distance calculation");return s},jsts.algorithm.LineIntersector.nonRobustComputeEdgeDistance=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,s=Math.sqrt(r*r+i*i);if(s===0&&!e.equals(t))return s;throw new jsts.error.IllegalArgumentError("Invalid distance calculation")},jsts.algorithm.LineIntersector.prototype.result=null,jsts.algorithm.LineIntersector.prototype.inputLines=null,jsts.algorithm.LineIntersector.prototype.intPt=null,jsts.algorithm.LineIntersector.prototype.intLineIndex=null,jsts.algorithm.LineIntersector.prototype._isProper=null,jsts.algorithm.LineIntersector.prototype.pa=null,jsts.algorithm.LineIntersector.prototype.pb=null,jsts.algorithm.LineIntersector.prototype.precisionModel=null,jsts.algorithm.LineIntersector.prototype.computeIntersection=function(e,t,n){throw new jsts.error.AbstractMethodInvocationError},jsts.algorithm.LineIntersector.prototype.isCollinear=function(){return this.result===jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION},jsts.algorithm.LineIntersector.prototype.computeIntersection=function(e,t,n,r){this.inputLines[0][0]=e,this.inputLines[0][1]=t,this.inputLines[1][0]=n,this.inputLines[1][1]=r,this.result=this.computeIntersect(e,t,n,r)},jsts.algorithm.LineIntersector.prototype.computeIntersect=function(e,t,n,r){throw new jsts.error.AbstractMethodInvocationError},jsts.algorithm.LineIntersector.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},jsts.algorithm.LineIntersector.prototype.hasIntersection=function(){return this.result!==jsts.algorithm.LineIntersector.NO_INTERSECTION},jsts.algorithm.LineIntersector.prototype.getIntersectionNum=function(){return this.result},jsts.algorithm.LineIntersector.prototype.getIntersection=function(e){return this.intPt[e]},jsts.algorithm.LineIntersector.prototype.computeIntLineIndex=function(){this.intLineIndex===null&&(this.intLineIndex=[[],[]],this.computeIntLineIndex(0),this.computeIntLineIndex(1))},jsts.algorithm.LineIntersector.prototype.isIntersection=function(e){var t;for(t=0;t<this.result;t++)if(this.intPt[t].equals2D(e))return!0;return!1},jsts.algorithm.LineIntersector.prototype.isInteriorIntersection=function(){return arguments.length===1?this.isInteriorIntersection2.apply(this,arguments):this.isInteriorIntersection(0)?!0:this.isInteriorIntersection(1)?!0:!1},jsts.algorithm.LineIntersector.prototype.isInteriorIntersection2=function(e){var t;for(t=0;t<this.result;t++)if(!this.intPt[t].equals2D(this.inputLines[e][0])&&!this.intPt[t].equals2D(this.inputLines[e][1]))return!0;return!1},jsts.algorithm.LineIntersector.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},jsts.algorithm.LineIntersector.prototype.getIntersectionAlongSegment=function(e,t){return this.computeIntLineIndex(),this.intPt[intLineIndex[e][t]]},jsts.algorithm.LineIntersector.prototype.getIndexAlongSegment=function(e,t){return this.computeIntLineIndex(),this.intLineIndex[e][t]},jsts.algorithm.LineIntersector.prototype.computeIntLineIndex=function(e){var t=this.getEdgeDistance(e,0),n=this.getEdgeDistance(e,1);t>n?(this.intLineIndex[e][0]=0,this.intLineIndex[e][1]=1):(this.intLineIndex[e][0]=1,this.intLineIndex[e][1]=0)},jsts.algorithm.LineIntersector.prototype.getEdgeDistance=function(e,t){var n=jsts.algorithm.LineIntersector.computeEdgeDistance(this.intPt[t],this.inputLines[e][0],this.inputLines[e][1]);return n},jsts.algorithm.PointLocator=function(e){this.boundaryRule=e?e:jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE},jsts.algorithm.PointLocator.prototype.boundaryRule=null,jsts.algorithm.PointLocator.prototype.isIn=null,jsts.algorithm.PointLocator.prototype.numBoundaries=null,jsts.algorithm.PointLocator.prototype.intersects=function(e,t){return this.locate(e,t)!==jsts.geom.Location.EXTERIOR},jsts.algorithm.PointLocator.prototype.locate=function(e,t){return t.isEmpty()?jsts.geom.Location.EXTERIOR:t instanceof jsts.geom.Point?this.locate2(e,t):t instanceof jsts.geom.LineString?this.locate3(e,t):t instanceof jsts.geom.Polygon?this.locate4(e,t):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(e,t),this.boundaryRule.isInBoundary(this.numBoundaries)?jsts.geom.Location.BOUNDARY:this.numBoundaries>0||this.isIn?jsts.geom.Location.INTERIOR:jsts.geom.Location.EXTERIOR)},jsts.algorithm.PointLocator.prototype.computeLocation=function(e,t){if(t instanceof jsts.geom.Point||t instanceof jsts.geom.LineString||t instanceof jsts.geom.Polygon)this.updateLocationInfo(this.locate(e,t));else if(t instanceof jsts.geom.MultiLineString){var n=t;for(var r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locate(e,i))}}else if(t instanceof jsts.geom.MultiPolygon){var s=t;for(var r=0;r<s.getNumGeometries();r++){var o=s.getGeometryN(r);this.updateLocationInfo(this.locate(e,o))}}else if(t instanceof jsts.geom.MultiPoint||t instanceof jsts.geom.GeometryCollection)for(var r=0;r<t.getNumGeometries();r++){var u=t.getGeometryN(r);u!==t&&this.computeLocation(e,u)}},jsts.algorithm.PointLocator.prototype.updateLocationInfo=function(e){e===jsts.geom.Location.INTERIOR&&(this.isIn=!0),e===jsts.geom.Location.BOUNDARY&&this.numBoundaries++},jsts.algorithm.PointLocator.prototype.locate2=function(e,t){var n=t.getCoordinate();return n.equals2D(e)?jsts.geom.Location.INTERIOR:jsts.geom.Location.EXTERIOR},jsts.algorithm.PointLocator.prototype.locate3=function(e,t){if(!t.getEnvelopeInternal().intersects(e))return jsts.geom.Location.EXTERIOR;var n=t.getCoordinates();if(!t.isClosed())if(e.equals(n[0])||e
.equals(n[n.length-1]))return jsts.geom.Location.BOUNDARY;return jsts.algorithm.CGAlgorithms.isOnLine(e,n)?jsts.geom.Location.INTERIOR:jsts.geom.Location.EXTERIOR},jsts.algorithm.PointLocator.prototype.locateInPolygonRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?jsts.algorithm.CGAlgorithms.locatePointInRing(e,t.getCoordinates()):jsts.geom.Location.EXTERIOR},jsts.algorithm.PointLocator.prototype.locate4=function(e,t){if(t.isEmpty())return jsts.geom.Location.EXTERIOR;var n=t.getExteriorRing(),r=this.locateInPolygonRing(e,n);if(r===jsts.geom.Location.EXTERIOR)return jsts.geom.Location.EXTERIOR;if(r===jsts.geom.Location.BOUNDARY)return jsts.geom.Location.BOUNDARY;for(var i=0;i<t.getNumInteriorRing();i++){var s=t.getInteriorRingN(i),o=this.locateInPolygonRing(e,s);if(o===jsts.geom.Location.INTERIOR)return jsts.geom.Location.EXTERIOR;if(o===jsts.geom.Location.BOUNDARY)return jsts.geom.Location.BOUNDARY}return jsts.geom.Location.INTERIOR},jsts.algorithm.RayCrossingCounter=function(e){this.p=e},jsts.algorithm.RayCrossingCounter.locatePointInRing=function(e,t){var n=new jsts.algorithm.RayCrossingCounter(e);for(var r=1;r<t.length;r++){var i=t[r],s=t[r-1];n.countSegment(i,s);if(n.isOnSegment())return n.getLocation()}return n.getLocation()},jsts.algorithm.RayCrossingCounter.prototype.p=null,jsts.algorithm.RayCrossingCounter.prototype.crossingCount=0,jsts.algorithm.RayCrossingCounter.prototype.isPointOnSegment=!1,jsts.algorithm.RayCrossingCounter.prototype.countSegment=function(e,t){if(e.x<this.p.x&&t.x<this.p.x)return;if(this.p.x==t.x&&this.p.y===t.y){this.isPointOnSegment=!0;return}if(e.y===this.p.y&&t.y===this.p.y){var n=e.x,r=t.x;n>r&&(n=t.x,r=e.x),this.p.x>=n&&this.p.x<=r&&(this.isPointOnSegment=!0);return}if(e.y>this.p.y&&t.y<=this.p.y||t.y>this.p.y&&e.y<=this.p.y){var i=e.x-this.p.x,s=e.y-this.p.y,o=t.x-this.p.x,u=t.y-this.p.y,a=jsts.algorithm.RobustDeterminant.signOfDet2x2(i,s,o,u);if(a===0){this.isPointOnSegment=!0;return}u<s&&(a=-a),a>0&&this.crossingCount++}},jsts.algorithm.RayCrossingCounter.prototype.isOnSegment=function(){return jsts.geom.isPointOnSegment},jsts.algorithm.RayCrossingCounter.prototype.getLocation=function(){return this.isPointOnSegment?jsts.geom.Location.BOUNDARY:this.crossingCount%2===1?jsts.geom.Location.INTERIOR:jsts.geom.Location.EXTERIOR},jsts.algorithm.RayCrossingCounter.prototype.isPointInPolygon=function(){return this.getLocation()!==jsts.geom.Location.EXTERIOR},jsts.algorithm.RobustDeterminant=function(){},jsts.algorithm.RobustDeterminant.signOfDet2x2=function(e,t,n,r){var i,s,o,u;u=0,i=1;if(e===0||r===0)return t===0||n===0?0:t>0?n>0?-i:i:n>0?i:-i;if(t===0||n===0)return r>0?e>0?i:-i:e>0?-i:i;0<t?0<r?t>r&&(i=-i,s=e,e=n,n=s,s=t,t=r,r=s):t<=-r?(i=-i,n=-n,r=-r):(s=e,e=-n,n=s,s=t,t=-r,r=s):0<r?-t<=r?(i=-i,e=-e,t=-t):(s=-e,e=n,n=s,s=-t,t=r,r=s):t>=r?(e=-e,t=-t,n=-n,r=-r):(i=-i,s=-e,e=-n,n=s,s=-t,t=-r,r=s);if(0<e){if(!(0<n))return i;if(e>n)return i}else{if(0<n)return-i;if(!(e>=n))return-i;i=-i,e=-e,n=-n}for(;;){u+=1,o=Math.floor(n/e),n-=o*e,r-=o*t;if(r<0)return-i;if(r>t)return i;if(e>n+n){if(t<r+r)return i}else{if(t>r+r)return-i;n=e-n,r=t-r,i=-i}if(r===0)return n===0?0:-i;if(n===0)return i;o=Math.floor(e/n),e-=o*n,t-=o*r;if(t<0)return i;if(t>r)return-i;if(n>e+e){if(r<t+t)return-i}else{if(r>t+t)return i;e=n-e,t=r-t,i=-i}if(t===0)return e===0?0:i;if(e===0)return-i}},jsts.algorithm.RobustDeterminant.orientationIndex=function(e,t,n){var r=t.x-e.x,i=t.y-e.y,s=n.x-t.x,o=n.y-t.y;return jsts.algorithm.RobustDeterminant.signOfDet2x2(r,i,s,o)},jsts.algorithm.RobustLineIntersector=function(){jsts.algorithm.RobustLineIntersector.prototype.constructor.call(this)},jsts.algorithm.RobustLineIntersector.prototype=new jsts.algorithm.LineIntersector,jsts.algorithm.RobustLineIntersector.prototype.computeIntersection=function(e,t,n){if(arguments.length===4){jsts.algorithm.LineIntersector.prototype.computeIntersection.apply(this,arguments);return}this._isProper=!1;if(jsts.geom.Envelope.intersects(t,n,e)&&jsts.algorithm.CGAlgorithms.orientationIndex(t,n,e)===0&&jsts.algorithm.CGAlgorithms.orientationIndex(n,t,e)===0){this._isProper=!0;if(e.equals(t)||e.equals(n))this._isProper=!1;this.result=jsts.algorithm.LineIntersector.POINT_INTERSECTION;return}this.result=jsts.algorithm.LineIntersector.NO_INTERSECTION},jsts.algorithm.RobustLineIntersector.prototype.computeIntersect=function(e,t,n,r){this._isProper=!1;if(!jsts.geom.Envelope.intersects(e,t,n,r))return jsts.algorithm.LineIntersector.NO_INTERSECTION;var i=jsts.algorithm.CGAlgorithms.orientationIndex(e,t,n),s=jsts.algorithm.CGAlgorithms.orientationIndex(e,t,r);if(i>0&&s>0||i<0&&s<0)return jsts.algorithm.LineIntersector.NO_INTERSECTION;var o=jsts.algorithm.CGAlgorithms.orientationIndex(n,r,e),u=jsts.algorithm.CGAlgorithms.orientationIndex(n,r,t);if(o>0&&u>0||o<0&&u<0)return jsts.algorithm.LineIntersector.NO_INTERSECTION;var a=i===0&&s===0&&o===0&&u===0;return a?this.computeCollinearIntersection(e,t,n,r):(i===0||s===0||o===0||u===0?(this._isProper=!1,e.equals2D(n)||e.equals2D(r)?this.intPt[0]=e:t.equals2D(n)||t.equals2D(r)?this.intPt[0]=t:i===0?this.intPt[0]=new jsts.geom.Coordinate(n):s===0?this.intPt[0]=new jsts.geom.Coordinate(r):o===0?this.intPt[0]=new jsts.geom.Coordinate(e):u===0&&(this.intPt[0]=new jsts.geom.Coordinate(t))):(this._isProper=!0,this.intPt[0]=this.intersection(e,t,n,r)),jsts.algorithm.LineIntersector.POINT_INTERSECTION)},jsts.algorithm.RobustLineIntersector.prototype.computeCollinearIntersection=function(e,t,n,r){var i=jsts.geom.Envelope.intersects(e,t,n),s=jsts.geom.Envelope.intersects(e,t,r),o=jsts.geom.Envelope.intersects(n,r,e),u=jsts.geom.Envelope.intersects(n,r,t);return i&&s?(this.intPt[0]=n,this.intPt[1]=r,jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION):o&&u?(this.intPt[0]=e,this.intPt[1]=t,jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION):i&&o?(this.intPt[0]=n,this.intPt[1]=e,n.equals(e)&&!s&&!u?jsts.algorithm.LineIntersector.POINT_INTERSECTION:jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION):i&&u?(this.intPt[0]=n,this.intPt[1]=t,n.equals(t)&&!s&&!o?jsts.algorithm.LineIntersector.POINT_INTERSECTION:jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION):s&&o?(this.intPt[0]=r,this.intPt[1]=e,r.equals(e)&&!i&&!u?jsts.algorithm.LineIntersector.POINT_INTERSECTION:jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION):s&&u?(this.intPt[0]=r,this.intPt[1]=t,r.equals(t)&&!i&&!o?jsts.algorithm.LineIntersector.POINT_INTERSECTION:jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION):jsts.algorithm.LineIntersector.NO_INTERSECTION},jsts.algorithm.RobustLineIntersector.prototype.intersection=function(e,t,n,r){var i=this.intersectionWithNormalization(e,t,n,r);return this.isInSegmentEnvelopes(i)||(i=jsts.algorithm.CentralEndpointIntersector.getIntersection(e,t,n,r)),this.precisionModel!==null&&this.precisionModel.makePrecise(i),i},jsts.algorithm.RobustLineIntersector.prototype.intersectionWithNormalization=function(e,t,n,r){var i=new jsts.geom.Coordinate(e),s=new jsts.geom.Coordinate(t),o=new jsts.geom.Coordinate(n),u=new jsts.geom.Coordinate(r),a=new jsts.geom.Coordinate;this.normalizeToEnvCentre(i,s,o,u,a);var f=this.safeHCoordinateIntersection(i,s,o,u);return f.x+=a.x,f.y+=a.y,f},jsts.algorithm.RobustLineIntersector.prototype.safeHCoordinateIntersection=function(e,t,n,r){var i=null;try{i=jsts.algorithm.HCoordinate.intersection(e,t,n,r)}catch(s){if(!(s instanceof jsts.error.NotRepresentableError))throw s;i=jsts.algorithm.CentralEndpointIntersector.getIntersection(e,t,n,r)}return i},jsts.algorithm.RobustLineIntersector.prototype.normalizeToMinimum=function(e,t,n,r,i){i.x=this.smallestInAbsValue(e.x,t.x,n.x,r.x),i.y=this.smallestInAbsValue(e.y,t.y,n.y,r.y),e.x-=i.x,e.y-=i.y,t.x-=i.x,t.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},jsts.algorithm.RobustLineIntersector.prototype.normalizeToEnvCentre=function(e,t,n,r,i){var s=e.x<t.x?e.x:t.x,o=e.y<t.y?e.y:t.y,u=e.x>t.x?e.x:t.x,a=e.y>t.y?e.y:t.y,f=n.x<r.x?n.x:r.x,l=n.y<r.y?n.y:r.y,c=n.x>r.x?n.x:r.x,h=n.y>r.y?n.y:r.y,p=s>f?s:f,d=u<c?u:c,v=o>l?o:l,m=a<h?a:h,g=(p+d)/2,y=(v+m)/2;i.x=g,i.y=y,e.x-=i.x,e.y-=i.y,t.x-=i.x,t.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},jsts.algorithm.RobustLineIntersector.prototype.smallestInAbsValue=function(e,t,n,r){var i=e,s=Math.abs(i);return Math.abs(t)<s&&(i=t,s=Math.abs(t)),Math.abs(n)<s&&(i=n,s=Math.abs(n)),Math.abs(r)<s&&(i=r),i},jsts.algorithm.RobustLineIntersector.prototype.isInSegmentEnvelopes=function(e){var t=new jsts.geom.Envelope(this.inputLines[0][0],this.inputLines[0][1]),n=new jsts.geom.Envelope(this.inputLines[1][0],this.inputLines[1][1]);return t.contains(e)&&n.contains(e)},jsts.algorithm.locate.SimplePointInAreaLocator=function(e){this.geom=e},jsts.algorithm.locate.SimplePointInAreaLocator.locate=function(e,t){return t.isEmpty()?jsts.geom.Location.EXTERIOR:jsts.algorithm.locate.SimplePointInAreaLocator.containsPoint(e,t)?jsts.geom.Location.INTERIOR:jsts.geom.Location.EXTERIOR},jsts.algorithm.locate.SimplePointInAreaLocator.containsPoint=function(e,t){if(t instanceof jsts.geom.Polygon)return jsts.algorithm.locate.SimplePointInAreaLocator.containsPointInPolygon(e,t);if(t instanceof jsts.geom.GeometryCollection||t instanceof jsts.geom.MultiPoint||t instanceof jsts.geom.MultiLineString||t instanceof jsts.geom.MultiPolygon)for(var n=0;n<t.geometries.length;n++){var r=t.geometries[n];if(r!==t&&jsts.algorithm.locate.SimplePointInAreaLocator.containsPoint(e,r))return!0}return!1},jsts.algorithm.locate.SimplePointInAreaLocator.containsPointInPolygon=function(e,t){if(t.isEmpty())return!1;var n=t.getExteriorRing();if(!jsts.algorithm.locate.SimplePointInAreaLocator.isPointInRing(e,n))return!1;for(var r=0;r<t.getNumInteriorRing();r++){var i=t.getInteriorRingN(r);if(jsts.algorithm.locate.SimplePointInAreaLocator.isPointInRing(e,i))return!1}return!0},jsts.algorithm.locate.SimplePointInAreaLocator.isPointInRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?jsts.algorithm.CGAlgorithms.isPointInRing(e,t.getCoordinates()):!1},jsts.algorithm.locate.SimplePointInAreaLocator.prototype.geom=null,jsts.algorithm.locate.SimplePointInAreaLocator.prototype.locate=function(e){return jsts.algorithm.locate.SimplePointInAreaLocator.locate(e,geom)},function(){var e=function(){};e.setVisited=function(e,t){while(e.hasNext()){var n=e.next();n.setVisited(t)}},e.setMarked=function(e,t){while(e.hasNext()){var n=e.next();n.setMarked(t)}},e.getComponentWithVisitedState=function(e,t){while(e.hasNext()){var n=e.next();if(n.isVisited()==t)return n}return null},e.prototype._isMarked=!1,e.prototype._isVisited=!1,e.prototype.data,e.prototype.isVisited=function(){return this._isVisited},e.prototype.setVisited=function(e){this._isVisited=e},e.prototype.isMarked=function(){return this._isMarked},e.prototype.setMarked=function(e){this._isMarked=e},e.prototype.setContext=function(e){this.data=e},e.prototype.getContext=function(){return data},e.prototype.setData=function(e){this.data=e},e.prototype.getData=function(){return data},e.prototype.isRemoved=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.planargraph.GraphComponent=e}(),function(){var e=jsts.planargraph.GraphComponent,t=function(e,t){if(e===undefined)return;this.setDirectedEdges(e,t)};t.prototype=new e,t.prototype.dirEdge=null,t.prototype.setDirectedEdges=function(e,t){this.dirEdge=[e,t],e.setEdge(this),t.setEdge(this),e.setSym(t),t.setSym(e),e.getFromNode().addOutEdge(e),t.getFromNode().addOutEdge(t)},t.prototype.getDirEdge=function(e){return e instanceof jsts.planargraph.Node&&this.getDirEdge2(e),this.dirEdge[e]},t.prototype.getDirEdge2=function(e){return this.dirEdge[0].getFromNode()==e?this.dirEdge[0]:this.dirEdge[1].getFromNode()==e?this.dirEdge[1]:null},t.prototype.getOppositeNode=function(e){return this.dirEdge[0].getFromNode()==e?this.dirEdge[0].getToNode():this.dirEdge[1].getFromNode()==e?this.dirEdge[1].getToNode():null},t.prototype.remove=function(){this.dirEdge=null},t.prototype.isRemoved=function(){return dirEdge==null},jsts.planargraph.Edge=t}(),function(){var e=javascript.util.ArrayList,t=jsts.planargraph.GraphComponent,n=function(e,t,n,r){if(e===undefined)return;this.from=e,this.to=t,this.edgeDirection=r,this.p0=e.getCoordinate(),this.p1=n;var i=this.p1.x-this.p0.x,s=this.p1.y-this.p0.y;this.quadrant=jsts.geomgraph.Quadrant.quadrant(i,s),this.angle=Math.atan2(s,i)};n.prototype=new t,n.toEdges=function(t){var n=new e;for(var r=t.iterator();r.hasNext();)n.add(r.next().parentEdge);return n},n.prototype.parentEdge=null,n.prototype.from=null,n.prototype.to=null,n.prototype.p0=null,n.prototype.p1=null,n.prototype.sym=null,n.prototype.edgeDirection=null,n.prototype.quadrant=null,n.prototype.angle=null,n.prototype.getEdge=function(){return this.parentEdge},n.prototype.setEdge=function(e){this.parentEdge=e},n.prototype.getQuadrant=function(){return this.quadrant},n.prototype.getDirectionPt=function(){return this.p1},n.prototype.getEdgeDirection=function(){return this.edgeDirection},n.prototype.getFromNode=function(){return this.from},n.prototype.getToNode=function(){return this.to},n.prototype.getCoordinate=function(){return this.from.getCoordinate()},n.prototype.getAngle=function(){return this.angle},n.prototype.getSym=function(){return this.sym},n.prototype.setSym=function(e){this.sym=e},n.prototype.remove=function(){this.sym=null,this.parentEdge=null},n.prototype.isRemoved=function(){return this.parentEdge==null},n.prototype.compareTo=function(e){var t=e;return this.compareDirection(t)},n.prototype.compareDirection=function(e){return this.quadrant>e.quadrant?1:this.quadrant<e.quadrant?-1:jsts.algorithm.CGAlgorithms.computeOrientation(e.p0,e.p1,this.p1)},jsts.planargraph.DirectedEdge=n}(),function(){var e=javascript.util.ArrayList,t=function(){this.outEdges=new e};t.prototype.outEdges=null,t.prototype.sorted=!1,t.prototype.add=function(e){this.outEdges.add(e),this.sorted=!1},t.prototype.remove=function(e){this.outEdges.remove(e)},t.prototype.iterator=function(){return this.sortEdges(),this.outEdges.iterator()},t.prototype.getDegree=function(){return this.outEdges.size()},t.prototype.getCoordinate=function(){var e=iterator();if(!e.hasNext())return null;var t=e.next();return t.getCoordinate()},t.prototype.getEdges=function(){return this.sortEdges(),this.outEdges},t.prototype.sortEdges=function(){if(!this.sorted){var e=this.outEdges.toArray();e.sort(function(e,t){return e.compareTo(t)}),this.outEdges=javascript.util.Arrays.asList(e),this.sorted=!0}},t.prototype.getIndex=function(e){if(e instanceof jsts.planargraph.DirectedEdge)return this.getIndex2(e);if(typeof e=="number")return this.getIndex3(e);this.sortEdges();for(var t=0;t<this.outEdges.size();t++){var n=this.outEdges.get(t);if(n.getEdge()==e)return t}return-1},t.prototype.getIndex2=function(e){this.sortEdges();for(var t=0;t<this.outEdges.size();t++){var n=this.outEdges.get(t);if(n==e)return t}return-1},t.prototype.getIndex3=function(e){var t=toInt(e%this.outEdges.size());return t<0&&(t+=this.outEdges.size()),t},t.prototype.getNextEdge=function(e){var t=this.getIndex(e);return this.outEdges.get(getIndex(t+1))},t.prototype.getNextCWEdge=function(e){var t=this.getIndex(e);return this.outEdges.get(getIndex(t-1))},jsts.planargraph.DirectedEdgeStar=t}(),function(){var e=jsts.planargraph.GraphComponent,t=jsts.planargraph.DirectedEdgeStar,n=function(e,n){this.pt=e,this.deStar=n||new t};n.prototype=new e,n.getEdgesBetween=function(e,t){var n=DirectedEdge.toEdges(e.getOutEdges().getEdges()),r=new javascript.util.HashSet(n),i=DirectedEdge.toEdges(t.getOutEdges().getEdges());return r.retainAll(i),r},n.prototype.pt=null,n.prototype.deStar=null,n.prototype.getCoordinate=function(){return this.pt},n.prototype.addOutEdge=function(e){this.deStar.add(e)},n.prototype.getOutEdges=function(){return this.deStar},n.prototype.getDegree=function(){return this.deStar.getDegree()},n.prototype.getIndex=function(e){return this.deStar.getIndex(e)},n.prototype.remove=function(e){if(e===undefined)return this.remove2();this.deStar.remove(e)},n.prototype.remove2=function(){this.pt=null},n.prototype.isRemoved=function(){return this.pt==null},jsts.planargraph.Node=n}(),function(){var e=function(){this.nodeMap=new javascript.util.TreeMap};e.prototype.nodeMap=null,e.prototype.add=function(e){return this.nodeMap.put(e.getCoordinate(),e),e},e.prototype.remove=function(e){return this.nodeMap.remove(e)},e.prototype.find=function(e){return this.nodeMap.get(e)},e.prototype.iterator=function(){return this.nodeMap.values().iterator()},e.prototype.values=function(){return this.nodeMap.values()},jsts.planargraph.NodeMap=e}(),function(){var e=javascript.util.ArrayList,t=function(){this.edges=new javascript.util.HashSet,this.dirEdges=new javascript.util.HashSet,this.nodeMap=new jsts.planargraph.NodeMap};t.prototype.edges=null,t.prototype.dirEdges=null,t.prototype.nodeMap=null,t.prototype.findNode=function(e){return this.nodeMap.find(e)},t.prototype.add=function(e){if(e instanceof jsts.planargraph.Edge)return this.add2(e);if(e instanceof jsts.planargraph.DirectedEdge)return this.add3(e);this.nodeMap.add(e)},t.prototype.add2=function(e){this.edges.add(e),this.add(e.getDirEdge(0)),this.add(e.getDirEdge(1))},t.prototype.add3=function(e){this.dirEdges.add(e)},t.prototype.nodeIterator=function(){return this.nodeMap.iterator()},t.prototype.contains=function(e){return e instanceof jsts.planargraph.DirectedEdge?this.contains2(e):this.edges.contains(e)},t.prototype.contains2=function(e){return this.dirEdges.contains(e)},t.prototype.getNodes=function(){return this.nodeMap.values()},t.prototype.dirEdgeIterator=function(){return this.dirEdges.iterator()},t.prototype.edgeIterator=function(){return this.edges.iterator()},t.prototype.getEdges=function(){return this.edges},t.prototype.remove=function(e){if(e instanceof jsts.planargraph.DirectedEdge)return this.remove2(e);this.remove(e.getDirEdge(0)),this.remove(e.getDirEdge(1)),this.edges.remove(e),this.edge.remove()},t.prototype.remove2=function(e){if(e instanceof jsts.planargraph.Node)return this.remove3(e);var t=e.getSym();t!=null&&t.setSym(null),e.getFromNode().remove(e),e.remove(),this.dirEdges.remove(e)},t.prototype.remove3=function(e){var t=e.getOutEdges().getEdges();for(var n=t.iterator();n.hasNext();){var r=n.next(),i=r.getSym();i!=null&&this.remove(i),this.dirEdges.remove(r);var s=r.getEdge();s!=null&&this.edges.remove(s)}this.nodeMap.remove(e.getCoordinate()),e.remove()},t.prototype.findNodesOfDegree=function(t){var n=new e;for(var r=this.nodeIterator();r.hasNext();){var i=r.next();i.getDegree()==t&&n.add(i)}return n},jsts.planargraph.PlanarGraph=t}(),jsts.index.ArrayListVisitor=function(){this.items=[]},jsts.index.ArrayListVisitor.prototype.visitItem=function(e){this.items.push(e)},jsts.index.ArrayListVisitor.prototype.getItems=function(){return this.items},jsts.index.DoubleBits=function(){},jsts.index.DoubleBits.powerOf2=function(e){return Math.pow(2,e)},jsts.index.DoubleBits.exponent=function(e){return jsts.index.DoubleBits.CVTFWD(64,e)-1023},jsts.index.DoubleBits.CVTFWD=function(e,t){var n,r,i,s,o="",u={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}},a={32:8,64:11}[e],f=e-a-1;s||(n=t<0||1/t<0,isFinite(t)||(s=u[e],n&&(s.d+=1<<e/4-1),r=Math.pow(2,a)-1,i=0));if(!s){r={32:127,64:1023}[e],i=Math.abs(t);while(i>=2)r++,i/=2;while(i<1&&r>0)r--,i*=2;r<=0&&(i/=2,o="Zero or Denormal"),e===32&&r>254&&(o="Too big for Single",s={d:n?255:127,c:128,b:0,a:0},r=Math.pow(2,a)-1,i=0)}return r},jsts.index.IntervalSize=function(){},jsts.index.IntervalSize.MIN_BINARY_EXPONENT=-50,jsts.index.IntervalSize.isZeroWidth=function(e,t){var n=t-e;if(n===0)return!0;var r,i,s;return r=Math.max(Math.abs(e),Math.abs(t)),i=n/r,s=jsts.index.DoubleBits.exponent(i),s<=jsts.index.IntervalSize.MIN_BINARY_EXPONENT},jsts.index.ItemVisitor=function(){},jsts.index.ItemVisitor.prototype.visitItem=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.SpatialIndex=function(){},jsts.index.SpatialIndex.prototype.insert=function(e,t){throw new jsts.error.AbstractMethodInvocationError},jsts.index.SpatialIndex.prototype.query=function(e,t){throw new jsts.error.AbstractMethodInvocationError},jsts.index.SpatialIndex.prototype.remove=function(e,t){throw new jsts.error.AbstractMethodInvocationError},jsts.index.chain.MonotoneChain=function(e,t,n,r){this.pts=e,this.start=t,this.end=n,this.context=r},jsts.index.chain.MonotoneChain.prototype.pts=null,jsts.index.chain.MonotoneChain.prototype.start=null,jsts.index.chain.MonotoneChain.prototype.end=null,jsts.index.chain.MonotoneChain.prototype.env=null,jsts.index.chain.MonotoneChain.prototype.context=null,jsts.index.chain.MonotoneChain.prototype.id=null,jsts.index.chain.MonotoneChain.prototype.setId=function(e){this.id=e},jsts.index.chain.MonotoneChain.prototype.getId=function(){return this.id},jsts.index.chain.MonotoneChain.prototype.getContext=function(){return this.context},jsts.index.chain.MonotoneChain.prototype.getEnvelope=function(){if(this.env==null){var e=this.pts[this.start],t=this.pts[this.end];this.env=new jsts.geom.Envelope(e,t)}return this.env},jsts.index.chain.MonotoneChain.prototype.getStartIndex=function(){return this.start},jsts.index.chain.MonotoneChain.prototype.getEndIndex=function(){return this.end},jsts.index.chain.MonotoneChain.prototype.getLineSegment=function(e,t){t.p0=this.pts[e],t.p1=this.pts[e+1]},jsts.index.chain.MonotoneChain.prototype.getCoordinates=function(){var e=[],t=0;for(var n=this.start;n<=this.end;n++)e[t++]=this.pts[n];return e},jsts.index.chain.MonotoneChain.prototype.select=function(e,t){this.computeSelect2(e,this.start,this.end,t)},jsts.index.chain.MonotoneChain.prototype.computeSelect2=function(e,t,n,r){var i=this.pts[t],s=this.pts[n];r.tempEnv1.init(i,s);if(n-t===1){r.select(this,t);return}if(!e.intersects(r.tempEnv1))return;var o=parseInt((t+n)/2);t<o&&this.computeSelect2(e,t,o,r),o<n&&this.computeSelect2(e,o,n,r)},jsts.index.chain.MonotoneChain.prototype.computeOverlaps=function(e,t){if(arguments.length===6)return this.computeOverlaps2.apply(this,arguments);this.computeOverlaps2(this.start,this.end,e,e.start,e.end,t)},jsts.index.chain.MonotoneChain.prototype.computeOverlaps2=function(e,t,n,r,i,s){var o=this.pts[e],u=this.pts[t],a=n.pts[r],f=n.pts[i];if(t-e===1&&i-r===1){s.overlap(this,e,n,r);return}s.tempEnv1.init(o,u),s.tempEnv2.init(a,f);if(!s.tempEnv1.intersects(s.tempEnv2))return;var l=parseInt((e+t)/2),c=parseInt((r+i)/2);e<l&&(r<c&&this.computeOverlaps2(e,l,n,r,c,s),c<i&&this.computeOverlaps2(e,l,n,c,i,s)),l<t&&(r<c&&this.computeOverlaps2(l,t,n,r,c,s),c<i&&this.computeOverlaps2(l,t,n,c,i,s))},jsts.index.chain.MonotoneChainBuilder=function(){},jsts.index.chain.MonotoneChainBuilder.toIntArray=function(e){var t=[];for(var n=0;n<e.length;n++)t[n]=e[n];return t},jsts.index.chain.MonotoneChainBuilder.getChains=function(e){return arguments.length===2?jsts.index.chain.MonotoneChainBuilder.getChains2.apply(this,arguments):jsts.index.chain.MonotoneChainBuilder.getChains2(e,null)},jsts.index.chain.MonotoneChainBuilder.getChains2=function(e,t){var n=[],r=jsts.index.chain.MonotoneChainBuilder.getChainStartIndices(e);for(var i=0;i<r.length-1;i++){var s=new jsts.index.chain.MonotoneChain(e,r[i],r[i+1],t);n.push(s)}return n},jsts.index.chain.MonotoneChainBuilder.getChainStartIndices=function(e){var t=0,n=[];n.push(t);do{var r=jsts.index.chain.MonotoneChainBuilder.findChainEnd(e,t);n.push(r),t=r}while(t<e.length-1);var i=jsts.index.chain.MonotoneChainBuilder.toIntArray(n);return i},jsts.index.chain.MonotoneChainBuilder.findChainEnd=function(e,t){var n=t;while(n<e.length-1&&e[n].equals2D(e[n+1]))n++;if(n>=e.length-1)return e.length-1;var r=jsts.geomgraph.Quadrant.quadrant(e[n],e[n+1]),i=t+1;while(i<e.length){if(!e[i-1].equals2D(e[i])){var s=jsts.geomgraph.Quadrant.quadrant(e[i-1],e[i]);if(s!==r)break}i++}return i-1},jsts.index.chain.MonotoneChainOverlapAction=function(){this.tempEnv1=new jsts.geom.Envelope,this.tempEnv2=new jsts.geom.Envelope,this.overlapSeg1=new jsts.geom.LineSegment,this.overlapSeg2=new jsts.geom.LineSegment},jsts.index.chain.MonotoneChainOverlapAction.prototype.tempEnv1=null,jsts.index.chain.MonotoneChainOverlapAction.prototype.tempEnv2=null,jsts.index.chain.MonotoneChainOverlapAction.prototype.overlapSeg1=null,jsts.index.chain.MonotoneChainOverlapAction.prototype.overlapSeg2=null,jsts.index.chain.MonotoneChainOverlapAction.prototype.overlap=function(e,t,n,r){this.mc1.getLineSegment(t,this.overlapSeg1),this.mc2.getLineSegment(r,this.overlapSeg2),this.overlap2(this.overlapSeg1,this.overlapSeg2)},jsts.index.chain.MonotoneChainOverlapAction.prototype.overlap2=function(e,t){},jsts.index.chain.MonotoneChainSelectAction=function(){this.tempEnv1=new jsts.geom.Envelope,this.selectedSegment=new jsts.geom.LineSegment},jsts.index.chain.MonotoneChainSelectAction.prototype.tempEnv1=null,jsts.index.chain.MonotoneChainSelectAction.prototype.selectedSegment=null,jsts.index.chain.MonotoneChainSelectAction.prototype.select=function(e,t){e.getLineSegment(t,this.selectedSegment),this.select2(this.selectedSegment)},jsts.index.chain.MonotoneChainSelectAction.prototype.select2=function(e){},jsts.algorithm.MCPointInRing=function(e){this.ring=e,this.tree=null,this.crossings=0,this.interval=new jsts.index.bintree.Interval,this.buildIndex()},jsts.algorithm.MCPointInRing.MCSelecter=function(e,t){this.parent=t,this.p=e},jsts.algorithm.MCPointInRing.MCSelecter.prototype=new jsts.index.chain.MonotoneChainSelectAction,jsts.algorithm.MCPointInRing.MCSelecter.prototype.constructor=jsts.algorithm.MCPointInRing.MCSelecter,jsts.algorithm.MCPointInRing.MCSelecter.prototype.select2=function(e){this.parent.testLineSegment.apply(this.parent,[this.p,e])},jsts.algorithm.MCPointInRing.prototype.buildIndex=function(){this.tree=new jsts.index.bintree.Bintree;var e=jsts.geom.CoordinateArrays.removeRepeatedPoints(this.ring.getCoordinates()),t=jsts.index.chain.MonotoneChainBuilder.getChains(e);for(var n=0;n<t.length;n++){var r=t[n],i=r.getEnvelope();this.interval.min=i.getMinY(),this.interval.max=i.getMaxY(),this.tree.insert(this.interval,r)}},jsts.algorithm.MCPointInRing.prototype.isInside=function(e){this.crossings=0;var t=new jsts.geom.Envelope(-Number.MAX_VALUE,Number.MAX_VALUE,e.y,e.y);this.interval.min=e.y,this.interval.max=e.y;var n=this.tree.query(this.interval),r=new jsts.algorithm.MCPointInRing.MCSelecter(e,this);for(var i=n.iterator();i.hasNext();){var s=i.next();this.testMonotoneChain(t,r,s)}return this.crossings%2==1?!0:!1},jsts.algorithm.MCPointInRing.prototype.testMonotoneChain=function(e,t,n){n.select(e,t)},jsts.algorithm.MCPointInRing.prototype.testLineSegment=function(e,t){var n,r,i,s,o,u,a;u=t.p0,a=t.p1,r=u.x-e.x,i=u.y-e.y,s=a.x-e.x,o=a.y-e.y;if(i>0&&o<=0||o>0&&i<=0)n=jsts.algorithm.RobustDeterminant.signOfDet2x2(r,i,s,o)/(o-i),0<n&&this.crossings++},jsts.index.kdtree.KdNode=function(){this.left=null,this.right=null,this.count=1,arguments.length===2?this.initializeFromCoordinate.apply(this,arguments[0],arguments[1]):arguments.length===3&&this.initializeFromXY.apply(this,arguments[0],arguments[1],arguments[2])},jsts.index.kdtree.KdNode.prototype.initializeFromXY=function(e,t,n){this.p=new jsts.geom.Coordinate(e,t),this.data=n},jsts.index.kdtree.KdNode.prototype.initializeFromCoordinate=function(e,t){this.p=e,this.data=t},jsts.index.kdtree.KdNode.prototype.getX=function(){return this.p.x},jsts.index.kdtree.KdNode.prototype.getY=function(){return this.p.y},jsts.index.kdtree.KdNode.prototype.getCoordinate=function(){return this.p},jsts.index.kdtree.KdNode.prototype.getData=function(){return this.data},jsts.index.kdtree.KdNode.prototype.getLeft=function(){return this.left},jsts.index.kdtree.KdNode.prototype.getRight=function(){return this.right},jsts.index.kdtree.KdNode.prototype.increment=function(){this.count+=1},jsts.index.kdtree.KdNode.prototype.getCount=function(){return this.count},jsts.index.kdtree.KdNode.prototype.isRepeated=function(){return count>1},jsts.index.kdtree.KdNode.prototype.setLeft=function(e){this.left=e},jsts.index.kdtree.KdNode.prototype.setRight=function(e){this.right=e},jsts.index.kdtree.KdTree=function(e){var t=0;e!==undefined&&(t=e),this.root=null,this.last=null,this.numberOfNodes=0,this.tolerance=t},jsts.index.kdtree.KdTree.prototype.insert=function(){return arguments.length===1?this.insertCoordinate.apply(this,arguments[0]):this.insertWithData.apply(this,arguments[0],arguments[1])},jsts.index.kdtree.KdTree.prototype.insertCoordinate=function(e){return this.insertWithData(e,null)},jsts.index.kdtree.KdTree.prototype.insertWithData=function(e,t){if(this.root===null)return this.root=new jsts.index.kdtree.KdNode(e,t),this.root;var n=this.root,r=this.root,i=!0,s=!0;while(n!==last){i?s=e.x<n.getX():s=e.y<n.getY(),r=n,s?n=n.getLeft():n=n.getRight();if(n!==null){var o=e.distance(n.getCoordinate())<=this.tolerance;if(o)return n.increment(),n}i=!i}this.numberOfNodes=numberOfNodes+1;var u=new jsts.index.kdtree.KdNode(e,t);return u.setLeft(this.last),u.setRight(this.last),s?r.setLeft(u):r.setRight(u),u},jsts.index.kdtree.KdTree.prototype.queryNode=function(e,t,n,r,i){if(e===t)return;var s,o,u;r?(s=n.getMinX(),o=n.getMaxX(),u=e.getX()):(s=n.getMinY(),o=n.getMaxY(),u=e.getY());var a=s<u,f=u<=o;a&&this.queryNode(e.getLeft(),t,n,!r,i),n.contains(e.getCoordinate())&&i.add(e),f&&this.queryNode(e.getRight(),t,n,!r,i)},jsts.index.kdtree.KdTree.prototype.query=function(){return arguments.length===1?this.queryByEnvelope.apply(this,arguments[0]):this.queryWithArray.apply(this,arguments[0],arguments[1])},jsts.index.kdtree.KdTree.prototype.queryByEnvelope=function(e){var t=[];return this.queryNode(this.root,this.last,e,!0,t),t},jsts.index.kdtree.KdTree.prototype.queryWithArray=function(e,t){this.queryNode(this.root,this.last,e,!0,t)},jsts.index.quadtree.Key=function(e){this.pt=new jsts.geom.Coordinate,this.level=0,this.env=null,this.computeKey(e)},jsts.index.quadtree.Key.computeQuadLevel=function(e){var t,n,r,i;return t=e.getWidth(),n=e.getHeight(),r=t>n?t:n,i=jsts.index.DoubleBits.exponent(r)+1,i},jsts.index.quadtree.Key.prototype.getPoint=function(){return this.pt},jsts.index.quadtree.Key.prototype.getLevel=function(){return this.level},jsts.index.quadtree.Key.prototype.getEnvelope=function(){return this.env},jsts.index.quadtree.Key.prototype.getCentre=function(){var e,t;return e=(this.env.getMinX()+this.env.getMaxX())/2,t=(this.env.getMinY()+this.env.getMaxY())/2,new jsts.geom.Coordinate(e,t)},jsts.index.quadtree.Key.prototype.computeKey=function(){arguments[0]instanceof jsts.geom.Envelope?this.computeKeyFromEnvelope(arguments[0]):this.computeKeyFromLevel(arguments[0],arguments[1])},jsts.index.quadtree.Key.prototype.computeKeyFromEnvelope=function(e){this.level=jsts.index.quadtree.Key.computeQuadLevel(e),this.env=new jsts.geom.Envelope,this.computeKey(this.level,e);while(!this.env.contains(e))this.level+=1,this.computeKey(this.level,e)},jsts.index.quadtree.Key.prototype.computeKeyFromLevel=function(e,t){var n=jsts.index.DoubleBits.powerOf2(e);this.pt.x=Math.floor(t.getMinX()/n)*n,this.pt.y=Math.floor(t.getMinY()/n)*n,this.env.init(this.pt.x,this.pt.x+n,this.pt.y,this.pt.y+n)},jsts.index.quadtree.NodeBase=function(){this.subnode=new Array(4),this.subnode[0]=null,this.subnode[1]=null,this.subnode[2]=null,this.subnode[3]=null,this.items=[]},jsts.index.quadtree.NodeBase.prototype.getSubnodeIndex=function(e,t){var n=-1;return e.getMinX()>=t.x&&(e.getMinY()>=t.y&&(n=3),e.getMaxY()<=t.y&&(n=1)),e.getMaxX()<=t.x&&(e.getMinY()>=t.y&&(n=2),e.getMaxY()<=t.y&&(n=0)),n},jsts.index.quadtree.NodeBase.prototype.getItems=function(){return this.items},jsts.index.quadtree.NodeBase.prototype.hasItems=function(){return this.items.length>0},jsts.index.quadtree.NodeBase.prototype.add=function(e){this.items.push(e)},jsts.index.quadtree.NodeBase.prototype.remove=function(e,t){if(!this.isSearchMatch(e))return!1;var n=!1,r=0;for(r;r<4;r++)if(this.subnode[r]!==null){n=this.subnode[r].remove(e,t);if(n){this.subnode[r].isPrunable()&&(this.subnode[r]=null);break}}if(n)return n;if(this.items.indexOf(t)!==-1){for(var r=this.items.length-1;r>=0;r--)this.items[r]===t&&this.items.splice(r,1);n=!0}return n},jsts.index.quadtree.NodeBase.prototype.isPrunable=function(){return!this.hasChildren()&&!this.hasItems()},jsts.index.quadtree.NodeBase.prototype.hasChildren=function(){var e=0;for(e;e<4;e++)if(this.subnode[e]!==null)return!0;return!1},jsts.index.quadtree.NodeBase.prototype.isEmpty=function(){var e=!0;this.items.length>0&&(e=!1);var t=0;for(t;t<4;t++)this.subnode[t]!==null&&(this.subnode[t].isEmpty()||(e=!1));return e},jsts.index.quadtree.NodeBase.prototype.addAllItems=function(e){e=e.concat(this.items);var t=0;for(t;t<4;t++)this.subnode[t]!==null&&(e=this.subnode[t].addAllItems(e));return e},jsts.index.quadtree.NodeBase.prototype.addAllItemsFromOverlapping=
function(e,t){if(!this.isSearchMatch(e))return;t=t.concat(this.items);var n=0;for(n;n<4;n++)this.subnode[n]!==null&&(t=this.subnode[n].addAllItemsFromOverlapping(e,t))},jsts.index.quadtree.NodeBase.prototype.visit=function(e,t){if(!this.isSearchMatch(e))return;this.visitItems(e,t);var n=0;for(n;n<4;n++)this.subnode[n]!==null&&this.subnode[n].visit(e,t)},jsts.index.quadtree.NodeBase.prototype.visitItems=function(e,t){var n=0,r=this.items.length;for(n;n<r;n++)t.visitItem(this.items[n])},jsts.index.quadtree.NodeBase.prototype.depth=function(){var e=0,t=0,n;for(t;t<4;t++)this.subnode[t]!==null&&(n=this.subnode[t].depth(),n>e&&(e=n));return e+1},jsts.index.quadtree.NodeBase.prototype.size=function(){var e=0,t=0;for(t;t<4;t++)this.subnode[t]!==null&&(e+=this.subnode[t].size());return e+this.items.length},jsts.index.quadtree.NodeBase.prototype.getNodeCount=function(){var e=0,t=0;for(t;t<4;t++)this.subnode[t]!==null&&(e+=this.subnode[t].size());return e+1},jsts.index.quadtree.Node=function(e,t){jsts.index.quadtree.NodeBase.prototype.constructor.apply(this,arguments),this.env=e,this.level=t,this.centre=new jsts.geom.Coordinate,this.centre.x=(e.getMinX()+e.getMaxX())/2,this.centre.y=(e.getMinY()+e.getMaxY())/2},jsts.index.quadtree.Node.prototype=new jsts.index.quadtree.NodeBase,jsts.index.quadtree.Node.createNode=function(e){var t,n;return t=new jsts.index.quadtree.Key(e),n=new jsts.index.quadtree.Node(t.getEnvelope(),t.getLevel()),n},jsts.index.quadtree.Node.createExpanded=function(e,t){var n=new jsts.geom.Envelope(t),r;return e!==null&&n.expandToInclude(e.env),r=jsts.index.quadtree.Node.createNode(n),e!==null&&r.insertNode(e),r},jsts.index.quadtree.Node.prototype.getEnvelope=function(){return this.env},jsts.index.quadtree.Node.prototype.isSearchMatch=function(e){return this.env.intersects(e)},jsts.index.quadtree.Node.prototype.getNode=function(e){var t=this.getSubnodeIndex(e,this.centre),n;return t!==-1?(n=this.getSubnode(t),n.getNode(e)):this},jsts.index.quadtree.Node.prototype.find=function(e){var t=this.getSubnodeIndex(e,this.centre),n;return t===-1?this:this.subnode[t]!==null?(n=this.subnode[t],n.find(e)):this},jsts.index.quadtree.Node.prototype.insertNode=function(e){var t=this.getSubnodeIndex(e.env,this.centre),n;e.level===this.level-1?this.subnode[t]=e:(n=this.createSubnode(t),n.insertNode(e),this.subnode[t]=n)},jsts.index.quadtree.Node.prototype.getSubnode=function(e){return this.subnode[e]===null&&(this.subnode[e]=this.createSubnode(e)),this.subnode[e]},jsts.index.quadtree.Node.prototype.createSubnode=function(e){var t=0,n=0,r=0,i=0,s,o;switch(e){case 0:t=this.env.getMinX(),n=this.centre.x,r=this.env.getMinY(),i=this.centre.y;break;case 1:t=this.centre.x,n=this.env.getMaxX(),r=this.env.getMinY(),i=this.centre.y;break;case 2:t=this.env.getMinX(),n=this.centre.x,r=this.centre.y,i=this.env.getMaxY();break;case 3:t=this.centre.x,n=this.env.getMaxX(),r=this.centre.y,i=this.env.getMaxY()}return s=new jsts.geom.Envelope(t,n,r,i),o=new jsts.index.quadtree.Node(s,this.level-1),o},jsts.index.quadtree.Quadtree=function(){this.root=new jsts.index.quadtree.Root,this.minExtent=1},jsts.index.quadtree.Quadtree.ensureExtent=function(e,t){var n,r,i,s;return n=e.getMinX(),r=e.getMaxX(),i=e.getMinY(),s=e.getMaxY(),n!==r&&i!==s?e:(n===r&&(n-=t/2,r=n+t/2),i===s&&(i-=t/2,s=i+t/2),new jsts.geom.Envelope(n,r,i,s))},jsts.index.quadtree.Quadtree.prototype.depth=function(){return this.root.depth()},jsts.index.quadtree.Quadtree.prototype.size=function(){return this.root.size()},jsts.index.quadtree.Quadtree.prototype.insert=function(e,t){this.collectStats(e);var n=jsts.index.quadtree.Quadtree.ensureExtent(e,this.minExtent);this.root.insert(n,t)},jsts.index.quadtree.Quadtree.prototype.remove=function(e,t){var n=jsts.index.quadtree.Quadtree.ensureExtent(e,this.minExtent);return this.root.remove(n,t)},jsts.index.quadtree.Quadtree.prototype.query=function(){if(arguments.length===1)return jsts.index.quadtree.Quadtree.prototype.queryByEnvelope.apply(this,arguments);jsts.index.quadtree.Quadtree.prototype.queryWithVisitor.apply(this,arguments)},jsts.index.quadtree.Quadtree.prototype.queryByEnvelope=function(e){var t=new jsts.index.ArrayListVisitor;return this.query(e,t),t.getItems()},jsts.index.quadtree.Quadtree.prototype.queryWithVisitor=function(e,t){this.root.visit(e,t)},jsts.index.quadtree.Quadtree.prototype.queryAll=function(){var e=[];return e=this.root.addAllItems(e),e},jsts.index.quadtree.Quadtree.prototype.collectStats=function(e){var t=e.getWidth();t<this.minExtent&&t>0&&(this.minExtent=t);var n=e.getHeight();n<this.minExtent&&n>0&&(this.minExtent=n)},jsts.index.quadtree.Root=function(){jsts.index.quadtree.NodeBase.prototype.constructor.apply(this,arguments),this.origin=new jsts.geom.Coordinate(0,0)},jsts.index.quadtree.Root.prototype=new jsts.index.quadtree.NodeBase,jsts.index.quadtree.Root.prototype.insert=function(e,t){var n=this.getSubnodeIndex(e,this.origin);if(n===-1){this.add(t);return}var r=this.subnode[n];if(r===null||!r.getEnvelope().contains(e)){var i=jsts.index.quadtree.Node.createExpanded(r,e);this.subnode[n]=i}this.insertContained(this.subnode[n],e,t)},jsts.index.quadtree.Root.prototype.insertContained=function(e,t,n){var r,i,s;r=jsts.index.IntervalSize.isZeroWidth(t.getMinX(),t.getMaxX()),i=jsts.index.IntervalSize.isZeroWidth(t.getMinY(),t.getMaxY()),r||i?s=e.find(t):s=e.getNode(t),s.add(n)},jsts.index.quadtree.Root.prototype.isSearchMatch=function(e){return!0},jsts.index.strtree.Boundable=function(){},jsts.index.strtree.Boundable.prototype.getBounds=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractNode=function(e){this.level=e,this.childBoundables=[]},jsts.index.strtree.AbstractNode.prototype=new jsts.index.strtree.Boundable,jsts.index.strtree.AbstractNode.constructor=jsts.index.strtree.AbstractNode,jsts.index.strtree.AbstractNode.prototype.childBoundables=null,jsts.index.strtree.AbstractNode.prototype.bounds=null,jsts.index.strtree.AbstractNode.prototype.level=null,jsts.index.strtree.AbstractNode.prototype.getChildBoundables=function(){return this.childBoundables},jsts.index.strtree.AbstractNode.prototype.computeBounds=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractNode.prototype.getBounds=function(){return this.bounds===null&&(this.bounds=this.computeBounds()),this.bounds},jsts.index.strtree.AbstractNode.prototype.getLevel=function(){return this.level},jsts.index.strtree.AbstractNode.prototype.addChildBoundable=function(e){this.childBoundables.push(e)},jsts.index.strtree.AbstractSTRtree=function(e){if(e===undefined)return;this.itemBoundables=[],jsts.util.Assert.isTrue(e>1,"Node capacity must be greater than 1"),this.nodeCapacity=e},jsts.index.strtree.AbstractSTRtree.IntersectsOp=function(){},jsts.index.strtree.AbstractSTRtree.IntersectsOp.prototype.intersects=function(e,t){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractSTRtree.prototype.root=null,jsts.index.strtree.AbstractSTRtree.prototype.built=!1,jsts.index.strtree.AbstractSTRtree.prototype.itemBoundables=null,jsts.index.strtree.AbstractSTRtree.prototype.nodeCapacity=null,jsts.index.strtree.AbstractSTRtree.prototype.build=function(){jsts.util.Assert.isTrue(!this.built),this.root=this.itemBoundables.length===0?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.built=!0},jsts.index.strtree.AbstractSTRtree.prototype.createNode=function(e){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractSTRtree.prototype.createParentBoundables=function(e,t){jsts.util.Assert.isTrue(e.length!==0);var n=[];n.push(this.createNode(t));var r=[];for(var i=0;i<e.length;i++)r.push(e[i]);r.sort(this.getComparator());for(var i=0;i<r.length;i++){var s=r[i];this.lastNode(n).getChildBoundables().length===this.getNodeCapacity()&&n.push(this.createNode(t)),this.lastNode(n).addChildBoundable(s)}return n},jsts.index.strtree.AbstractSTRtree.prototype.lastNode=function(e){return e[e.length-1]},jsts.index.strtree.AbstractSTRtree.prototype.compareDoubles=function(e,t){return e>t?1:e<t?-1:0},jsts.index.strtree.AbstractSTRtree.prototype.createHigherLevels=function(e,t){jsts.util.Assert.isTrue(e.length!==0);var n=this.createParentBoundables(e,t+1);return n.length===1?n[0]:this.createHigherLevels(n,t+1)},jsts.index.strtree.AbstractSTRtree.prototype.getRoot=function(){return this.built||this.build(),this.root},jsts.index.strtree.AbstractSTRtree.prototype.getNodeCapacity=function(){return this.nodeCapacity},jsts.index.strtree.AbstractSTRtree.prototype.size=function(){return arguments.length===1?this.size2(arguments[0]):(this.built||this.build(),this.itemBoundables.length===0?0:this.size2(root))},jsts.index.strtree.AbstractSTRtree.prototype.size2=function(e){var t=0,n=e.getChildBoundables();for(var r=0;r<n.length;r++){var i=n[r];i instanceof jsts.index.strtree.AbstractNode?t+=this.size(i):i instanceof jsts.index.strtree.ItemBoundable&&(t+=1)}return t},jsts.index.strtree.AbstractSTRtree.prototype.depth=function(){return arguments.length===1?this.depth2(arguments[0]):(this.built||this.build(),this.itemBoundables.length===0?0:this.depth2(root))},jsts.index.strtree.AbstractSTRtree.prototype.depth2=function(){var e=0,t=node.getChildBoundables();for(var n=0;n<t.length;n++){var r=t[n];if(r instanceof jsts.index.strtree.AbstractNode){var i=this.depth(r);i>e&&(e=i)}}return e+1},jsts.index.strtree.AbstractSTRtree.prototype.insert=function(e,t){jsts.util.Assert.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.push(new jsts.index.strtree.ItemBoundable(e,t))},jsts.index.strtree.AbstractSTRtree.prototype.query=function(e){arguments.length>1&&this.query2.apply(this,arguments),this.built||this.build();var t=[];return this.itemBoundables.length===0?(jsts.util.Assert.isTrue(this.root.getBounds()===null),t):(this.getIntersectsOp().intersects(this.root.getBounds(),e)&&this.query3(e,this.root,t),t)},jsts.index.strtree.AbstractSTRtree.prototype.query2=function(e,t){arguments.length>2&&this.query3.apply(this,arguments),this.built||this.build(),this.itemBoundables.length===0&&jsts.util.Assert.isTrue(this.root.getBounds()===null),this.getIntersectsOp().intersects(this.root.getBounds(),e)&&this.query4(e,this.root,t)},jsts.index.strtree.AbstractSTRtree.prototype.query3=function(e,t,n){arguments[2]instanceof Array||this.query4.apply(this,arguments);var r=t.getChildBoundables();for(var i=0;i<r.length;i++){var s=r[i];if(!this.getIntersectsOp().intersects(s.getBounds(),e))continue;s instanceof jsts.index.strtree.AbstractNode?this.query3(e,s,n):s instanceof jsts.index.strtree.ItemBoundable?n.push(s.getItem()):jsts.util.Assert.shouldNeverReachHere()}},jsts.index.strtree.AbstractSTRtree.prototype.query4=function(e,t,n){var r=t.getChildBoundables();for(var i=0;i<r.length;i++){var s=r[i];if(!this.getIntersectsOp().intersects(s.getBounds(),e))continue;s instanceof jsts.index.strtree.AbstractNode?this.query4(e,s,n):s instanceof jsts.index.strtree.ItemBoundable?n.visitItem(s.getItem()):jsts.util.Assert.shouldNeverReachHere()}},jsts.index.strtree.AbstractSTRtree.prototype.getIntersectsOp=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractSTRtree.prototype.itemsTree=function(){if(arguments.length===1)return this.itemsTree2.apply(this,arguments);this.built||this.build();var e=this.itemsTree2(this.root);return e===null?[]:e},jsts.index.strtree.AbstractSTRtree.prototype.itemsTree2=function(e){var t=[],n=e.getChildBoundables();for(var r=0;r<n.length;r++){var i=n[r];if(i instanceof jsts.index.strtree.AbstractNode){var s=this.itemsTree(i);s!=null&&t.push(s)}else i instanceof jsts.index.strtree.ItemBoundable?t.push(i.getItem()):jsts.util.Assert.shouldNeverReachHere()}return t.length<=0?null:t},jsts.index.strtree.AbstractSTRtree.prototype.remove=function(e,t){return this.built||this.build(),this.itemBoundables.length===0&&jsts.util.Assert.isTrue(this.root.getBounds()==null),this.getIntersectsOp().intersects(this.root.getBounds(),e)?this.remove2(e,this.root,t):!1},jsts.index.strtree.AbstractSTRtree.prototype.remove2=function(e,t,n){var r=this.removeItem(t,n);if(r)return!0;var i=null,s=t.getChildBoundables();for(var o=0;o<s.length;o++){var u=s[o];if(!this.getIntersectsOp().intersects(u.getBounds(),e))continue;if(u instanceof jsts.index.strtree.AbstractNode){r=this.remove(e,u,n);if(r){i=u;break}}}return i!=null&&i.getChildBoundables().length===0&&s.splice(s.indexOf(i),1),r},jsts.index.strtree.AbstractSTRtree.prototype.removeItem=function(e,t){var n=null,r=e.getChildBoundables();for(var i=0;i<r.length;i++){var s=r[i];s instanceof jsts.index.strtree.ItemBoundable&&s.getItem()===t&&(n=s)}return n!==null?(r.splice(r.indexOf(n),1),!0):!1},jsts.index.strtree.AbstractSTRtree.prototype.boundablesAtLevel=function(e){if(arguments.length>1){this.boundablesAtLevel2.apply(this,arguments);return}var t=[];return this.boundablesAtLevel2(e,this.root,t),t},jsts.index.strtree.AbstractSTRtree.prototype.boundablesAtLevel2=function(e,t,n){jsts.util.Assert.isTrue(e>-2);if(t.getLevel()===e){n.add(t);return}var r=node.getChildBoundables();for(var i=0;i<r.length;i++){var s=r[i];s instanceof jsts.index.strtree.AbstractNode?this.boundablesAtLevel(e,s,n):(jsts.util.Assert.isTrue(s instanceof jsts.index.strtree.ItemBoundable),e===-1&&n.add(s))}return},jsts.index.strtree.AbstractSTRtree.prototype.getComparator=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.Interval=function(){var e;if(arguments.length===1)return e=arguments[0],jsts.index.strtree.Interval(e.min,e.max);arguments.length===2&&(jsts.util.Assert.isTrue(this.min<=this.max),this.min=arguments[0],this.max=arguments[1])},jsts.index.strtree.Interval.prototype.min=null,jsts.index.strtree.Interval.prototype.max=null,jsts.index.strtree.Interval.prototype.getCentre=function(){return(this.min+this.max)/2},jsts.index.strtree.Interval.prototype.expandToInclude=function(e){return this.max=Math.max(this.max,e.max),this.min=Math.min(this.min,e.min),this},jsts.index.strtree.Interval.prototype.intersects=function(e){return!(e.min>this.max||e.max<this.min)},jsts.index.strtree.Interval.prototype.equals=function(e){return e instanceof jsts.index.strtree.Interval?(other=e,this.min===other.min&&this.max===other.max):!1},jsts.index.strtree.ItemBoundable=function(e,t){this.bounds=e,this.item=t},jsts.index.strtree.ItemBoundable.prototype=new jsts.index.strtree.Boundable,jsts.index.strtree.ItemBoundable.constructor=jsts.index.strtree.ItemBoundable,jsts.index.strtree.ItemBoundable.prototype.bounds=null,jsts.index.strtree.ItemBoundable.prototype.item=null,jsts.index.strtree.ItemBoundable.prototype.getBounds=function(){return this.bounds},jsts.index.strtree.ItemBoundable.prototype.getItem=function(){return this.item},jsts.index.strtree.SIRtree=function(e){e=e||10,jsts.index.strtree.AbstractSTRtree.call(this,e)},jsts.index.strtree.SIRtree.prototype=new jsts.index.strtree.AbstractSTRtree,jsts.index.strtree.SIRtree.constructor=jsts.index.strtree.SIRtree,jsts.index.strtree.SIRtree.prototype.comperator={compare:function(e,t){return e.getBounds().getCentre()-t.getBounds().getCentre()}},jsts.index.strtree.SIRtree.prototype.intersectionOp={intersects:function(e,t){return e.intersects(t)}},jsts.index.strtree.SIRtree.prototype.createNode=function(e){var t=function(e){jsts.index.strtree.AbstractNode.apply(this,arguments)};return t.prototype=new jsts.index.strtree.AbstractNode,t.constructor=t,t.prototype.computeBounds=function(){var e=null,t=this.getChildBoundables(),n;for(var r=0,i=t.length;r<i;r++)n=t[r],e===null?e=new jsts.index.strtree.Interval(n.getBounds()):e.expandToInclude(n.getBounds());return e},t},jsts.index.strtree.SIRtree.prototype.insert=function(e,t,n){jsts.index.strtree.AbstractSTRtree.prototype.insert(new jsts.index.strtree.Interval(Math.min(e,t),Math.max(e,t)),n)},jsts.index.strtree.SIRtree.prototype.query=function(e,t){t=t||e,jsts.index.strtree.AbstractSTRtree.prototype.query(new jsts.index.strtree.Interval(Math.min(e,t),Math.max(e,t)))},jsts.index.strtree.SIRtree.prototype.getIntersectsOp=function(){return this.intersectionOp},jsts.index.strtree.SIRtree.prototype.getComparator=function(){return this.comperator},jsts.index.strtree.STRtree=function(e){e=e||jsts.index.strtree.STRtree.DEFAULT_NODE_CAPACITY,jsts.index.strtree.AbstractSTRtree.call(this,e)},jsts.index.strtree.STRtree.prototype=new jsts.index.strtree.AbstractSTRtree,jsts.index.strtree.STRtree.constructor=jsts.index.strtree.STRtree,jsts.index.strtree.STRtree.prototype.xComparator=function(e,t){return jsts.index.strtree.AbstractSTRtree.prototype.compareDoubles(jsts.index.strtree.STRtree.prototype.centreX(e.getBounds()),jsts.index.strtree.STRtree.prototype.centreX(t.getBounds()))},jsts.index.strtree.STRtree.prototype.yComparator=function(e,t){return jsts.index.strtree.AbstractSTRtree.prototype.compareDoubles(jsts.index.strtree.STRtree.prototype.centreY(e.getBounds()),jsts.index.strtree.STRtree.prototype.centreY(t.getBounds()))},jsts.index.strtree.STRtree.prototype.centreX=function(e){return jsts.index.strtree.STRtree.prototype.avg(e.getMinX(),e.getMaxX())},jsts.index.strtree.STRtree.prototype.centreY=function(e){return jsts.index.strtree.STRtree.prototype.avg(e.getMinY(),e.getMaxY())},jsts.index.strtree.STRtree.prototype.avg=function(e,t){return(e+t)/2},jsts.index.strtree.STRtree.prototype.intersectsOp={intersects:function(e,t){return e.intersects(t)}},jsts.index.strtree.STRtree.prototype.createParentBoundables=function(e,t){jsts.util.Assert.isTrue(e.length!==0);var n=Math.ceil(e.length/this.getNodeCapacity()),r=[];for(var i=0;i<e.length;i++)r.push(e[i]);r.sort(this.xComparator);var s=this.verticalSlices(r,Math.ceil(Math.sqrt(n)));return this.createParentBoundablesFromVerticalSlices(s,t)},jsts.index.strtree.STRtree.prototype.createParentBoundablesFromVerticalSlices=function(e,t){jsts.util.Assert.isTrue(e.length>0);var n=[];for(var r=0;r<e.length;r++)n=n.concat(this.createParentBoundablesFromVerticalSlice(e[r],t));return n},jsts.index.strtree.STRtree.prototype.createParentBoundablesFromVerticalSlice=function(e,t){return jsts.index.strtree.AbstractSTRtree.prototype.createParentBoundables.call(this,e,t)},jsts.index.strtree.STRtree.prototype.verticalSlices=function(e,t){var n=Math.ceil(e.length/t),r=[],i=0,s,o;for(var u=0;u<t;u++){r[u]=[],s=0;while(i<e.length&&s<n)o=e[i++],r[u].push(o),s++}return r},jsts.index.strtree.STRtree.DEFAULT_NODE_CAPACITY=10,jsts.index.strtree.STRtree.prototype.createNode=function(e){var t=new jsts.index.strtree.AbstractNode(e);return t.computeBounds=function(){var e=null,t=this.getChildBoundables();for(var n=0;n<t.length;n++){var r=t[n];e===null?e=new jsts.geom.Envelope(r.getBounds()):e.expandToInclude(r.getBounds())}return e},t},jsts.index.strtree.STRtree.prototype.getIntersectsOp=function(){return this.intersectsOp},jsts.index.strtree.STRtree.prototype.insert=function(e,t){if(e.isNull())return;jsts.index.strtree.AbstractSTRtree.prototype.insert.call(this,e,t)},jsts.index.strtree.STRtree.prototype.query=function(e,t){return jsts.index.strtree.AbstractSTRtree.prototype.query.apply(this,arguments)},jsts.index.strtree.STRtree.prototype.remove=function(e,t){return jsts.index.strtree.AbstractSTRtree.prototype.remove.call(this,e,t)},jsts.index.strtree.STRtree.prototype.size=function(){return jsts.index.strtree.AbstractSTRtree.prototype.size.call(this)},jsts.index.strtree.STRtree.prototype.depth=function(){return jsts.index.strtree.AbstractSTRtree.prototype.depth.call(this)},jsts.index.strtree.STRtree.prototype.getComparator=function(){return this.yComparator},jsts.index.strtree.STRtree.prototype.nearestNeighbour=function(e){var t=new jsts.index.strtree.BoundablePair(this.getRoot(),this.getRoot(),e);return this.nearestNeighbour4(t)},jsts.index.strtree.STRtree.prototype.nearestNeighbour2=function(e,t,n){var r=new jsts.index.strtree.ItemBoundable(e,t),i=new jsts.index.strtree.BoundablePair(this.getRoot(),r,n);return this.nearestNeighbour4(i)[0]},jsts.index.strtree.STRtree.prototype.nearestNeighbour3=function(e,t){var n=new jsts.index.strtree.BoundablePair(this.getRoot(),e.getRoot(),t);return this.nearestNeighbour4(n)},jsts.index.strtree.STRtree.prototype.nearestNeighbour4=function(e){return this.nearestNeighbour5(e,Double.POSITIVE_INFINITY)},jsts.index.strtree.STRtree.prototype.nearestNeighbour5=function(e,t){var n=t,r=null,i=[];i.push(e);while(!i.isEmpty()&&n>0){var s=i.pop(),o=s.getDistance();if(o>=n)break;s.isLeaves()?(n=o,r=s):s.expandToQueue(i,n)}return[r.getBoundable(0).getItem(),r.getBoundable(1).getItem()]},function(){var e=function(){this.min=0,this.max=0;if(arguments.length===1){var e=arguments[0];this.init(e.min,e.max)}else arguments.length===2&&this.init(arguments[0],arguments[1])};e.prototype.init=function(e,t){this.min=e,this.max=t,e>t&&(this.min=t,this.max=e)},e.prototype.getMin=function(){return this.min},e.prototype.getMax=function(){return this.max},e.prototype.getWidth=function(){return this.max-this.min},e.prototype.expandToInclude=function(e){e.max>this.max&&(this.max=e.max),e.min<this.min&&(this.min=e.min)},e.prototype.overlaps=function(){return arguments.length===1?this.overlapsInterval.apply(this,arguments):this.overlapsMinMax.apply(this,arguments)},e.prototype.overlapsInterval=function(e){return this.overlaps(e.min,e.max)},e.prototype.overlapsMinMax=function(e,t){return this.min>t||this.max<e?!1:!0},e.prototype.contains=function(){var e;return arguments[0]instanceof jsts.index.bintree.Interval?(e=arguments[0],this.containsMinMax(e.min,e.max)):arguments.length===1?this.containsPoint(arguments[0]):this.containsMinMax(arguments[0],arguments[1])},e.prototype.containsMinMax=function(e,t){return e>=this.min&&t<=this.max},e.prototype.containsPoint=function(e){return e>=this.min&&e<=this.max},jsts.index.bintree.Interval=e}(),function(){var e=function(){this.items=new javascript.util.ArrayList,this.subnode=[null,null]};e.getSubnodeIndex=function(e,t){var n=-1;return e.min>=t&&(n=1),e.max<=t&&(n=0),n},e.prototype.getItems=function(){return this.items},e.prototype.add=function(e){this.items.add(e)},e.prototype.addAllItems=function(e){e.addAll(this.items);var t=0,n=2;for(t;t<n;t++)this.subnode[t]!==null&&this.subnode[t].addAllItems(e);return e},e.prototype.addAllItemsFromOverlapping=function(e,t){if(e!==null&&!this.isSearchMatch(e))return;t.addAll(this.items),this.subnode[0]!==null&&this.subnode[0].addAllItemsFromOverlapping(e,t),this.subnode[1]!==null&&this.subnode[1].addAllItemsFromOverlapping(e,t)},e.prototype.remove=function(e,t){if(!this.isSearchMatch(e))return!1;var n=!1,r=0,i=2;for(r;r<i;r++)if(this.subnode[r]!==null){n=this.subnode[r].remove(e,t);if(n){this.subnode[r].isPrunable()&&(this.subnode[r]=null);break}}return n?n:(n=this.items.remove(t),n)},e.prototype.isPrunable=function(){return!this.hasChildren()&&!this.hasItems()},e.prototype.hasChildren=function(){var e=0,t=2;for(e;e<t;e++)if(this.subnode[e]!==null)return!0;return!1},e.prototype.hasItems=function(){return!this.items.isEmpty()},e.prototype.depth=function(){var e=0,t=0,n=2,r;for(t;t<n;t++)this.subnode[t]!==null&&(r=this.subnode[t].depth(),r>e&&(e=r));return e+1},e.prototype.size=function(){var e=0,t=0,n=2;for(t;t<n;t++)this.subnode[t]!==null&&(e+=this.subnode[t].size());return e+this.items.size()},e.prototype.nodeSize=function(){var e=0,t=0,n=2;for(t;t<n;t++)this.subnode[t]!==null&&(e+=this.subnode[t].nodeSize());return e+1},jsts.index.bintree.NodeBase=e}(),function(){var e=jsts.index.DoubleBits,t=jsts.index.bintree.Interval,n=function(e){this.pt=0,this.level=0,this.computeKey(e)};n.computeLevel=function(t){var n=t.getWidth(),r;return r=e.exponent(n)+1,r},n.prototype.getPoint=function(){return this.pt},n.prototype.getLevel=function(){return this.level},n.prototype.getInterval=function(){return this.interval},n.prototype.computeKey=function(e){this.level=n.computeLevel(e),this.interval=new t,this.computeInterval(this.level,e);while(!this.interval.contains(e))this.level+=1,this.computeInterval(this.level,e)},n.prototype.computeInterval=function(t,n){var r=e.powerOf2(t);this.pt=Math.floor(n.getMin()/r)*r,this.interval.init(this.pt,this.pt+r)},jsts.index.bintree.Key=n}(),function(){var e=jsts.index.bintree.NodeBase,t=jsts.index.bintree.Key,n=jsts.index.bintree.Interval,r=function(e,t){this.items=new javascript.util.ArrayList,this.subnode=[null,null],this.interval=e,this.level=t,this.centre=(e.getMin()+e.getMax())/2};r.prototype=new e,r.constructor=r,r.createNode=function(e){var n,i;return n=new t(e),i=new r(n.getInterval(),n.getLevel()),i},r.createExpanded=function(e,t){var i,s;return i=new n(t),e!==null&&i.expandToInclude(e.interval),s=r.createNode(i),e!==null&&s.insert(e),s},r.prototype.getInterval=function(){return this.interval},r.prototype.isSearchMatch=function(e){return e.overlaps(this.interval)},r.prototype.getNode=function(t){var n=e.getSubnodeIndex(t,this.centre),r;return n!=-1?(r=this.getSubnode(n),r.getNode(t)):this},r.prototype.find=function(t){var n=e.getSubnodeIndex(t,this.centre),r;return n===-1?this:this.subnode[n]!==null?(r=this.subnode[n],r.find(t)):this},r.prototype.insert=function(t){var n=e.getSubnodeIndex(t.interval,this.centre),r;t.level===this.level-1?this.subnode[n]=t:(r=this.createSubnode(n),r.insert(t),this.subnode[n]=r)},r.prototype.getSubnode=function(e){return this.subnode[e]===null&&(this.subnode[e]=this.createSubnode(e)),this.subnode[e]},r.prototype.createSubnode=function(e){var t,i,s,o;t=0,i=0;switch(e){case 0:t=this.interval.getMin(),i=this.centre;break;case 1:t=this.centre,i=this.interval.getMax()}return s=new n(t,i),o=new r(s,this.level-1),o},jsts.index.bintree.Node=r}(),function(){var e=jsts.index.bintree.Node,t=jsts.index.bintree.NodeBase,n=function(){this.subnode=[null,null],this.items=new javascript.util.ArrayList};n.prototype=new jsts.index.bintree.NodeBase,n.constructor=n,n.origin=0,n.prototype.insert=function(r,i){var s=t.getSubnodeIndex(r,n.origin),o,u;if(s===-1){this.add(i);return}o=this.subnode[s];if(o===null||!o.getInterval().contains(r))u=e.createExpanded(o,r),this.subnode[s]=u;this.insertContained(this.subnode[s],r,i)},n.prototype.insertContained=function(e,t,n){var r,i;r=jsts.index.IntervalSize.isZeroWidth(t.getMin(),t.getMax()),i=r?e.find(t):e.getNode(t),i.add(n)},n.prototype.isSearchMatch=function(e){return!0},jsts.index.bintree.Root=n}(),function(){var e=jsts.index.bintree.Interval,t=jsts.index.bintree.Root,n=function(){this.root=new t,this.minExtent=1};n.ensureExtent=function(t,n){var r,i;return r=t.getMin(),i=t.getMax(),r!==i?t:(r===i&&(r-=n/2,i=r+n/2),new e(r,i))},n.prototype.depth=function(){return this.root!==null?this.root.depth():0},n.prototype.size=function(){return this.root!==null?this.root.size():0},n.prototype.nodeSize=function(){return this.root!==null?this.root.nodeSize():0},n.prototype.insert=function(e,t){this.collectStats(e);var r=n.ensureExtent(e,this.minExtent);this.root.insert(r,t)},n.prototype.remove=function(e,t){var r=n.ensureExtent(e,this.minExtent);return this.root.remove(r,t)},n.prototype.iterator=function(){var e=new javascript.util.ArrayList;return this.root.addAllItems(e),e.iterator()},n.prototype.query=function(){if(arguments.length!==2){var t=arguments[0];return!t instanceof e&&(t=new e(t,t)),this.queryInterval(t)}this.queryAndAdd(arguments[0],arguments[1])},n.prototype.queryInterval=function(e){var t=new javascript.util.ArrayList;return this.query(e,t),t},n.prototype.queryAndAdd=function(e,t){this.root.addAllItemsFromOverlapping(e,t)},n.prototype.collectStats=function(e){var t=e.getWidth();t<this.minExtent&&t>0&&(this.minExtent=t)},jsts.index.bintree.Bintree=n}(),jsts.noding.SegmentIntersector=function(){},jsts.noding.SegmentIntersector.prototype.processIntersections=jsts.abstractFunc,jsts.noding.SegmentIntersector.prototype.isDone=jsts.abstractFunc,function(){var e=jsts.noding.SegmentIntersector,t=javascript.util.ArrayList;jsts.noding.InteriorIntersectionFinder=function(e){this.li=e,this.intersections=new t,this.interiorIntersection=null},jsts.noding.InteriorIntersectionFinder.prototype=new e,jsts.noding.InteriorIntersectionFinder.constructor=jsts.noding.InteriorIntersectionFinder,jsts.noding.InteriorIntersectionFinder.prototype.findAllIntersections=!1,jsts.noding.InteriorIntersectionFinder.prototype.isCheckEndSegmentsOnly=!1,jsts.noding.InteriorIntersectionFinder.prototype.li=null,jsts.noding.InteriorIntersectionFinder.prototype.interiorIntersection=null,jsts.noding.InteriorIntersectionFinder.prototype.intSegments=null,jsts.noding.InteriorIntersectionFinder.prototype.intersections=null,jsts.noding.InteriorIntersectionFinder.prototype.setFindAllIntersections=function(e){this.findAllIntersections=e},jsts.noding.InteriorIntersectionFinder.prototype.getIntersections=function(){return intersections},jsts.noding.InteriorIntersectionFinder.prototype.setCheckEndSegmentsOnly=function(e){this.isCheckEndSegmentsOnly=e},jsts.noding.InteriorIntersectionFinder.prototype.hasIntersection=function(){return this.interiorIntersection!=null},jsts.noding.InteriorIntersectionFinder.prototype.getInteriorIntersection=function(){return this.interiorIntersection},jsts.noding.InteriorIntersectionFinder.prototype.getIntersectionSegments=function(){return this.intSegments},jsts.noding.InteriorIntersectionFinder.prototype.processIntersections=function(e,t,n,r){if(this.hasIntersection())return;if(e==n&&t==r)return;if(this.isCheckEndSegmentsOnly){var i=this.isEndSegment(e,t)||isEndSegment(n,r);if(!i)return}var s=e.getCoordinates()[t],o=e.getCoordinates()[t+1],u=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this.li.computeIntersection(s,o,u,a),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=[],this.intSegments[0]=s,this.intSegments[1]=o,this.intSegments[2]=u,this.intSegments[3]=a,this.interiorIntersection=this.li.getIntersection(0),this.intersections.add(this.interiorIntersection))},jsts.noding.InteriorIntersectionFinder.prototype.isEndSegment=function(e,t){return t==0?!0:t>=e.size()-2?!0:!1},jsts.noding.InteriorIntersectionFinder.prototype.isDone=function(){return this.findAllIntersections?!1:this.interiorIntersection!=null}}(),jsts.noding.IntersectionAdder=function(e){this.li=e},jsts.noding.IntersectionAdder.prototype=new jsts.noding.SegmentIntersector,jsts.noding.IntersectionAdder.constructor=jsts.noding.IntersectionAdder,jsts.noding.IntersectionAdder.isAdjacentSegments=function(e,t){return Math.abs(e-t)===1},jsts.noding.IntersectionAdder.prototype._hasIntersection=!1,jsts.noding.IntersectionAdder.prototype.hasProper=!1,jsts.noding.IntersectionAdder.prototype.hasProperInterior=!1,jsts.noding.IntersectionAdder.prototype.hasInterior=!1,jsts.noding.IntersectionAdder.prototype.properIntersectionPoint=null,jsts.noding.IntersectionAdder.prototype.li=null,jsts.noding.IntersectionAdder.prototype.isSelfIntersection=null,jsts.noding.IntersectionAdder.prototype.numIntersections=0,jsts.noding.IntersectionAdder.prototype.numInteriorIntersections=0,jsts.noding.IntersectionAdder.prototype.numProperIntersections=0,jsts.noding.IntersectionAdder.prototype.numTests=0,jsts.noding.IntersectionAdder.prototype.getLineIntersector=function(){return this.li},jsts.noding.IntersectionAdder.prototype.getProperIntersectionPoint=function(){return this.properIntersectionPoint},jsts.noding.IntersectionAdder.prototype.hasIntersection=function(){return this._hasIntersection},jsts.noding.IntersectionAdder.prototype.hasProperIntersection=function(){return this.hasProper},jsts.noding.IntersectionAdder.prototype.hasProperInteriorIntersection=function(){return this.hasProperInterior},jsts.noding.IntersectionAdder.prototype.hasInteriorIntersection=function(){return this.hasInterior},jsts.noding.IntersectionAdder.prototype.isTrivialIntersection=function(e,t,n,r){if(e==n&&this.li.getIntersectionNum()==1){if(jsts.noding.IntersectionAdder.isAdjacentSegments(t,r))return!0;if(e.isClosed()){var i=e.size()-1;if(t===0&&r===i||r===0&&t===i)return!0}}return!1},jsts.noding.IntersectionAdder.prototype.processIntersections=function(e,t,n,r){if(e===n&&t===r)return;this.numTests++;var i=e.getCoordinates()[t],s=e.getCoordinates()[t+1],o=n.getCoordinates()[r],u=n.getCoordinates()[r+1];this.li.computeIntersection(i,s,o,u),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,e.addIntersections(this.li,t,0),n.addIntersections(this.li,r,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))},jsts.noding.IntersectionAdder.prototype.isDone=function(){return!1},jsts.noding.IntersectionFinderAdder=function(e){this
.li=e,this.interiorIntersections=new javascript.util.ArrayList},jsts.noding.IntersectionFinderAdder.prototype=new jsts.noding.SegmentIntersector,jsts.noding.IntersectionFinderAdder.constructor=jsts.noding.IntersectionFinderAdder,jsts.noding.IntersectionFinderAdder.prototype.li=null,jsts.noding.IntersectionFinderAdder.prototype.interiorIntersections=null,jsts.noding.IntersectionFinderAdder.prototype.getInteriorIntersections=function(){return this.interiorIntersections},jsts.noding.IntersectionFinderAdder.prototype.processIntersections=function(e,t,n,r){if(e===n&&t===r)return;var i=e.getCoordinates()[t],s=e.getCoordinates()[t+1],o=n.getCoordinates()[r],u=n.getCoordinates()[r+1];this.li.computeIntersection(i,s,o,u);if(this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var a=0;a<this.li.getIntersectionNum();a++)this.interiorIntersections.add(this.li.getIntersection(a));e.addIntersections(this.li,t,0),n.addIntersections(this.li,r,1)}},jsts.noding.IntersectionFinderAdder.prototype.isDone=function(){return!1},jsts.noding.SegmentString=function(){},jsts.noding.SegmentString.prototype.getData=jsts.abstractFunc,jsts.noding.SegmentString.prototype.setData=jsts.abstractFunc,jsts.noding.SegmentString.prototype.size=jsts.abstractFunc,jsts.noding.SegmentString.prototype.getCoordinate=jsts.abstractFunc,jsts.noding.SegmentString.prototype.getCoordinates=jsts.abstractFunc,jsts.noding.SegmentString.prototype.isClosed=jsts.abstractFunc,function(){jsts.noding.BasicSegmentString=function(e,t){this.pts=e,this.data=t},jsts.noding.BasicSegmentString.prototype=new jsts.noding.SegmentString,jsts.noding.BasicSegmentString.prototype.pts=null,jsts.noding.BasicSegmentString.prototype.data=null,jsts.noding.BasicSegmentString.prototype.getData=function(){return this.data},jsts.noding.BasicSegmentString.prototype.setData=function(e){this.data=e},jsts.noding.BasicSegmentString.prototype.size=function(){return this.pts.length},jsts.noding.BasicSegmentString.prototype.getCoordinate=function(e){return this.pts[e]},jsts.noding.BasicSegmentString.prototype.getCoordinates=function(){return this.pts},jsts.noding.BasicSegmentString.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},jsts.noding.BasicSegmentString.prototype.getSegmentOctant=function(e){return e==this.pts.length-1?-1:jsts.noding.Octant.octant(this.getCoordinate(e),this.getCoordinate(e+1))}}(),jsts.noding.NodableSegmentString=function(){},jsts.noding.NodableSegmentString.prototype=new jsts.noding.SegmentString,jsts.noding.NodableSegmentString.prototype.addIntersection=jsts.abstractFunc,jsts.noding.NodedSegmentString=function(e,t){this.nodeList=new jsts.noding.SegmentNodeList(this),this.pts=e,this.data=t},jsts.noding.NodedSegmentString.prototype=new jsts.noding.NodableSegmentString,jsts.noding.NodedSegmentString.constructor=jsts.noding.NodedSegmentString,jsts.noding.NodedSegmentString.getNodedSubstrings=function(e){if(arguments.length===2){jsts.noding.NodedSegmentString.getNodedSubstrings2.apply(this,arguments);return}var t=new javascript.util.ArrayList;return jsts.noding.NodedSegmentString.getNodedSubstrings2(e,t),t},jsts.noding.NodedSegmentString.getNodedSubstrings2=function(e,t){for(var n=e.iterator();n.hasNext();){var r=n.next();r.getNodeList().addSplitEdges(t)}},jsts.noding.NodedSegmentString.prototype.nodeList=null,jsts.noding.NodedSegmentString.prototype.pts=null,jsts.noding.NodedSegmentString.prototype.data=null,jsts.noding.NodedSegmentString.prototype.getData=function(){return this.data},jsts.noding.NodedSegmentString.prototype.setData=function(e){this.data=e},jsts.noding.NodedSegmentString.prototype.getNodeList=function(){return this.nodeList},jsts.noding.NodedSegmentString.prototype.size=function(){return this.pts.length},jsts.noding.NodedSegmentString.prototype.getCoordinate=function(e){return this.pts[e]},jsts.noding.NodedSegmentString.prototype.getCoordinates=function(){return this.pts},jsts.noding.NodedSegmentString.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},jsts.noding.NodedSegmentString.prototype.getSegmentOctant=function(e){return e===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))},jsts.noding.NodedSegmentString.prototype.safeOctant=function(e,t){return e.equals2D(t)?0:jsts.noding.Octant.octant(e,t)},jsts.noding.NodedSegmentString.prototype.addIntersections=function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++)this.addIntersection(e,t,n,r)},jsts.noding.NodedSegmentString.prototype.addIntersection=function(e,t,n,r){if(e instanceof jsts.geom.Coordinate){this.addIntersection2.apply(this,arguments);return}var i=new jsts.geom.Coordinate(e.getIntersection(r));this.addIntersection2(i,t)},jsts.noding.NodedSegmentString.prototype.addIntersection2=function(e,t){this.addIntersectionNode(e,t)},jsts.noding.NodedSegmentString.prototype.addIntersectionNode=function(e,t){var n=t,r=n+1;if(r<this.pts.length){var i=this.pts[r];e.equals2D(i)&&(n=r)}var s=this.nodeList.add(e,n);return s},jsts.noding.NodedSegmentString.prototype.toString=function(){var e=new jsts.geom.GeometryFactory;return(new jsts.io.WKTWriter).write(e.createLineString(this.pts))},function(){jsts.noding.Noder=function(){},jsts.noding.Noder.prototype.computeNodes=jsts.abstractFunc,jsts.noding.Noder.prototype.getNodedSubstrings=jsts.abstractFunc}(),function(){var e=jsts.noding.Noder;jsts.noding.SinglePassNoder=function(){},jsts.noding.SinglePassNoder.prototype=new e,jsts.noding.SinglePassNoder.constructor=jsts.noding.SinglePassNoder,jsts.noding.SinglePassNoder.prototype.segInt=null,jsts.noding.SinglePassNoder.prototype.setSegmentIntersector=function(e){this.segInt=e}}(),function(){var e=jsts.index.chain.MonotoneChainOverlapAction,t=jsts.noding.SinglePassNoder,n=jsts.index.strtree.STRtree,r=jsts.noding.NodedSegmentString,i=jsts.index.chain.MonotoneChainBuilder,s=function(e){this.si=e};s.prototype=new e,s.constructor=s,s.prototype.si=null,s.prototype.overlap=function(e,t,n,r){var i=e.getContext(),s=n.getContext();this.si.processIntersections(i,t,s,r)},jsts.noding.MCIndexNoder=function(){this.monoChains=[],this.index=new n},jsts.noding.MCIndexNoder.prototype=new t,jsts.noding.MCIndexNoder.constructor=jsts.noding.MCIndexNoder,jsts.noding.MCIndexNoder.prototype.monoChains=null,jsts.noding.MCIndexNoder.prototype.index=null,jsts.noding.MCIndexNoder.prototype.idCounter=0,jsts.noding.MCIndexNoder.prototype.nodedSegStrings=null,jsts.noding.MCIndexNoder.prototype.nOverlaps=0,jsts.noding.MCIndexNoder.prototype.getMonotoneChains=function(){return this.monoChains},jsts.noding.MCIndexNoder.prototype.getIndex=function(){return this.index},jsts.noding.MCIndexNoder.prototype.getNodedSubstrings=function(){return r.getNodedSubstrings(this.nodedSegStrings)},jsts.noding.MCIndexNoder.prototype.computeNodes=function(e){this.nodedSegStrings=e;for(var t=e.iterator();t.hasNext();)this.add(t.next());this.intersectChains()},jsts.noding.MCIndexNoder.prototype.intersectChains=function(){var e=new s(this.segInt);for(var t=0;t<this.monoChains.length;t++){var n=this.monoChains[t],r=this.index.query(n.getEnvelope());for(var i=0;i<r.length;i++){var o=r[i];o.getId()>n.getId()&&(n.computeOverlaps(o,e),this.nOverlaps++);if(this.segInt.isDone())return}}},jsts.noding.MCIndexNoder.prototype.add=function(e){var t=i.getChains(e.getCoordinates(),e);for(var n=0;n<t.length;n++){var r=t[n];r.setId(this.idCounter++),this.index.insert(r.getEnvelope(),r),this.monoChains.push(r)}}}(),function(){var e=jsts.algorithm.RobustLineIntersector,t=jsts.noding.InteriorIntersectionFinder,n=jsts.noding.MCIndexNoder;jsts.noding.FastNodingValidator=function(t){this.li=new e,this.segStrings=t},jsts.noding.FastNodingValidator.prototype.li=null,jsts.noding.FastNodingValidator.prototype.segStrings=null,jsts.noding.FastNodingValidator.prototype.findAllIntersections=!1,jsts.noding.FastNodingValidator.prototype.segInt=null,jsts.noding.FastNodingValidator.prototype._isValid=!0,jsts.noding.FastNodingValidator.prototype.setFindAllIntersections=function(e){this.findAllIntersections=e},jsts.noding.FastNodingValidator.prototype.getIntersections=function(){return segInt.getIntersections()},jsts.noding.FastNodingValidator.prototype.isValid=function(){return this.execute(),this._isValid},jsts.noding.FastNodingValidator.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var e=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+jsts.io.WKTWriter.toLineString(e[0],e[1])+" and "+jsts.io.WKTWriter.toLineString(e[2],e[3])},jsts.noding.FastNodingValidator.prototype.checkValid=function(){this.execute();if(!this._isValid)throw new jsts.error.TopologyError(this.getErrorMessage(),this.segInt.getInteriorIntersection())},jsts.noding.FastNodingValidator.prototype.execute=function(){if(this.segInt!=null)return;this.checkInteriorIntersections()},jsts.noding.FastNodingValidator.prototype.checkInteriorIntersections=function(){this._isValid=!0,this.segInt=new t(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var e=new n;e.setSegmentIntersector(this.segInt),e.computeNodes(this.segStrings);if(this.segInt.hasIntersection()){this._isValid=!1;return}}}(),jsts.noding.Octant=function(){throw jsts.error.AbstractMethodInvocationError()},jsts.noding.Octant.octant=function(e,t){if(e instanceof jsts.geom.Coordinate)return jsts.noding.Octant.octant2.apply(this,arguments);if(e===0&&t===0)throw new jsts.error.IllegalArgumentError("Cannot compute the octant for point ( "+e+", "+t+" )");var n=Math.abs(e),r=Math.abs(t);return e>=0?t>=0?n>=r?0:1:n>=r?7:6:t>=0?n>=r?3:2:n>=r?4:5},jsts.noding.Octant.octant2=function(e,t){var n=t.x-e.x,r=t.y-e.y;if(n===0&&r===0)throw new jsts.error.IllegalArgumentError("Cannot compute the octant for two identical points "+e);return jsts.noding.Octant.octant(n,r)},jsts.noding.OrientedCoordinateArray=function(e){this.pts=e,this._orientation=jsts.noding.OrientedCoordinateArray.orientation(e)},jsts.noding.OrientedCoordinateArray.prototype.pts=null,jsts.noding.OrientedCoordinateArray.prototype._orientation=undefined,jsts.noding.OrientedCoordinateArray.orientation=function(e){return jsts.geom.CoordinateArrays.increasingDirection(e)===1},jsts.noding.OrientedCoordinateArray.prototype.compareTo=function(e){var t=e,n=jsts.noding.OrientedCoordinateArray.compareOriented(this.pts,this._orientation,t.pts,t._orientation);return n},jsts.noding.OrientedCoordinateArray.compareOriented=function(e,t,n,r){var i=t?1:-1,s=r?1:-1,o=t?e.length:-1,u=r?n.length:-1,a=t?0:e.length-1,f=r?0:n.length-1,l=0;for(;;){var c=e[a].compareTo(n[f]);if(c!==0)return c;a+=i,f+=s;var h=a===o,p=f===u;if(h&&!p)return-1;if(!h&&p)return 1;if(h&&p)return 0}},jsts.noding.ScaledNoder=function(e,t,n,r){this.offsetX=n?n:0,this.offsetY=r?r:0,this.noder=e,this.scaleFactor=t,this.isScaled=!this.isIntegerPrecision()},jsts.noding.ScaledNoder.prototype=new jsts.noding.Noder,jsts.noding.ScaledNoder.constructor=jsts.noding.ScaledNoder,jsts.noding.ScaledNoder.prototype.noder=null,jsts.noding.ScaledNoder.prototype.scaleFactor=undefined,jsts.noding.ScaledNoder.prototype.offsetX=undefined,jsts.noding.ScaledNoder.prototype.offsetY=undefined,jsts.noding.ScaledNoder.prototype.isScaled=!1,jsts.noding.ScaledNoder.prototype.isIntegerPrecision=function(){return this.scaleFactor===1},jsts.noding.ScaledNoder.prototype.getNodedSubstrings=function(){var e=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(e),e},jsts.noding.ScaledNoder.prototype.computeNodes=function(e){var t=e;this.isScaled&&(t=this.scale(e)),this.noder.computeNodes(t)},jsts.noding.ScaledNoder.prototype.scale=function(e){if(e instanceof Array)return this.scale2(e);var t=new javascript.util.ArrayList;for(var n=e.iterator();n.hasNext();){var r=n.next();t.add(new jsts.noding.NodedSegmentString(this.scale(r.getCoordinates()),r.getData()))}return t},jsts.noding.ScaledNoder.prototype.scale2=function(e){var t=[];for(var n=0;n<e.length;n++)t[n]=new jsts.geom.Coordinate(Math.round((e[n].x-this.offsetX)*this.scaleFactor),Math.round((e[n].y-this.offsetY)*this.scaleFactor));var r=jsts.geom.CoordinateArrays.removeRepeatedPoints(t);return r},jsts.noding.ScaledNoder.prototype.rescale=function(e){if(e instanceof Array){this.rescale2(e);return}for(var t=e.iterator();t.hasNext();){var n=t.next();this.rescale(n.getCoordinates())}},jsts.noding.ScaledNoder.prototype.rescale2=function(e){for(var t=0;t<e.length;t++)e[t].x=e[t].x/this.scaleFactor+this.offsetX,e[t].y=e[t].y/this.scaleFactor+this.offsetY},jsts.noding.SegmentNode=function(e,t,n,r){this.segString=e,this.coord=new jsts.geom.Coordinate(t),this.segmentIndex=n,this.segmentOctant=r,this._isInterior=!t.equals2D(e.getCoordinate(n))},jsts.noding.SegmentNode.prototype.segString=null,jsts.noding.SegmentNode.prototype.coord=null,jsts.noding.SegmentNode.prototype.segmentIndex=null,jsts.noding.SegmentNode.prototype.segmentOctant=null,jsts.noding.SegmentNode.prototype._isInterior=null,jsts.noding.SegmentNode.prototype.getCoordinate=function(){return this.coord},jsts.noding.SegmentNode.prototype.isInterior=function(){return this._isInterior},jsts.noding.SegmentNode.prototype.isEndPoint=function(e){return this.segmentIndex===0&&!this._isInterior?!0:this.segmentIndex===this.maxSegmentIndex?!0:!1},jsts.noding.SegmentNode.prototype.compareTo=function(e){var t=e;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:jsts.noding.SegmentPointComparator.compare(this.segmentOctant,this.coord,t.coord)},jsts.noding.SegmentNodeList=function(e){this.nodeMap=new javascript.util.TreeMap,this.edge=e},jsts.noding.SegmentNodeList.prototype.nodeMap=null,jsts.noding.SegmentNodeList.prototype.iterator=function(){return this.nodeMap.values().iterator()},jsts.noding.SegmentNodeList.prototype.edge=null,jsts.noding.SegmentNodeList.prototype.getEdge=function(){return this.edge},jsts.noding.SegmentNodeList.prototype.add=function(e,t){var n=new jsts.noding.SegmentNode(this.edge,e,t,this.edge.getSegmentOctant(t)),r=this.nodeMap.get(n);return r!==null?(jsts.util.Assert.isTrue(r.coord.equals2D(e),"Found equal nodes with different coordinates"),r):(this.nodeMap.put(n,n),n)},jsts.noding.SegmentNodeList.prototype.addEndpoints=function(){var e=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(e),e)},jsts.noding.SegmentNodeList.prototype.addCollapsedNodes=function(){var e=[];this.findCollapsesFromInsertedNodes(e),this.findCollapsesFromExistingVertices(e);for(var t=0;t<e.length;t++){var n=e[t];this.add(this.edge.getCoordinate(n),n)}},jsts.noding.SegmentNodeList.prototype.findCollapsesFromExistingVertices=function(e){for(var t=0;t<this.edge.size()-2;t++){var n=this.edge.getCoordinate(t),r=this.edge.getCoordinate(t+1),i=this.edge.getCoordinate(t+2);n.equals2D(i)&&e.push(t+1)}},jsts.noding.SegmentNodeList.prototype.findCollapsesFromInsertedNodes=function(e){var t=[null],n=this.iterator(),r=n.next();while(n.hasNext()){var i=n.next(),s=this.findCollapseIndex(r,i,t);s&&e.push(t[0]),r=i}},jsts.noding.SegmentNodeList.prototype.findCollapseIndex=function(e,t,n){if(!e.coord.equals2D(t.coord))return!1;var r=t.segmentIndex-e.segmentIndex;return t.isInterior()||r--,r===1?(n[0]=e.segmentIndex+1,!0):!1},jsts.noding.SegmentNodeList.prototype.addSplitEdges=function(e){this.addEndpoints(),this.addCollapsedNodes();var t=this.iterator(),n=t.next();while(t.hasNext()){var r=t.next(),i=this.createSplitEdge(n,r);e.add(i),n=r}},jsts.noding.SegmentNodeList.prototype.checkSplitEdgesCorrectness=function(e){var t=edge.getCoordinates(),n=e[0],r=n.getCoordinate(0);if(!r.equals2D(t[0]))throw new Error("bad split edge start point at "+r);var i=e[e.length-1],s=i.getCoordinates(),o=s[s.length-1];if(!o.equals2D(t[t.length-1]))throw new Error("bad split edge end point at "+o)},jsts.noding.SegmentNodeList.prototype.createSplitEdge=function(e,t){var n=t.segmentIndex-e.segmentIndex+2,r=this.edge.getCoordinate(t.segmentIndex),i=t.isInterior()||!t.coord.equals2D(r);i||n--;var s=[],o=0;s[o++]=new jsts.geom.Coordinate(e.coord);for(var u=e.segmentIndex+1;u<=t.segmentIndex;u++)s[o++]=this.edge.getCoordinate(u);return i&&(s[o]=t.coord),new jsts.noding.NodedSegmentString(s,this.edge.getData())},jsts.noding.SegmentPointComparator=function(){},jsts.noding.SegmentPointComparator.compare=function(e,t,n){if(t.equals2D(n))return 0;var r=jsts.noding.SegmentPointComparator.relativeSign(t.x,n.x),i=jsts.noding.SegmentPointComparator.relativeSign(t.y,n.y);switch(e){case 0:return jsts.noding.SegmentPointComparator.compareValue(r,i);case 1:return jsts.noding.SegmentPointComparator.compareValue(i,r);case 2:return jsts.noding.SegmentPointComparator.compareValue(i,-r);case 3:return jsts.noding.SegmentPointComparator.compareValue(-r,i);case 4:return jsts.noding.SegmentPointComparator.compareValue(-r,-i);case 5:return jsts.noding.SegmentPointComparator.compareValue(-i,-r);case 6:return jsts.noding.SegmentPointComparator.compareValue(-i,r);case 7:return jsts.noding.SegmentPointComparator.compareValue(r,-i)}return 0},jsts.noding.SegmentPointComparator.relativeSign=function(e,t){return e<t?-1:e>t?1:0},jsts.noding.SegmentPointComparator.compareValue=function(e,t){return e<0?-1:e>0?1:t<0?-1:t>0?1:0},jsts.noding.snapround.HotPixel=function(e,t,n){this.corner=[],this.originalPt=e,this.pt=e,this.scaleFactor=t,this.li=n,this.scaleFactor!==1&&(this.pt=new jsts.geom.Coordinate(this.scale(e.x),this.scale(e.y)),this.p0Scaled=new jsts.geom.Coordinate,this.p1Scaled=new jsts.geom.Coordinate),this.initCorners(this.pt)},jsts.noding.snapround.HotPixel.prototype.li=null,jsts.noding.snapround.HotPixel.prototype.pt=null,jsts.noding.snapround.HotPixel.prototype.originalPt=null,jsts.noding.snapround.HotPixel.prototype.ptScaled=null,jsts.noding.snapround.HotPixel.prototype.p0Scaled=null,jsts.noding.snapround.HotPixel.prototype.p1Scaled=null,jsts.noding.snapround.HotPixel.prototype.scaleFactor=undefined,jsts.noding.snapround.HotPixel.prototype.minx=undefined,jsts.noding.snapround.HotPixel.prototype.maxx=undefined,jsts.noding.snapround.HotPixel.prototype.miny=undefined,jsts.noding.snapround.HotPixel.prototype.maxy=undefined,jsts.noding.snapround.HotPixel.prototype.corner=null,jsts.noding.snapround.HotPixel.prototype.safeEnv=null,jsts.noding.snapround.HotPixel.prototype.getCoordinate=function(){return this.originalPt},jsts.noding.snapround.HotPixel.SAFE_ENV_EXPANSION_FACTOR=.75,jsts.noding.snapround.HotPixel.prototype.getSafeEnvelope=function(){if(this.safeEnv===null){var e=jsts.noding.snapround.HotPixel.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new jsts.geom.Envelope(this.originalPt.x-e,this.originalPt.x+e,this.originalPt.y-e,this.originalPt.y+e)}return this.safeEnv},jsts.noding.snapround.HotPixel.prototype.initCorners=function(e){var t=.5;this.minx=e.x-t,this.maxx=e.x+t,this.miny=e.y-t,this.maxy=e.y+t,this.corner[0]=new jsts.geom.Coordinate(this.maxx,this.maxy),this.corner[1]=new jsts.geom.Coordinate(this.minx,this.maxy),this.corner[2]=new jsts.geom.Coordinate(this.minx,this.miny),this.corner[3]=new jsts.geom.Coordinate(this.maxx,this.miny)},jsts.noding.snapround.HotPixel.prototype.scale=function(e){return Math.round(e*this.scaleFactor)},jsts.noding.snapround.HotPixel.prototype.intersects=function(e,t){return this.scaleFactor===1?this.intersectsScaled(e,t):(this.copyScaled(e,this.p0Scaled),this.copyScaled(t,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))},jsts.noding.snapround.HotPixel.prototype.copyScaled=function(e,t){t.x=this.scale(e.x),t.y=this.scale(e.y)},jsts.noding.snapround.HotPixel.prototype.intersectsScaled=function(e,t){var n=Math.min(e.x,t.x),r=Math.max(e.x,t.x),i=Math.min(e.y,t.y),s=Math.max(e.y,t.y),o=this.maxx<n||this.minx>r||this.maxy<i||this.miny>s;if(o)return!1;var u=this.intersectsToleranceSquare(e,t);return jsts.util.Assert.isTrue(!o||!u,"Found bad envelope test"),u},jsts.noding.snapround.HotPixel.prototype.intersectsToleranceSquare=function(e,t){var n=!1,r=!1;return this.li.computeIntersection(e,t,this.corner[0],this.corner[1]),this.li.isProper()?!0:(this.li.computeIntersection(e,t,this.corner[1],this.corner[2]),this.li.isProper()?!0:(this.li.hasIntersection()&&(n=!0),this.li.computeIntersection(e,t,this.corner[2],this.corner[3]),this.li.isProper()?!0:(this.li.hasIntersection()&&(r=!0),this.li.computeIntersection(e,t,this.corner[3],this.corner[0]),this.li.isProper()?!0:n&&r?!0:e.equals(this.pt)?!0:t.equals(this.pt)?!0:!1)))},jsts.noding.snapround.HotPixel.prototype.intersectsPixelClosure=function(e,t){return this.li.computeIntersection(e,t,this.corner[0],this.corner[1]),this.li.hasIntersection()?!0:(this.li.computeIntersection(e,t,this.corner[1],this.corner[2]),this.li.hasIntersection()?!0:(this.li.computeIntersection(e,t,this.corner[2],this.corner[3]),this.li.hasIntersection()?!0:(this.li.computeIntersection(e,t,this.corner[3],this.corner[0]),this.li.hasIntersection()?!0:!1)))},jsts.noding.snapround.HotPixel.prototype.addSnappedNode=function(e,t){var n=e.getCoordinate(t),r=e.getCoordinate(t+1);return this.intersects(n,r)?(e.addIntersection(this.getCoordinate(),t),!0):!1},function(){var e=function(e,t,n){this.hotPixel=e,this.parentEdge=t,this.vertexIndex=n};e.prototype=new jsts.index.chain.MonotoneChainSelectAction,e.constructor=e,e.prototype.hotPixel=null,e.prototype.parentEdge=null,e.prototype.vertexIndex=null,e.prototype._isNodeAdded=!1,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(e,t){var n=e.getContext();if(this.parentEdge!==null&&n===this.parentEdge&&t===this.vertexIndex)return;this._isNodeAdded=this.hotPixel.addSnappedNode(n,t)},jsts.noding.snapround.MCIndexPointSnapper=function(e){this.index=e},jsts.noding.snapround.MCIndexPointSnapper.prototype.index=null,jsts.noding.snapround.MCIndexPointSnapper.prototype.snap=function(t,n,r){if(arguments.length===1){this.snap2.apply(this,arguments);return}var i=t.getSafeEnvelope(),s=new e(t,n,r);return this.index.query(i,{visitItem:function(e){e.select(i,s)}}),s.isNodeAdded()},jsts.noding.snapround.MCIndexPointSnapper.prototype.snap2=function(e){return this.snap(e,null,-1)}}(),jsts.noding.snapround.MCIndexSnapRounder=function(e){this.pm=e,this.li=new jsts.algorithm.RobustLineIntersector,this.li.setPrecisionModel(e),this.scaleFactor=e.getScale()},jsts.noding.snapround.MCIndexSnapRounder.prototype=new jsts.noding.Noder,jsts.noding.snapround.MCIndexSnapRounder.constructor=jsts.noding.snapround.MCIndexSnapRounder,jsts.noding.snapround.MCIndexSnapRounder.prototype.pm=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.li=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.scaleFactor=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.noder=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.pointSnapper=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.nodedSegStrings=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.getNodedSubstrings=function(){return jsts.noding.NodedSegmentString.getNodedSubstrings(this.nodedSegStrings)},jsts.noding.snapround.MCIndexSnapRounder.prototype.computeNodes=function(e){this.nodedSegStrings=e,this.noder=new jsts.noding.MCIndexNoder,this.pointSnapper=new jsts.noding.snapround.MCIndexPointSnapper(this.noder.getIndex()),this.snapRound(e,this.li)},jsts.noding.snapround.MCIndexSnapRounder.prototype.snapRound=function(e,t){var n=this.findInteriorIntersections(e,t);this.computeIntersectionSnaps(n),this.computeVertexSnaps(e)},jsts.noding.snapround.MCIndexSnapRounder.prototype.findInteriorIntersections=function(e,t){var n=new jsts.noding.IntersectionFinderAdder(t);return this.noder.setSegmentIntersector(n),this.noder.computeNodes(e),n.getInteriorIntersections()},jsts.noding.snapround.MCIndexSnapRounder.prototype.computeIntersectionSnaps=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),r=new jsts.noding.snapround.HotPixel(n,this.scaleFactor,this.li);this.pointSnapper.snap(r)}},jsts.noding.snapround.MCIndexSnapRounder.prototype.computeVertexSnaps=function(e){if(e instanceof jsts.noding.NodedSegmentString){this.computeVertexSnaps2.apply(this,arguments);return}for(var t=e.iterator();t.hasNext();){var n=t.next();this.computeVertexSnaps(n)}},jsts.noding.snapround.MCIndexSnapRounder.prototype.computeVertexSnaps2=function(e){var t=e.getCoordinates();for(var n=0;n<t.length-1;n++){var r=new jsts.noding.snapround.HotPixel(t[n],this.scaleFactor,this.li),i=this.pointSnapper.snap(r,e,n);i&&e.addIntersection(t[n],n)}},function(){jsts.geomgraph.Position=function(){},jsts.geomgraph.Position.ON=0,jsts.geomgraph.Position.LEFT=1,jsts.geomgraph.Position.RIGHT=2,jsts.geomgraph.Position.opposite=function(e){return e===jsts.geomgraph.Position.LEFT?jsts.geomgraph.Position.RIGHT:e===jsts.geomgraph.Position.RIGHT?jsts.geomgraph.Position.LEFT:e}}(),function(){var e=jsts.geom.Location,t=jsts.geomgraph.Position;jsts.geomgraph.Depth=function(){this.depth=[[],[]];for(var e=0;e<2;e++)for(var t=0;t<3;t++)this.depth[e][t]=jsts.geomgraph.Depth.NULL_VALUE},jsts.geomgraph.Depth.NULL_VALUE=-1,jsts.geomgraph.Depth.depthAtLocation=function(t){return t===e.EXTERIOR?0:t===e.INTERIOR?1:jsts.geomgraph.Depth.NULL_VALUE},jsts.geomgraph.Depth.prototype.depth=null,jsts.geomgraph.Depth.prototype.getDepth=function(e,t){return this.depth[e][t]},jsts.geomgraph.Depth.prototype.setDepth=function(e,t,n){this.depth[e][t]=n},jsts.geomgraph.Depth.prototype.getLocation=function(t,n){return this.depth[t][n]<=0?e.EXTERIOR:e.INTERIOR},jsts.geomgraph.Depth.prototype.add=function(t,n,r){r===e.INTERIOR&&this.depth[t][n]++},jsts.geomgraph.Depth.prototype.isNull=function(){if(arguments.length>0)return this.isNull2.apply(this,arguments);for(var e=0;e<2;e++)for(var t=0;t<3;t++)if(this.depth[e][t]!==jsts.geomgraph.Depth.NULL_VALUE)return!1;return!0},jsts.geomgraph.Depth.prototype.isNull2=function(e){return arguments.length>1?this.isNull3.apply(this,arguments):this.depth[e][1]==jsts.geomgraph.Depth.NULL_VALUE},jsts.geomgraph.Depth.prototype.isNull3=function(e,t){return this.depth[e][t]==jsts.geomgraph.Depth.NULL_VALUE},jsts.geomgraph.Depth.prototype.add=function(t){for(var n=0;n<2;n++)for(var r=1;r<3;r++){var i=t.getLocation(n,r);if(i===e.EXTERIOR||i===e.INTERIOR)this.isNull(n,r)?this.depth[n][r]=jsts.geomgraph.Depth.depthAtLocation(i):this.depth[n][r]+=jsts.geomgraph.Depth.depthAtLocation(i)}},jsts.geomgraph.Depth.prototype.getDelta=function(e){return this.depth[e][t.RIGHT]-this.depth[e][t.LEFT]},jsts.geomgraph.Depth.prototype.normalize=function(){for(var e=0;e<2;e++)if(!this.isNull(e)){var t=this.depth[e][1];this.depth[e][2]<t&&(t=this.depth[e][2]),t<0&&(t=0);for(var n=1;n<3;n++){var r=0;this.depth[e][n]>t&&(r=1),this.depth[e][n]=r}}},jsts.geomgraph.Depth.prototype.toString=function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]}}(),function(){var e=jsts.util.Assert;jsts.geomgraph.GraphComponent=function(e){this.label=e},jsts.geomgraph.GraphComponent.prototype.label=null,jsts.geomgraph.GraphComponent.prototype._isInResult=!1,jsts.geomgraph.GraphComponent.prototype._isCovered=!1,jsts.geomgraph.GraphComponent.prototype._isCoveredSet=!1,jsts.geomgraph.GraphComponent.prototype._isVisited=!1,jsts.geomgraph.GraphComponent.prototype.getLabel=function(){return this.label},jsts.geomgraph.GraphComponent.prototype.setLabel=function(e){if(arguments.length===2){this.setLabel2.apply(this,arguments);return}this.label=e},jsts.geomgraph.GraphComponent.prototype.setInResult=function(e){this._isInResult=e},jsts.geomgraph.GraphComponent.prototype.isInResult=function(){return this._isInResult},jsts.geomgraph.GraphComponent.prototype.setCovered=function(e){this._isCovered=e,this._isCoveredSet=!0},jsts.geomgraph.GraphComponent.prototype.isCovered=function(){return this._isCovered},jsts.geomgraph.GraphComponent.prototype.isCoveredSet=function(){return this._isCoveredSet},jsts.geomgraph.GraphComponent.prototype.isVisited=function(){return this._isVisited},jsts.geomgraph.GraphComponent.prototype.setVisited=function(e){this._isVisited=e},jsts.geomgraph.GraphComponent.prototype.getCoordinate=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.GraphComponent.prototype.computeIM=function(e){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.GraphComponent.prototype.isIsolated=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.GraphComponent.prototype.updateIM=function(t){e.isTrue(this.label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)}}(),jsts.geomgraph.Node=function(e,t){this.coord=e,this.edges=t,this.label=new jsts.geomgraph.Label(0,jsts.geom.Location.NONE)},jsts.geomgraph.Node.prototype=new jsts.geomgraph.GraphComponent,jsts.geomgraph.Node.prototype.coord=null,jsts.geomgraph.Node.prototype.edges=null,jsts.geomgraph.Node.prototype.isIsolated=function(){return this.label.getGeometryCount()==1},jsts.geomgraph.Node.prototype.setLabel2=function(e,t){this.label===null?this.label=new jsts.geomgraph.Label(e,t):this.label.setLocation(e,t)},jsts.geomgraph.Node.prototype.setLabelBoundary=function(e){var t=jsts.geom.Location.NONE;this.label!==null&&(t=this.label.getLocation(e));var n;switch(t){case jsts.geom.Location.BOUNDARY:n=jsts.geom.Location.INTERIOR;break;case jsts.geom.Location.INTERIOR:n=jsts.geom.Location.BOUNDARY;break;default:n=jsts.geom.Location.BOUNDARY}this.label.setLocation(e,n)},jsts.geomgraph.Node.prototype.add=function(e){this.edges.insert(e),e.setNode(this)},jsts.geomgraph.Node.prototype.getCoordinate=function(){return this.coord},jsts.geomgraph.Node.prototype.getEdges=function(){return this.edges},jsts.geomgraph.Node.prototype.isIncidentEdgeInResult=function(){for(var e=this.getEdges().getEdges().iterator();e.hasNext();){var t=e.next();if(t.getEdge().isInResult())return!0}return!1},jsts.geomgraph.NodeFactory=function(){},jsts.geomgraph.NodeFactory.prototype.createNode=function(e){return new jsts.geomgraph.Node(e,null)},function(){var e=jsts.geom.Location,t=javascript.util.ArrayList,n=javascript.util.TreeMap;jsts.geomgraph.NodeMap=function(e){this.nodeMap=new n,this.nodeFact=e},jsts.geomgraph.NodeMap.prototype.nodeMap=null,jsts.geomgraph.NodeMap.prototype.nodeFact=null,jsts.geomgraph.NodeMap.prototype.addNode=function(e){var t,n;if(e instanceof jsts.geom.Coordinate)return n=e,t=this.nodeMap.get(n),t===null&&(t=this.nodeFact.createNode(n),this.nodeMap.put(n,t)),t;if(e instanceof jsts.geomgraph.Node){var r=e;return n=r.getCoordinate(),t=this.nodeMap.get(n),t===null?(this.nodeMap.put(n,r),r):(t.mergeLabel(r),t)}},jsts.geomgraph.NodeMap.prototype.add=function(e){var t=e.getCoordinate(),n=this.addNode(t);n.add(e)},jsts.geomgraph.NodeMap.prototype.find=function(e){return this.nodeMap.get(e)},jsts.geomgraph.NodeMap.prototype.values=function(){return this.nodeMap.values()},jsts.geomgraph.NodeMap.prototype.iterator=function(){return this.values().iterator()},jsts.geomgraph.NodeMap.prototype.getBoundaryNodes=function(n){var r=new t;for(var i=this.iterator();i.hasNext();){var s=i.next();s.getLabel().getLocation(n)===e.BOUNDARY&&r.add(s)}return r}}(),jsts.geomgraph.Edge=function(e,t){this.pts=e,this.label=t,this.eiList=new jsts.geomgraph.EdgeIntersectionList(this),this.depth=new jsts.geomgraph.Depth},jsts.geomgraph.Edge.prototype=new jsts.geomgraph.GraphComponent,jsts.geomgraph.Edge.constructor=jsts.geomgraph.Edge,jsts.geomgraph.Edge.updateIM=function(e,t){t.setAtLeastIfValid(e.getLocation(0,jsts.geomgraph.Position.ON),e.getLocation(1,jsts.geomgraph.Position.ON),1),e.isArea()&&(t.setAtLeastIfValid(e.getLocation(0,jsts.geomgraph.Position.LEFT),e.getLocation(1,jsts.geomgraph.Position.LEFT),2),t.setAtLeastIfValid(e.getLocation(0,jsts.geomgraph.Position.RIGHT),e.getLocation(1,jsts.geomgraph.Position.RIGHT),2))},jsts.geomgraph.Edge.prototype.pts=null,jsts.geomgraph.Edge.prototype.env=null,jsts.geomgraph.Edge.prototype.name=null,jsts.geomgraph.Edge.prototype.mce=null,jsts.geomgraph.Edge.prototype._isIsolated=!0,jsts.geomgraph.Edge.prototype.depth=null,jsts.geomgraph.Edge.prototype.depthDelta=0,jsts.geomgraph.Edge.prototype.eiList=null,jsts.geomgraph.Edge.prototype.getNumPoints=function(){return this.pts.length},jsts.geomgraph.Edge.prototype.getEnvelope=function(){if(this.env===null){this.env=new jsts.geom.Envelope;for(var e=0;e<this.pts.length;e++)this.env.expandToInclude(pts[e])}return env},jsts.geomgraph.Edge.prototype.getDepth=function(){return this.depth},jsts.geomgraph.Edge.prototype.getDepthDelta=function(){return this.depthDelta},jsts.geomgraph.Edge.prototype.setDepthDelta=function(e){this.depthDelta=e},jsts.geomgraph.Edge.prototype.getCoordinates=function(){return this.pts},jsts.geomgraph.Edge.prototype.getCoordinate=function(e){return e===undefined?this.pts.length>0?this.pts[0]:null:this
.pts[e]},jsts.geomgraph.Edge.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},jsts.geomgraph.Edge.prototype.setIsolated=function(e){this._isIsolated=e},jsts.geomgraph.Edge.prototype.isIsolated=function(){return this._isIsolated},jsts.geomgraph.Edge.prototype.addIntersections=function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++)this.addIntersection(e,t,n,r)},jsts.geomgraph.Edge.prototype.addIntersection=function(e,t,n,r){var i=new jsts.geom.Coordinate(e.getIntersection(r)),s=t,o=e.getEdgeDistance(n,r),u=s+1;if(u<this.pts.length){var a=this.pts[u];i.equals2D(a)&&(s=u,o=0)}var f=this.eiList.add(i,s,o)},jsts.geomgraph.Edge.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},jsts.geomgraph.Edge.prototype.getEdgeIntersectionList=function(){return this.eiList},jsts.geomgraph.Edge.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},jsts.geomgraph.Edge.prototype.isCollapsed=function(){return this.label.isArea()?this.pts.length!=3?!1:this.pts[0].equals(this.pts[2])?!0:!1:!1},jsts.geomgraph.Edge.prototype.getCollapsedEdge=function(){var e=[];e[0]=this.pts[0],e[1]=this.pts[1];var t=new jsts.geomgraph.Edge(e,jsts.geomgraph.Label.toLineLabel(this.label));return t},jsts.geomgraph.Edge.prototype.computeIM=function(e){jsts.geomgraph.Edge.updateIM(this.label,e)},jsts.geomgraph.Edge.prototype.isPointwiseEqual=function(e){if(this.pts.length!=e.pts.length)return!1;for(var t=0;t<this.pts.length;t++)if(!this.pts[t].equals2D(e.pts[t]))return!1;return!0},function(){var e=jsts.util.Assert;jsts.geomgraph.EdgeEnd=function(e,t,n,r){this.edge=e,t&&n&&this.init(t,n),r&&(this.label=r||null)},jsts.geomgraph.EdgeEnd.prototype.edge=null,jsts.geomgraph.EdgeEnd.prototype.label=null,jsts.geomgraph.EdgeEnd.prototype.node=null,jsts.geomgraph.EdgeEnd.prototype.p0=null,jsts.geomgraph.EdgeEnd.prototype.p1=null,jsts.geomgraph.EdgeEnd.prototype.dx=null,jsts.geomgraph.EdgeEnd.prototype.dy=null,jsts.geomgraph.EdgeEnd.prototype.quadrant=null,jsts.geomgraph.EdgeEnd.prototype.init=function(t,n){this.p0=t,this.p1=n,this.dx=n.x-t.x,this.dy=n.y-t.y,this.quadrant=jsts.geomgraph.Quadrant.quadrant(this.dx,this.dy),e.isTrue(this.dx!==0||this.dy!==0,"EdgeEnd with identical endpoints found")},jsts.geomgraph.EdgeEnd.prototype.getEdge=function(){return this.edge},jsts.geomgraph.EdgeEnd.prototype.getLabel=function(){return this.label},jsts.geomgraph.EdgeEnd.prototype.getCoordinate=function(){return this.p0},jsts.geomgraph.EdgeEnd.prototype.getDirectedCoordinate=function(){return this.p1},jsts.geomgraph.EdgeEnd.prototype.getQuadrant=function(){return this.quadrant},jsts.geomgraph.EdgeEnd.prototype.getDx=function(){return this.dx},jsts.geomgraph.EdgeEnd.prototype.getDy=function(){return this.dy},jsts.geomgraph.EdgeEnd.prototype.setNode=function(e){this.node=e},jsts.geomgraph.EdgeEnd.prototype.getNode=function(){return this.node},jsts.geomgraph.EdgeEnd.prototype.compareTo=function(e){return this.compareDirection(e)},jsts.geomgraph.EdgeEnd.prototype.compareDirection=function(e){return this.dx===e.dx&&this.dy===e.dy?0:this.quadrant>e.quadrant?1:this.quadrant<e.quadrant?-1:jsts.algorithm.CGAlgorithms.computeOrientation(e.p0,e.p1,this.p1)},jsts.geomgraph.EdgeEnd.prototype.computeLabel=function(e){}}(),function(){var e=jsts.geom.Location,t=jsts.geomgraph.Position,n=jsts.geomgraph.EdgeEnd;jsts.geomgraph.DirectedEdge=function(e,t){n.call(this,e),this.depth=[0,-999,-999],this._isForward=t;if(t)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()},jsts.geomgraph.DirectedEdge.prototype=new n,jsts.geomgraph.DirectedEdge.constructor=jsts.geomgraph.DirectedEdge,jsts.geomgraph.DirectedEdge.depthFactor=function(t,n){return t===e.EXTERIOR&&n===e.INTERIOR?1:t===e.INTERIOR&&n===e.EXTERIOR?-1:0},jsts.geomgraph.DirectedEdge.prototype._isForward=null,jsts.geomgraph.DirectedEdge.prototype._isInResult=!1,jsts.geomgraph.DirectedEdge.prototype._isVisited=!1,jsts.geomgraph.DirectedEdge.prototype.sym=null,jsts.geomgraph.DirectedEdge.prototype.next=null,jsts.geomgraph.DirectedEdge.prototype.nextMin=null,jsts.geomgraph.DirectedEdge.prototype.edgeRing=null,jsts.geomgraph.DirectedEdge.prototype.minEdgeRing=null,jsts.geomgraph.DirectedEdge.prototype.depth=null,jsts.geomgraph.DirectedEdge.prototype.getEdge=function(){return this.edge},jsts.geomgraph.DirectedEdge.prototype.setInResult=function(e){this._isInResult=e},jsts.geomgraph.DirectedEdge.prototype.isInResult=function(){return this._isInResult},jsts.geomgraph.DirectedEdge.prototype.isVisited=function(){return this._isVisited},jsts.geomgraph.DirectedEdge.prototype.setVisited=function(e){this._isVisited=e},jsts.geomgraph.DirectedEdge.prototype.setEdgeRing=function(e){this.edgeRing=e},jsts.geomgraph.DirectedEdge.prototype.getEdgeRing=function(){return this.edgeRing},jsts.geomgraph.DirectedEdge.prototype.setMinEdgeRing=function(e){this.minEdgeRing=e},jsts.geomgraph.DirectedEdge.prototype.getMinEdgeRing=function(){return this.minEdgeRing},jsts.geomgraph.DirectedEdge.prototype.getDepth=function(e){return this.depth[e]},jsts.geomgraph.DirectedEdge.prototype.setDepth=function(e,t){if(this.depth[e]!==-999&&this.depth[e]!==t)throw new jsts.error.TopologyError("assigned depths do not match",this.getCoordinate());this.depth[e]=t},jsts.geomgraph.DirectedEdge.prototype.getDepthDelta=function(){var e=this.edge.getDepthDelta();return this._isForward||(e=-e),e},jsts.geomgraph.DirectedEdge.prototype.setVisitedEdge=function(e){this.setVisited(e),this.sym.setVisited(e)},jsts.geomgraph.DirectedEdge.prototype.getSym=function(){return this.sym},jsts.geomgraph.DirectedEdge.prototype.isForward=function(){return this._isForward},jsts.geomgraph.DirectedEdge.prototype.setSym=function(e){this.sym=e},jsts.geomgraph.DirectedEdge.prototype.getNext=function(){return this.next},jsts.geomgraph.DirectedEdge.prototype.setNext=function(e){this.next=e},jsts.geomgraph.DirectedEdge.prototype.getNextMin=function(){return this.nextMin},jsts.geomgraph.DirectedEdge.prototype.setNextMin=function(e){this.nextMin=e},jsts.geomgraph.DirectedEdge.prototype.isLineEdge=function(){var t=this.label.isLine(0)||this.label.isLine(1),n=!this.label.isArea(0)||this.label.allPositionsEqual(0,e.EXTERIOR),r=!this.label.isArea(1)||this.label.allPositionsEqual(1,e.EXTERIOR);return t&&n&&r},jsts.geomgraph.DirectedEdge.prototype.isInteriorAreaEdge=function(){var n=!0;for(var r=0;r<2;r++)if(!this.label.isArea(r)||this.label.getLocation(r,t.LEFT)!==e.INTERIOR||this.label.getLocation(r,t.RIGHT)!==e.INTERIOR)n=!1;return n},jsts.geomgraph.DirectedEdge.prototype.computeDirectedLabel=function(){this.label=new jsts.geomgraph.Label(this.edge.getLabel()),this._isForward||this.label.flip()},jsts.geomgraph.DirectedEdge.prototype.setEdgeDepths=function(e,n){var r=this.getEdge().getDepthDelta();this._isForward||(r=-r);var i=1;e===t.LEFT&&(i=-1);var s=t.opposite(e),o=r*i,u=n+o;this.setDepth(e,n),this.setDepth(s,u)}}(),jsts.geomgraph.EdgeEndStar=function(){this.edgeMap=new javascript.util.TreeMap,this.edgeList=null,this.ptInAreaLocation=[jsts.geom.Location.NONE,jsts.geom.Location.NONE]},jsts.geomgraph.EdgeEndStar.prototype.edgeMap=null,jsts.geomgraph.EdgeEndStar.prototype.edgeList=null,jsts.geomgraph.EdgeEndStar.prototype.ptInAreaLocation=null,jsts.geomgraph.EdgeEndStar.prototype.insert=function(e){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.EdgeEndStar.prototype.insertEdgeEnd=function(e,t){this.edgeMap.put(e,t),this.edgeList=null},jsts.geomgraph.EdgeEndStar.prototype.getCoordinate=function(){var e=this.iterator();if(!e.hasNext())return null;var t=e.next();return t.getCoordinate()},jsts.geomgraph.EdgeEndStar.prototype.getDegree=function(){return this.edgeMap.size()},jsts.geomgraph.EdgeEndStar.prototype.iterator=function(){return this.getEdges().iterator()},jsts.geomgraph.EdgeEndStar.prototype.getEdges=function(){return this.edgeList===null&&(this.edgeList=new javascript.util.ArrayList(this.edgeMap.values())),this.edgeList},jsts.geomgraph.EdgeEndStar.prototype.getNextCW=function(e){this.getEdges();var t=this.edgeList.indexOf(e),n=t-1;return t===0&&(n=this.edgeList.length-1),this.edgeList[n]},jsts.geomgraph.EdgeEndStar.prototype.computeLabelling=function(e){this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);var t=[!1,!1];for(var n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();for(var s=0;s<2;s++)i.isLine(s)&&i.getLocation(s)===jsts.geom.Location.BOUNDARY&&(t[s]=!0)}for(var n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();for(var s=0;s<2;s++)if(i.isAnyNull(s)){var o=jsts.geom.Location.NONE;if(t[s])o=jsts.geom.Location.EXTERIOR;else{var u=r.getCoordinate();o=this.getLocation(s,u,e)}i.setAllLocationsIfNull(s,o)}}},jsts.geomgraph.EdgeEndStar.prototype.computeEdgeEndLabels=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.computeLabel(e)}},jsts.geomgraph.EdgeEndStar.prototype.getLocation=function(e,t,n){return this.ptInAreaLocation[e]===jsts.geom.Location.NONE&&(this.ptInAreaLocation[e]=jsts.algorithm.locate.SimplePointInAreaLocator.locate(t,n[e].getGeometry())),this.ptInAreaLocation[e]},jsts.geomgraph.EdgeEndStar.prototype.isAreaLabelsConsistent=function(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},jsts.geomgraph.EdgeEndStar.prototype.checkAreaLabelsConsistent=function(e){var t=this.getEdges();if(t.size()<=0)return!0;var n=t.size()-1,r=t.get(n).getLabel(),i=r.getLocation(e,jsts.geomgraph.Position.LEFT);jsts.util.Assert.isTrue(i!=jsts.geom.Location.NONE,"Found unlabelled area edge");var s=i;for(var o=this.iterator();o.hasNext();){var u=o.next(),a=u.getLabel();jsts.util.Assert.isTrue(a.isArea(e),"Found non-area edge");var f=a.getLocation(e,jsts.geomgraph.Position.LEFT),l=a.getLocation(e,jsts.geomgraph.Position.RIGHT);if(f===l)return!1;if(l!==s)return!1;s=f}return!0},jsts.geomgraph.EdgeEndStar.prototype.propagateSideLabels=function(e){var t=jsts.geom.Location.NONE;for(var n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea(e)&&i.getLocation(e,jsts.geomgraph.Position.LEFT)!==jsts.geom.Location.NONE&&(t=i.getLocation(e,jsts.geomgraph.Position.LEFT))}if(t===jsts.geom.Location.NONE)return;var s=t;for(var n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.getLocation(e,jsts.geomgraph.Position.ON)===jsts.geom.Location.NONE&&i.setLocation(e,jsts.geomgraph.Position.ON,s);if(i.isArea(e)){var o=i.getLocation(e,jsts.geomgraph.Position.LEFT),u=i.getLocation(e,jsts.geomgraph.Position.RIGHT);if(u!==jsts.geom.Location.NONE){if(u!==s)throw new jsts.error.TopologyError("side location conflict",r.getCoordinate());o===jsts.geom.Location.NONE&&jsts.util.Assert.shouldNeverReachHere("found single null side (at "+r.getCoordinate()+")"),s=o}else jsts.util.Assert.isTrue(i.getLocation(e,jsts.geomgraph.Position.LEFT)===jsts.geom.Location.NONE,"found single null side"),i.setLocation(e,jsts.geomgraph.Position.RIGHT,s),i.setLocation(e,jsts.geomgraph.Position.LEFT,s)}}},jsts.geomgraph.EdgeEndStar.prototype.findIndex=function(e){this.iterator();for(var t=0;t<this.edgeList.size();t++){var n=this.edgeList.get(t);if(n===e)return t}return-1},function(){var e=jsts.geom.Location,t=jsts.geomgraph.Position,n=jsts.geomgraph.EdgeEndStar,r=jsts.util.Assert;jsts.geomgraph.DirectedEdgeStar=function(){jsts.geomgraph.EdgeEndStar.call(this)},jsts.geomgraph.DirectedEdgeStar.prototype=new n,jsts.geomgraph.DirectedEdgeStar.constructor=jsts.geomgraph.DirectedEdgeStar,jsts.geomgraph.DirectedEdgeStar.prototype.resultAreaEdgeList=null,jsts.geomgraph.DirectedEdgeStar.prototype.label=null,jsts.geomgraph.DirectedEdgeStar.prototype.insert=function(e){var t=e;this.insertEdgeEnd(t,t)},jsts.geomgraph.DirectedEdgeStar.prototype.getLabel=function(){return this.label},jsts.geomgraph.DirectedEdgeStar.prototype.getOutgoingDegree=function(){var e=0;for(var t=this.iterator();t.hasNext();){var n=t.next();n.isInResult()&&e++}return e},jsts.geomgraph.DirectedEdgeStar.prototype.getOutgoingDegree=function(e){var t=0;for(var n=this.iterator();n.hasNext();){var r=n.next();r.getEdgeRing()===e&&t++}return t},jsts.geomgraph.DirectedEdgeStar.prototype.getRightmostEdge=function(){var e=this.getEdges(),t=e.size();if(t<1)return null;var n=e.get(0);if(t==1)return n;var i=e.get(t-1),s=n.getQuadrant(),o=i.getQuadrant();if(jsts.geomgraph.Quadrant.isNorthern(s)&&jsts.geomgraph.Quadrant.isNorthern(o))return n;if(!jsts.geomgraph.Quadrant.isNorthern(s)&&!jsts.geomgraph.Quadrant.isNorthern(o))return i;var u=null;return n.getDy()!=0?n:i.getDy()!=0?i:(r.shouldNeverReachHere("found two horizontal edges incident on node"),null)},jsts.geomgraph.DirectedEdgeStar.prototype.computeLabelling=function(t){n.prototype.computeLabelling.call(this,t),this.label=new jsts.geomgraph.Label(e.NONE);for(var r=this.iterator();r.hasNext();){var i=r.next(),s=i.getEdge(),o=s.getLabel();for(var u=0;u<2;u++){var a=o.getLocation(u);(a===e.INTERIOR||a===e.BOUNDARY)&&this.label.setLocation(u,e.INTERIOR)}}},jsts.geomgraph.DirectedEdgeStar.prototype.mergeSymLabels=function(){for(var e=this.iterator();e.hasNext();){var t=e.next(),n=t.getLabel();n.merge(t.getSym().getLabel())}},jsts.geomgraph.DirectedEdgeStar.prototype.updateLabelling=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next(),r=n.getLabel();r.setAllLocationsIfNull(0,e.getLocation(0)),r.setAllLocationsIfNull(1,e.getLocation(1))}},jsts.geomgraph.DirectedEdgeStar.prototype.getResultAreaEdges=function(){if(this.resultAreaEdgeList!==null)return this.resultAreaEdgeList;this.resultAreaEdgeList=new javascript.util.ArrayList;for(var e=this.iterator();e.hasNext();){var t=e.next();(t.isInResult()||t.getSym().isInResult())&&this.resultAreaEdgeList.add(t)}return this.resultAreaEdgeList},jsts.geomgraph.DirectedEdgeStar.prototype.SCANNING_FOR_INCOMING=1,jsts.geomgraph.DirectedEdgeStar.prototype.LINKING_TO_OUTGOING=2,jsts.geomgraph.DirectedEdgeStar.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();var e=null,t=null,n=this.SCANNING_FOR_INCOMING;for(var i=0;i<this.resultAreaEdgeList.size();i++){var s=this.resultAreaEdgeList.get(i),o=s.getSym();if(!s.getLabel().isArea())continue;e===null&&s.isInResult()&&(e=s);switch(n){case this.SCANNING_FOR_INCOMING:if(!o.isInResult())continue;t=o,n=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!s.isInResult())continue;t.setNext(s),n=this.SCANNING_FOR_INCOMING}}if(n===this.LINKING_TO_OUTGOING){if(e===null)throw new jsts.error.TopologyError("no outgoing dirEdge found",this.getCoordinate());r.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),t.setNext(e)}},jsts.geomgraph.DirectedEdgeStar.prototype.linkMinimalDirectedEdges=function(e){var t=null,n=null,i=this.SCANNING_FOR_INCOMING;for(var s=this.resultAreaEdgeList.size()-1;s>=0;s--){var o=this.resultAreaEdgeList.get(s),u=o.getSym();t===null&&o.getEdgeRing()===e&&(t=o);switch(i){case this.SCANNING_FOR_INCOMING:if(u.getEdgeRing()!=e)continue;n=u,i=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(o.getEdgeRing()!==e)continue;n.setNextMin(o),i=this.SCANNING_FOR_INCOMING}}i===this.LINKING_TO_OUTGOING&&(r.isTrue(t!==null,"found null for first outgoing dirEdge"),r.isTrue(t.getEdgeRing()===e,"unable to link last incoming dirEdge"),n.setNextMin(t))},jsts.geomgraph.DirectedEdgeStar.prototype.linkAllDirectedEdges=function(){this.getEdges();var e=null,t=null;for(var n=this.edgeList.size()-1;n>=0;n--){var r=this.edgeList.get(n),i=r.getSym();t===null&&(t=i),e!==null&&i.setNext(e),e=r}t.setNext(e)},jsts.geomgraph.DirectedEdgeStar.prototype.findCoveredLineEdges=function(){var t=e.NONE;for(var n=this.iterator();n.hasNext();){var r=n.next(),i=r.getSym();if(!r.isLineEdge()){if(r.isInResult()){t=e.INTERIOR;break}if(i.isInResult()){t=e.EXTERIOR;break}}}if(t===e.NONE)return;var s=t;for(var n=this.iterator();n.hasNext();){var r=n.next(),i=r.getSym();r.isLineEdge()?r.getEdge().setCovered(s===e.INTERIOR):(r.isInResult()&&(s=e.EXTERIOR),i.isInResult()&&(s=e.INTERIOR))}},jsts.geomgraph.DirectedEdgeStar.prototype.computeDepths=function(e){if(arguments.length===2){this.computeDepths2.apply(this,arguments);return}var n=this.findIndex(e),r=e.getLabel(),i=e.getDepth(t.LEFT),s=e.getDepth(t.RIGHT),o=this.computeDepths2(n+1,this.edgeList.size(),i),u=this.computeDepths2(0,n,o);if(u!=s)throw new jsts.error.TopologyError("depth mismatch at "+e.getCoordinate())},jsts.geomgraph.DirectedEdgeStar.prototype.computeDepths2=function(e,n,r){var i=r;for(var s=e;s<n;s++){var o=this.edgeList.get(s),u=o.getLabel();o.setEdgeDepths(t.RIGHT,i),i=o.getDepth(t.LEFT)}return i}}(),jsts.geomgraph.EdgeRing=function(e,t){this.edges=[],this.pts=[],this.holes=[],this.label=new jsts.geomgraph.Label(jsts.geom.Location.NONE),this.geometryFactory=t,e&&(this.computePoints(e),this.computeRing())},jsts.geomgraph.EdgeRing.prototype.startDe=null,jsts.geomgraph.EdgeRing.prototype.maxNodeDegree=-1,jsts.geomgraph.EdgeRing.prototype.edges=null,jsts.geomgraph.EdgeRing.prototype.pts=null,jsts.geomgraph.EdgeRing.prototype.label=null,jsts.geomgraph.EdgeRing.prototype.ring=null,jsts.geomgraph.EdgeRing.prototype._isHole=null,jsts.geomgraph.EdgeRing.prototype.shell=null,jsts.geomgraph.EdgeRing.prototype.holes=null,jsts.geomgraph.EdgeRing.prototype.geometryFactory=null,jsts.geomgraph.EdgeRing.prototype.isIsolated=function(){return this.label.getGeometryCount()==1},jsts.geomgraph.EdgeRing.prototype.isHole=function(){return this._isHole},jsts.geomgraph.EdgeRing.prototype.getCoordinate=function(e){return this.pts[e]},jsts.geomgraph.EdgeRing.prototype.getLinearRing=function(){return this.ring},jsts.geomgraph.EdgeRing.prototype.getLabel=function(){return this.label},jsts.geomgraph.EdgeRing.prototype.isShell=function(){return this.shell===null},jsts.geomgraph.EdgeRing.prototype.getShell=function(){return this.shell},jsts.geomgraph.EdgeRing.prototype.setShell=function(e){this.shell=e,e!==null&&e.addHole(this)},jsts.geomgraph.EdgeRing.prototype.addHole=function(e){this.holes.push(e)},jsts.geomgraph.EdgeRing.prototype.toPolygon=function(e){var t=[];for(var n=0;n<this.holes.length;n++)t[n]=this.holes[n].getLinearRing();var r=this.geometryFactory.createPolygon(this.getLinearRing(),t);return r},jsts.geomgraph.EdgeRing.prototype.computeRing=function(){if(this.ring!==null)return;var e=[];for(var t=0;t<this.pts.length;t++)e[t]=this.pts[t];this.ring=this.geometryFactory.createLinearRing(e),this._isHole=jsts.algorithm.CGAlgorithms.isCCW(this.ring.getCoordinates())},jsts.geomgraph.EdgeRing.prototype.getNext=function(e){throw new jsts.error.AbstractInvocationError},jsts.geomgraph.EdgeRing.prototype.setEdgeRing=function(e,t){throw new jsts.error.AbstractInvocationError},jsts.geomgraph.EdgeRing.prototype.getEdges=function(){return this.edges},jsts.geomgraph.EdgeRing.prototype.computePoints=function(e){this.startDe=e;var t=e,n=!0;do{if(t===null)throw new jsts.error.TopologyError("Found null DirectedEdge");if(t.getEdgeRing()===this)throw new jsts.error.TopologyError("Directed Edge visited twice during ring-building at "+t.getCoordinate());this.edges.push(t);var r=t.getLabel();jsts.util.Assert.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(t.getEdge(),t.isForward(),n),n=!1,this.setEdgeRing(t,this),t=this.getNext(t)}while(t!==this.startDe)},jsts.geomgraph.EdgeRing.prototype.getMaxNodeDegree=function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree},jsts.geomgraph.EdgeRing.prototype.computeMaxNodeDegree=function(){this.maxNodeDegree=0;var e=this.startDe;do{var t=e.getNode(),n=t.getEdges().getOutgoingDegree(this);n>this.maxNodeDegree&&(this.maxNodeDegree=n),e=this.getNext(e)}while(e!==this.startDe);this.maxNodeDegree*=2},jsts.geomgraph.EdgeRing.prototype.setInResult=function(){var e=this.startDe;do e.getEdge().setInResult(!0),e=e.getNext();while(e!=this.startDe)},jsts.geomgraph.EdgeRing.prototype.mergeLabel=function(e){this.mergeLabel2(e,0),this.mergeLabel2(e,1)},jsts.geomgraph.EdgeRing.prototype.mergeLabel2=function(e,t){var n=e.getLocation(t,jsts.geomgraph.Position.RIGHT);if(n==jsts.geom.Location.NONE)return;if(this.label.getLocation(t)===jsts.geom.Location.NONE){this.label.setLocation(t,n);return}},jsts.geomgraph.EdgeRing.prototype.addPoints=function(e,t,n){var r=e.getCoordinates();if(t){var i=1;n&&(i=0);for(var s=i;s<r.length;s++)this.pts.push(r[s])}else{var i=r.length-2;n&&(i=r.length-1);for(var s=i;s>=0;s--)this.pts.push(r[s])}},jsts.geomgraph.EdgeRing.prototype.containsPoint=function(e){var t=this.getLinearRing(),n=t.getEnvelopeInternal();if(!n.contains(e))return!1;if(!jsts.algorithm.CGAlgorithms.isPointInRing(e,t.getCoordinates()))return!1;for(var r=0;r<this.holes.length;r++){var i=this.holes[r];if(i.containsPoint(e))return!1}return!0},jsts.geomgraph.EdgeIntersection=function(e,t,n){this.coord=new jsts.geom.Coordinate(e),this.segmentIndex=t,this.dist=n},jsts.geomgraph.EdgeIntersection.prototype.coord=null,jsts.geomgraph.EdgeIntersection.prototype.segmentIndex=null,jsts.geomgraph.EdgeIntersection.prototype.dist=null,jsts.geomgraph.EdgeIntersection.prototype.getCoordinate=function(){return this.coord},jsts.geomgraph.EdgeIntersection.prototype.getSegmentIndex=function(){return this.segmentIndex},jsts.geomgraph.EdgeIntersection.prototype.getDistance=function(){return this.dist},jsts.geomgraph.EdgeIntersection.prototype.compareTo=function(e){return this.compare(e.segmentIndex,e.dist)},jsts.geomgraph.EdgeIntersection.prototype.compare=function(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0},jsts.geomgraph.EdgeIntersection.prototype.isEndPoint=function(e){return this.segmentIndex===0&&this.dist===0?!0:this.segmentIndex===e?!0:!1},jsts.geomgraph.EdgeIntersection.prototype.toString=function(){return""+this.segmentIndex+this.dist},function(){var e=jsts.geomgraph.EdgeIntersection,t=javascript.util.TreeMap;jsts.geomgraph.EdgeIntersectionList=function(e){this.nodeMap=new t,this.edge=e},jsts.geomgraph.EdgeIntersectionList.prototype.nodeMap=null,jsts.geomgraph.EdgeIntersectionList.prototype.edge=null,jsts.geomgraph.EdgeIntersectionList.prototype.isIntersection=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();if(n.coord.equals(e))return!0}return!1},jsts.geomgraph.EdgeIntersectionList.prototype.add=function(t,n,r){var i=new e(t,n,r),s=this.nodeMap.get(i);return s!==null?s:(this.nodeMap.put(i,i),i)},jsts.geomgraph.EdgeIntersectionList.prototype.iterator=function(){return this.nodeMap.values().iterator()},jsts.geomgraph.EdgeIntersectionList.prototype.addEndpoints=function(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)},jsts.geomgraph.EdgeIntersectionList.prototype.addSplitEdges=function(e){this.addEndpoints();var t=this.iterator(),n=t.next();while(t.hasNext()){var r=t.next(),i=this.createSplitEdge(n,r);e.add(i),n=r}},jsts.geomgraph.EdgeIntersectionList.prototype.createSplitEdge=function(e,t){var n=t.segmentIndex-e.segmentIndex+2,r=this.edge.pts[t.segmentIndex],i=t.dist>0||!t.coord.equals2D(r);i||n--;var s=[],o=0;s[o++]=new jsts.geom.Coordinate(e.coord);for(var u=e.segmentIndex+1;u<=t.segmentIndex;u++)s[o++]=this.edge.pts[u];return i&&(s[o]=t.coord),new jsts.geomgraph.Edge(s,new jsts.geomgraph.Label(this.edge.label))}}(),function(){var e=javascript.util.ArrayList,t=javascript.util.TreeMap;jsts.geomgraph.EdgeList=function(){this.edges=new e,this.ocaMap=new t},jsts.geomgraph.EdgeList.prototype.edges=null,jsts.geomgraph.EdgeList.prototype.ocaMap=null,jsts.geomgraph.EdgeList.prototype.add=function(e){this.edges.add(e);var t=new jsts.noding.OrientedCoordinateArray(e.getCoordinates());this.ocaMap.put(t,e)},jsts.geomgraph.EdgeList.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next())},jsts.geomgraph.EdgeList.prototype.getEdges=function(){return this.edges},jsts.geomgraph.EdgeList.prototype.findEqualEdge=function(e){var t=new jsts.noding.OrientedCoordinateArray(e.getCoordinates()),n=this.ocaMap.get(t);return n},jsts.geomgraph.EdgeList.prototype.getEdges=function(){return this.edges},jsts.geomgraph.EdgeList.prototype.iterator=function(){return this.edges.iterator()},jsts.geomgraph.EdgeList.prototype.get=function(e){return this.edges.get(e)},jsts.geomgraph.EdgeList.prototype.findEdgeIndex=function(e){for(var t=0;t<this.edges.size();t++)if(this.edges.get(t).equals(e))return t;return-1}}(),function(){var e=jsts.noding.FastNodingValidator,t=jsts.noding.BasicSegmentString,n=javascript.util.ArrayList;jsts.geomgraph.EdgeNodingValidator=function(t){this.nv=new e(jsts.geomgraph.EdgeNodingValidator.toSegmentStrings(t))},jsts.geomgraph.EdgeNodingValidator.checkValid=function(e){var t=new jsts.geomgraph.EdgeNodingValidator(e);t.checkValid()},jsts.geomgraph.EdgeNodingValidator.toSegmentStrings=function(e){var r=new n;for(var i=e.iterator();i.hasNext();){var s=i.next();r.add(new t(s.getCoordinates(),s))}return r},jsts.geomgraph.EdgeNodingValidator.prototype.nv=null,jsts.geomgraph.EdgeNodingValidator.prototype.checkValid=function(){this.nv.checkValid()}}(),function(){var e=javascript.util.ArrayList;jsts.geomgraph.PlanarGraph=function(t){this.edges=new e,this.edgeEndList=new e,this.nodes=new jsts.geomgraph.NodeMap(t||new jsts.geomgraph.NodeFactory)},jsts.geomgraph.PlanarGraph.prototype.edges=null,jsts.geomgraph.PlanarGraph.prototype.nodes=null,jsts.geomgraph.PlanarGraph.prototype.edgeEndList=null,jsts.geomgraph.PlanarGraph.linkResultDirectedEdges=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.getEdges().linkResultDirectedEdges()}},jsts.geomgraph.PlanarGraph.prototype.getEdgeIterator=function(){return this.edges.iterator()},jsts.geomgraph.PlanarGraph.prototype.getEdgeEnds=function(){return this.edgeEndList},jsts.geomgraph.PlanarGraph.prototype.isBoundaryNode=function(e,t){var n=this.nodes.find(t);if(n===null)return!1;var r=n.getLabel();return r!==null&&r.getLocation(e)===jsts.geom.Location.BOUNDARY?!0:!1},jsts.geomgraph.PlanarGraph.prototype.insertEdge=function(e){this.edges.add(e)},jsts.geomgraph.PlanarGraph.prototype.add=function(e){this.nodes.add(e),this.edgeEndList.add(e)},jsts.geomgraph.PlanarGraph.prototype.getNodeIterator=function(){return this.nodes.iterator()},jsts.geomgraph.PlanarGraph.prototype.getNodes=function(){return this.nodes.values()},jsts.geomgraph.PlanarGraph.prototype.addNode=function(e){return this.nodes.addNode(e)},jsts.geomgraph.PlanarGraph.prototype.addEdges=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.edges.add(n);var r=new jsts.geomgraph.DirectedEdge(n,!0),i=new jsts.geomgraph.DirectedEdge(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},jsts.geomgraph.PlanarGraph.prototype.linkResultDirectedEdges=function(){for(var e=this.nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkResultDirectedEdges()}},jsts.geomgraph.PlanarGraph.prototype.findEdgeInSameDirection=function(e,t){var n=0,r=this.edges.size(),i,s;for(n;n<r;n++){i=this.edges.get(n),s=i.getCoordinates();if(this.matchInSameDirection(e,t,s[0],s[1]))return i;if(this.matchInSameDirection(e,t,s[s.length-1],s[s.length-2]))return i}return null},jsts.geomgraph.PlanarGraph.prototype.matchInSameDirection=function(e,t,n,r){return e.equals(n)?jsts.algorithm.CGAlgorithms.computeOrientation(e,t,r)===jsts.algorithm.CGAlgorithms.COLLINEAR&&jsts.geomgraph.Quadrant.quadrant(e,t)===jsts.geomgraph.Quadrant.quadrant(n,r)?!0:!1:!1},jsts.geomgraph.PlanarGraph.prototype.findEdgeEnd=function(e){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var n=t.next();if(n.getEdge()===e)return n}return null}}(),function(){var e=jsts.geom.Location,t=jsts.geomgraph.Position,n=jsts.util.Assert;jsts.geomgraph.GeometryGraph=function(e,t,n){jsts.geomgraph.PlanarGraph.call(this),this.lineEdgeMap=new javascript.util.HashMap,this.ptLocator=new jsts.algorithm.PointLocator,this.argIndex=e,this.parentGeom=t,this.boundaryNodeRule=n||jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE,t!==null&&this.add(t)},jsts.geomgraph.GeometryGraph.prototype=new jsts.geomgraph.PlanarGraph,jsts.geomgraph.GeometryGraph.constructor=jsts.geomgraph.GeometryGraph,jsts.geomgraph.GeometryGraph.prototype.createEdgeSetIntersector=function(){return new jsts.geomgraph.index.SimpleEdgeSetIntersector},jsts.geomgraph.GeometryGraph.determineBoundary=function(t,n){return t.isInBoundary(n)?e.BOUNDARY:e.INTERIOR},jsts.geomgraph.GeometryGraph.prototype.parentGeom=null,jsts.geomgraph.GeometryGraph.prototype.lineEdgeMap=null,jsts.geomgraph.GeometryGraph.prototype.boundaryNodeRule=null,jsts.geomgraph.GeometryGraph.prototype.useBoundaryDeterminationRule=!0,jsts.geomgraph.GeometryGraph.prototype.argIndex=null,jsts.geomgraph.GeometryGraph.prototype.boundaryNodes=null,jsts.geomgraph.GeometryGraph.prototype.hasTooFewPoints=!1,jsts.geomgraph.GeometryGraph.prototype.invalidPoint=null,jsts.geomgraph.GeometryGraph.prototype.areaPtLocator=null,jsts.geomgraph.GeometryGraph.prototype.ptLocator=null,jsts.geomgraph.GeometryGraph.prototype.getGeometry=function(){return this.parentGeom},jsts.geomgraph.GeometryGraph.prototype.getBoundaryNodes=function(){return this.boundaryNodes===null&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes},jsts.geomgraph.GeometryGraph.prototype.getBoundaryNodeRule=function(){return this.boundaryNodeRule},jsts.geomgraph.GeometryGraph.prototype.findEdge=function(e){return this.lineEdgeMap.get(e)},jsts.geomgraph.GeometryGraph.prototype.computeSplitEdges=function(e){for(var t=this.edges.iterator();t.hasNext();){var n=t.next();n.eiList.addSplitEdges(e)}},jsts.geomgraph.GeometryGraph.prototype.add=function(e){if(e.isEmpty())return;e instanceof jsts.geom.MultiPolygon&&(this.useBoundaryDeterminationRule=!1);if(e instanceof jsts.geom.Polygon)this.addPolygon(e);else if(e instanceof jsts.geom.LineString)this.addLineString(e);else if(e instanceof jsts.geom.Point)this.addPoint(e);else if(e instanceof jsts.geom.MultiPoint)this.addCollection(e);else if(e instanceof jsts.geom.MultiLineString)this.addCollection(e);else if(e instanceof jsts.geom.MultiPolygon)this.addCollection(e);else{if(!(e instanceof jsts.geom.GeometryCollection))throw new jsts.error.IllegalArgumentError("Geometry type not supported.");this.addCollection(e)}},jsts.geomgraph.GeometryGraph.prototype.addCollection=function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);this.add(n)}},jsts.geomgraph.GeometryGraph.prototype.addEdge=function(t){this.insertEdge(t);var n=t.getCoordinates();this.insertPoint(this.argIndex,n[0],e.BOUNDARY),this.insertPoint(this.argIndex,n[n.length-1],e.BOUNDARY)},jsts.geomgraph.GeometryGraph.prototype.addPoint=function(t){var n=t.getCoordinate();this.insertPoint(this.argIndex,n,e.INTERIOR)},jsts.geomgraph.GeometryGraph.prototype.addLineString=function(t){var r=jsts.geom.CoordinateArrays.removeRepeatedPoints(t.getCoordinates());if(r.length<2){this.hasTooFewPoints=!0,this.invalidPoint=coords[0];return}var i=new jsts.geomgraph.Edge(r,new jsts.geomgraph.Label(this.argIndex,e.INTERIOR));this.lineEdgeMap.put(t,i),this.insertEdge(i),n.isTrue(r.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,r[0]),this.insertBoundaryPoint(this.argIndex,r[r.length-1])},jsts.geomgraph.GeometryGraph.prototype.addPolygonRing=function(t,n,r){if(t.isEmpty())return;var i=jsts.geom.CoordinateArrays.removeRepeatedPoints(t.getCoordinates());if(i.length<4){this.hasTooFewPoints=!0,this.invalidPoint=i[0];return}var s=n,o=r;jsts.algorithm.CGAlgorithms.isCCW(i)&&(s=r,o=n);var u=new jsts.geomgraph.Edge(i,new jsts.geomgraph.Label(this.argIndex,e.BOUNDARY,s,o));this.lineEdgeMap.put(t,u),this.insertEdge(u),this.insertPoint(this.argIndex,i[0],e.BOUNDARY)},jsts.geomgraph.GeometryGraph.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),e.EXTERIOR,e.INTERIOR);for(var n=0;n<t.getNumInteriorRing();n++){var r=t.getInteriorRingN(n);this.addPolygonRing(r,e.INTERIOR,e.EXTERIOR)}},jsts.geomgraph.GeometryGraph.prototype.computeEdgeIntersections=function(e,t,n){var r=new jsts.geomgraph.index.SegmentIntersector(t,n,!0);r.setBoundaryNodes(this.getBoundaryNodes(),e.getBoundaryNodes());var i=this.createEdgeSetIntersector();return i.computeIntersections(this.edges,e.edges,r),r},jsts.geomgraph.GeometryGraph.prototype.computeSelfNodes=function(e,t){var n=new jsts.geomgraph.index.SegmentIntersector(e,!0,!1),r=this.createEdgeSetIntersector();return!t&&(this.parentGeom instanceof jsts.geom.LinearRing||this.parentGeom instanceof jsts.geom.Polygon||this.parentGeom instanceof jsts.geom.MultiPolygon)?r.computeIntersections(this.edges,n,!1):r.computeIntersections(this.edges,n,!0),this.addSelfIntersectionNodes(this.argIndex),n},jsts.geomgraph.GeometryGraph.prototype.insertPoint=
function(e,t,n){var r=this.nodes.addNode(t),i=r.getLabel();i==null?r.label=new jsts.geomgraph.Label(e,n):i.setLocation(e,n)},jsts.geomgraph.GeometryGraph.prototype.insertBoundaryPoint=function(n,r){var i=this.nodes.addNode(r),s=i.getLabel(),o=1,u=e.NONE;s!==null&&(u=s.getLocation(n,t.ON)),u===e.BOUNDARY&&o++;var a=jsts.geomgraph.GeometryGraph.determineBoundary(this.boundaryNodeRule,o);s.setLocation(n,a)},jsts.geomgraph.GeometryGraph.prototype.addSelfIntersectionNodes=function(e){for(var t=this.edges.iterator();t.hasNext();){var n=t.next(),r=n.getLabel().getLocation(e);for(var i=n.eiList.iterator();i.hasNext();){var s=i.next();this.addSelfIntersectionNode(e,s.coord,r)}}},jsts.geomgraph.GeometryGraph.prototype.addSelfIntersectionNode=function(t,n,r){if(this.isBoundaryNode(t,n))return;r===e.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(t,n):this.insertPoint(t,n,r)},jsts.geomgraph.GeometryGraph.prototype.getInvalidPoint=function(){return this.invalidPoint}}(),jsts.geomgraph.Label=function(){this.elt=[];var e,t,n,r,i;arguments.length===4?(e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3],this.elt[0]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE,jsts.geom.Location.NONE,jsts.geom.Location.NONE),this.elt[1]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE,jsts.geom.Location.NONE,jsts.geom.Location.NONE),this.elt[e].setLocations(t,n,i)):arguments.length===3?(t=arguments[0],n=arguments[1],i=arguments[2],this.elt[0]=new jsts.geomgraph.TopologyLocation(t,n,i),this.elt[1]=new jsts.geomgraph.TopologyLocation(t,n,i)):arguments.length===2?(e=arguments[0],t=arguments[1],this.elt[0]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE),this.elt[1]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE),this.elt[e].setLocation(t)):arguments[0]instanceof jsts.geomgraph.Label?(r=arguments[0],this.elt[0]=new jsts.geomgraph.TopologyLocation(r.elt[0]),this.elt[1]=new jsts.geomgraph.TopologyLocation(r.elt[1])):typeof arguments[0]=="number"&&(t=arguments[0],this.elt[0]=new jsts.geomgraph.TopologyLocation(t),this.elt[1]=new jsts.geomgraph.TopologyLocation(t))},jsts.geomgraph.Label.toLineLabel=function(e){var t,n=new jsts.geomgraph.Label(jsts.geom.Location.NONE);for(t=0;t<2;t++)n.setLocation(t,e.getLocation(t));return n},jsts.geomgraph.Label.prototype.elt=null,jsts.geomgraph.Label.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},jsts.geomgraph.Label.prototype.getLocation=function(e,t){return arguments.length==1?this.getLocation2.apply(this,arguments):this.elt[e].get(t)},jsts.geomgraph.Label.prototype.getLocation2=function(e){return this.elt[e].get(jsts.geomgraph.Position.ON)},jsts.geomgraph.Label.prototype.setLocation=function(e,t,n){if(arguments.length==2){this.setLocation2.apply(this,arguments);return}this.elt[e].setLocation(t,n)},jsts.geomgraph.Label.prototype.setLocation2=function(e,t){this.elt[e].setLocation(jsts.geomgraph.Position.ON,t)},jsts.geomgraph.Label.prototype.setAllLocations=function(e,t){this.elt[e].setAllLocations(t)},jsts.geomgraph.Label.prototype.setAllLocationsIfNull=function(e,t){if(arguments.length==1){this.setAllLocationsIfNull2.apply(this,arguments);return}this.elt[e].setAllLocationsIfNull(t)},jsts.geomgraph.Label.prototype.setAllLocationsIfNull2=function(e){this.setAllLocationsIfNull(0,e),this.setAllLocationsIfNull(1,e)},jsts.geomgraph.Label.prototype.merge=function(e){var t;for(t=0;t<2;t++)this.elt[t]===null&&e.elt[t]!==null?this.elt[t]=new jsts.geomgraph.TopologyLocation(e.elt[t]):this.elt[t].merge(e.elt[t])},jsts.geomgraph.Label.prototype.getGeometryCount=function(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e},jsts.geomgraph.Label.prototype.isNull=function(e){return this.elt[e].isNull()},jsts.geomgraph.Label.prototype.isAnyNull=function(e){return this.elt[e].isAnyNull()},jsts.geomgraph.Label.prototype.isArea=function(){return arguments.length==1?this.isArea2(arguments[0]):this.elt[0].isArea()||this.elt[1].isArea()},jsts.geomgraph.Label.prototype.isArea2=function(e){return this.elt[e].isArea()},jsts.geomgraph.Label.prototype.isLine=function(e){return this.elt[e].isLine()},jsts.geomgraph.Label.prototype.isEqualOnSide=function(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)},jsts.geomgraph.Label.prototype.allPositionsEqual=function(e,t){return this.elt[e].allPositionsEqual(t)},jsts.geomgraph.Label.prototype.toLine=function(e){this.elt[e].isArea()&&(this.elt[e]=new jsts.geomgraph.TopologyLocation(this.elt[e].location[0]))},jsts.geomgraph.Quadrant=function(){},jsts.geomgraph.Quadrant.NE=0,jsts.geomgraph.Quadrant.NW=1,jsts.geomgraph.Quadrant.SW=2,jsts.geomgraph.Quadrant.SE=3,jsts.geomgraph.Quadrant.quadrant=function(e,t){if(e instanceof jsts.geom.Coordinate)return jsts.geomgraph.Quadrant.quadrant2.apply(this,arguments);if(e===0&&t===0)throw new jsts.error.IllegalArgumentError("Cannot compute the quadrant for point ( "+e+", "+t+" )");return e>=0?t>=0?jsts.geomgraph.Quadrant.NE:jsts.geomgraph.Quadrant.SE:t>=0?jsts.geomgraph.Quadrant.NW:jsts.geomgraph.Quadrant.SW},jsts.geomgraph.Quadrant.quadrant2=function(e,t){if(t.x===e.x&&t.y===e.y)throw new jsts.error.IllegalArgumentError("Cannot compute the quadrant for two identical points "+e);return t.x>=e.x?t.y>=e.y?jsts.geomgraph.Quadrant.NE:jsts.geomgraph.Quadrant.SE:t.y>=e.y?jsts.geomgraph.Quadrant.NW:jsts.geomgraph.Quadrant.SW},jsts.geomgraph.Quadrant.isOpposite=function(e,t){if(e===t)return!1;var n=(e-t+4)%4;return n===2?!0:!1},jsts.geomgraph.Quadrant.commonHalfPlane=function(e,t){if(e===t)return e;var n=(e-t+4)%4;if(n===2)return-1;var r=e<t?e:t,i=e>t?e:t;return r===0&&i===3?3:r},jsts.geomgraph.Quadrant.isInHalfPlane=function(e,t){return t===jsts.geomgraph.Quadrant.SE?e===jsts.geomgraph.Quadrant.SE||e===jsts.geomgraph.Quadrant.SW:e===t||e===t+1},jsts.geomgraph.Quadrant.isNorthern=function(e){return e===jsts.geomgraph.Quadrant.NE||e===jsts.geomgraph.Quadrant.NW},jsts.geomgraph.TopologyLocation=function(){this.location=[];if(arguments.length===3){var e=arguments[0],t=arguments[1],n=arguments[2];this.init(3),this.location[jsts.geomgraph.Position.ON]=e,this.location[jsts.geomgraph.Position.LEFT]=t,this.location[jsts.geomgraph.Position.RIGHT]=n}else if(arguments[0]instanceof jsts.geomgraph.TopologyLocation){var r=arguments[0];this.init(r.location.length);if(r!=null)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}else if(typeof arguments[0]=="number"){var e=arguments[0];this.init(1),this.location[jsts.geomgraph.Position.ON]=e}else if(arguments[0]instanceof Array){var s=arguments[0];this.init(s.length)}},jsts.geomgraph.TopologyLocation.prototype.location=null,jsts.geomgraph.TopologyLocation.prototype.init=function(e){this.location[e-1]=null,this.setAllLocations(jsts.geom.Location.NONE)},jsts.geomgraph.TopologyLocation.prototype.get=function(e){return e<this.location.length?this.location[e]:jsts.geom.Location.NONE},jsts.geomgraph.TopologyLocation.prototype.isNull=function(){for(var e=0;e<this.location.length;e++)if(this.location[e]!==jsts.geom.Location.NONE)return!1;return!0},jsts.geomgraph.TopologyLocation.prototype.isAnyNull=function(){for(var e=0;e<this.location.length;e++)if(this.location[e]===jsts.geom.Location.NONE)return!0;return!1},jsts.geomgraph.TopologyLocation.prototype.isEqualOnSide=function(e,t){return this.location[t]==e.location[t]},jsts.geomgraph.TopologyLocation.prototype.isArea=function(){return this.location.length>1},jsts.geomgraph.TopologyLocation.prototype.isLine=function(){return this.location.length===1},jsts.geomgraph.TopologyLocation.prototype.flip=function(){if(this.location.length<=1)return;var e=this.location[jsts.geomgraph.Position.LEFT];this.location[jsts.geomgraph.Position.LEFT]=this.location[jsts.geomgraph.Position.RIGHT],this.location[jsts.geomgraph.Position.RIGHT]=e},jsts.geomgraph.TopologyLocation.prototype.setAllLocations=function(e){for(var t=0;t<this.location.length;t++)this.location[t]=e},jsts.geomgraph.TopologyLocation.prototype.setAllLocationsIfNull=function(e){for(var t=0;t<this.location.length;t++)this.location[t]===jsts.geom.Location.NONE&&(this.location[t]=e)},jsts.geomgraph.TopologyLocation.prototype.setLocation=function(e,t){t!==undefined?this.location[e]=t:this.setLocation(jsts.geomgraph.Position.ON,e)},jsts.geomgraph.TopologyLocation.prototype.getLocations=function(){return location},jsts.geomgraph.TopologyLocation.prototype.setLocations=function(e,t,n){this.location[jsts.geomgraph.Position.ON]=e,this.location[jsts.geomgraph.Position.LEFT]=t,this.location[jsts.geomgraph.Position.RIGHT]=n},jsts.geomgraph.TopologyLocation.prototype.allPositionsEqual=function(e){for(var t=0;t<this.location.length;t++)if(this.location[t]!==e)return!1;return!0},jsts.geomgraph.TopologyLocation.prototype.merge=function(e){if(e.location.length>this.location.length){var t=[];t[jsts.geomgraph.Position.ON]=this.location[jsts.geomgraph.Position.ON],t[jsts.geomgraph.Position.LEFT]=jsts.geom.Location.NONE,t[jsts.geomgraph.Position.RIGHT]=jsts.geom.Location.NONE,this.location=t}for(var n=0;n<this.location.length;n++)this.location[n]===jsts.geom.Location.NONE&&n<e.location.length&&(this.location[n]=e.location[n])},jsts.geomgraph.index.EdgeSetIntersector=function(){},jsts.geomgraph.index.EdgeSetIntersector.prototype.computeIntersections=function(e,t,n){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.index.EdgeSetIntersector.prototype.computeIntersections2=function(e,t,n){throw new jsts.error.AbstractMethodInvocationError},function(){var e=javascript.util.ArrayList;jsts.geomgraph.index.SegmentIntersector=function(e,t,n){this.li=e,this.includeProper=t,this.recordIsolated=n},jsts.geomgraph.index.SegmentIntersector.isAdjacentSegments=function(e,t){return Math.abs(e-t)===1},jsts.geomgraph.index.SegmentIntersector.prototype._hasIntersection=!1,jsts.geomgraph.index.SegmentIntersector.prototype.hasProper=!1,jsts.geomgraph.index.SegmentIntersector.prototype.hasProperInterior=!1,jsts.geomgraph.index.SegmentIntersector.prototype.properIntersectionPoint=null,jsts.geomgraph.index.SegmentIntersector.prototype.li=null,jsts.geomgraph.index.SegmentIntersector.prototype.includeProper=null,jsts.geomgraph.index.SegmentIntersector.prototype.recordIsolated=null,jsts.geomgraph.index.SegmentIntersector.prototype.isSelfIntersection=null,jsts.geomgraph.index.SegmentIntersector.prototype.numIntersections=0,jsts.geomgraph.index.SegmentIntersector.prototype.numTests=0,jsts.geomgraph.index.SegmentIntersector.prototype.bdyNodes=null,jsts.geomgraph.index.SegmentIntersector.prototype.setBoundaryNodes=function(e,t){this.bdyNodes=[],this.bdyNodes[0]=e,this.bdyNodes[1]=t},jsts.geomgraph.index.SegmentIntersector.prototype.getProperIntersectionPoint=function(){return this.properIntersectionPoint},jsts.geomgraph.index.SegmentIntersector.prototype.hasIntersection=function(){return this._hasIntersection},jsts.geomgraph.index.SegmentIntersector.prototype.hasProperIntersection=function(){return this.hasProper},jsts.geomgraph.index.SegmentIntersector.prototype.hasProperInteriorIntersection=function(){return this.hasProperInterior},jsts.geomgraph.index.SegmentIntersector.prototype.isTrivialIntersection=function(e,t,n,r){if(e===n&&this.li.getIntersectionNum()===1){if(jsts.geomgraph.index.SegmentIntersector.isAdjacentSegments(t,r))return!0;if(e.isClosed()){var i=e.getNumPoints()-1;if(t===0&&r===i||r===0&&t===i)return!0}}return!1},jsts.geomgraph.index.SegmentIntersector.prototype.addIntersections=function(e,t,n,r){if(e===n&&t===r)return;this.numTests++;var i=e.getCoordinates()[t],s=e.getCoordinates()[t+1],o=n.getCoordinates()[r],u=n.getCoordinates()[r+1];this.li.computeIntersection(i,s,o,u);if(this.li.hasIntersection()){this.recordIsolated&&(e.setIsolated(!1),n.setIsolated(!1)),this.numIntersections++;if(!this.isTrivialIntersection(e,t,n,r)){this._hasIntersection=!0;if(this.includeProper||!this.li.isProper())e.addIntersections(this.li,t,0),n.addIntersections(this.li,r,1);this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).clone(),this.hasProper=!0,this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))}}},jsts.geomgraph.index.SegmentIntersector.prototype.isBoundaryPoint=function(e,t){if(t===null)return!1;if(t instanceof Array)return this.isBoundaryPoint(e,t[0])?!0:this.isBoundaryPoint(e,t[1])?!0:!1;for(var n=t.iterator();n.hasNext();){var r=n.next(),i=r.getCoordinate();if(e.isIntersection(i))return!0}return!1}}(),jsts.geomgraph.index.SimpleEdgeSetIntersector=function(){},jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype=new jsts.geomgraph.index.EdgeSetIntersector,jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.nOverlaps=0,jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.computeIntersections=function(e,t,n){if(t instanceof javascript.util.List){this.computeIntersections2.apply(this,arguments);return}this.nOverlaps=0;for(var r=e.iterator();r.hasNext();){var i=r.next();for(var s=e.iterator();s.hasNext();){var o=s.next();(n||i!=o)&&this.computeIntersects(i,o,t)}}},jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.computeIntersections2=function(e,t,n){this.nOverlaps=0;for(var r=e.iterator();r.hasNext();){var i=r.next();for(var s=t.iterator();s.hasNext();){var o=s.next();this.computeIntersects(i,o,n)}}},jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.computeIntersects=function(e,t,n){var r=e.getCoordinates(),i=t.getCoordinates(),s,o;for(s=0;s<r.length-1;s++)for(o=0;o<i.length-1;o++)n.addIntersections(e,s,t,o)},jsts.geomgraph.index.SimpleMCSweepLineIntersector=function(){throw new jsts.error.NotImplementedError},jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype=new jsts.geomgraph.index.EdgeSetIntersector,jsts.io.OpenLayersParser=function(e){this.geometryFactory=e||new jsts.geom.GeometryFactory},jsts.io.OpenLayersParser.prototype.read=function(e){if(e.CLASS_NAME==="OpenLayers.Geometry.Point")return this.convertFromPoint(e);if(e.CLASS_NAME==="OpenLayers.Geometry.LineString")return this.convertFromLineString(e);if(e.CLASS_NAME==="OpenLayers.Geometry.LinearRing")return this.convertFromLinearRing(e);if(e.CLASS_NAME==="OpenLayers.Geometry.Polygon")return this.convertFromPolygon(e);if(e.CLASS_NAME==="OpenLayers.Geometry.MultiPoint")return this.convertFromMultiPoint(e);if(e.CLASS_NAME==="OpenLayers.Geometry.MultiLineString")return this.convertFromMultiLineString(e);if(e.CLASS_NAME==="OpenLayers.Geometry.MultiPolygon")return this.convertFromMultiPolygon(e);if(e.CLASS_NAME==="OpenLayers.Geometry.Collection")return this.convertFromCollection(e)},jsts.io.OpenLayersParser.prototype.convertFromPoint=function(e){return this.geometryFactory.createPoint(new jsts.geom.Coordinate(e.x,e.y))},jsts.io.OpenLayersParser.prototype.convertFromLineString=function(e){var t,n=[];for(t=0;t<e.components.length;t++)n.push(new jsts.geom.Coordinate(e.components[t].x,e.components[t].y));return this.geometryFactory.createLineString(n)},jsts.io.OpenLayersParser.prototype.convertFromLinearRing=function(e){var t,n=[];for(t=0;t<e.components.length;t++)n.push(new jsts.geom.Coordinate(e.components[t].x,e.components[t].y));return this.geometryFactory.createLinearRing(n)},jsts.io.OpenLayersParser.prototype.convertFromPolygon=function(e){var t,n=null,r=[];for(t=0;t<e.components.length;t++){var i=this.convertFromLinearRing(e.components[t]);t===0?n=i:r.push(i)}return this.geometryFactory.createPolygon(n,r)},jsts.io.OpenLayersParser.prototype.convertFromMultiPoint=function(e){var t,n=[];for(t=0;t<e.components.length;t++)n.push(this.convertFromPoint(e.components[t]));return this.geometryFactory.createMultiPoint(n)},jsts.io.OpenLayersParser.prototype.convertFromMultiLineString=function(e){var t,n=[];for(t=0;t<e.components.length;t++)n.push(this.convertFromLineString(e.components[t]));return this.geometryFactory.createMultiLineString(n)},jsts.io.OpenLayersParser.prototype.convertFromMultiPolygon=function(e){var t,n=[];for(t=0;t<e.components.length;t++)n.push(this.convertFromPolygon(e.components[t]));return this.geometryFactory.createMultiPolygon(n)},jsts.io.OpenLayersParser.prototype.convertFromCollection=function(e){var t,n=[];for(t=0;t<e.components.length;t++)n.push(this.convertFrom(e.components[t]));return this.geometryFactory.createGeometryCollection(n)},jsts.io.OpenLayersParser.prototype.write=function(e){if(e.CLASS_NAME==="jsts.geom.Point")return this.convertToPoint(e.coordinate);if(e.CLASS_NAME==="jsts.geom.LineString")return this.convertToLineString(e);if(e.CLASS_NAME==="jsts.geom.LinearRing")return this.convertToLinearRing(e);if(e.CLASS_NAME==="jsts.geom.Polygon")return this.convertToPolygon(e);if(e.CLASS_NAME==="jsts.geom.MultiPoint")return this.convertToMultiPoint(e);if(e.CLASS_NAME==="jsts.geom.MultiLineString")return this.convertToMultiLineString(e);if(e.CLASS_NAME==="jsts.geom.MultiPolygon")return this.convertToMultiPolygon(e);if(e.CLASS_NAME==="jsts.geom.GeometryCollection")return this.convertToCollection(e)},jsts.io.OpenLayersParser.prototype.convertToPoint=function(e){return new OpenLayers.Geometry.Point(e.x,e.y)},jsts.io.OpenLayersParser.prototype.convertToLineString=function(e){var t,n=[];for(t=0;t<e.points.length;t++){var r=e.points[t];n.push(this.convertToPoint(r))}return new OpenLayers.Geometry.LineString(n)},jsts.io.OpenLayersParser.prototype.convertToLinearRing=function(e){var t,n=[];for(t=0;t<e.points.length;t++){var r=e.points[t];n.push(this.convertToPoint(r))}return new OpenLayers.Geometry.LinearRing(n)},jsts.io.OpenLayersParser.prototype.convertToPolygon=function(e){var t,n=[];n.push(this.convertToLinearRing(e.shell));for(t=0;t<e.holes.length;t++){var r=e.holes[t];n.push(this.convertToLinearRing(r))}return new OpenLayers.Geometry.Polygon(n)},jsts.io.OpenLayersParser.prototype.convertToMultiPoint=function(e){var t,n=[];for(t=0;t<e.geometries.length;t++){var r=e.geometries[t].coordinate;n.push(new OpenLayers.Geometry.Point(r.x,r.y))}return new OpenLayers.Geometry.MultiPoint(n)},jsts.io.OpenLayersParser.prototype.convertToMultiLineString=function(e){var t,n=[];for(t=0;t<e.geometries.length;t++)n.push(this.convertToLineString(e.geometries[t]));return new OpenLayers.Geometry.MultiLineString(n)},jsts.io.OpenLayersParser.prototype.convertToMultiPolygon=function(e){var t,n=[];for(t=0;t<e.geometries.length;t++)n.push(this.convertToPolygon(e.geometries[t]));return new OpenLayers.Geometry.MultiPolygon(n)},jsts.io.OpenLayersParser.prototype.convertToCollection=function(e){var t,n=[];for(t=0;t<e.geometries.length;t++){var r=e.geometries[t],i=this.write(r);n.push(i)}return new OpenLayers.Geometry.Collection(n)},jsts.io.WKTParser=function(e){this.geometryFactory=e||new jsts.geom.GeometryFactory,this.regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/}},jsts.io.WKTParser.prototype.read=function(e){var t,n,r;e=e.replace(/[\n\r]/g," ");var i=this.regExes.typeStr.exec(e);e.search("EMPTY")!==-1&&(i=this.regExes.emptyTypeStr.exec(e),i[2]=undefined),i&&(n=i[1].toLowerCase(),r=i[2],this.parse[n]&&(t=this.parse[n].apply(this,[r])));if(t===undefined)throw new Error("Could not parse WKT "+e);return t},jsts.io.WKTParser.prototype.write=function(e){return this.extractGeometry(e)},jsts.io.WKTParser.prototype.extractGeometry=function(e){var t=e.CLASS_NAME.split(".")[2].toLowerCase();if(!this.extract[t])return null;var n=t.toUpperCase(),r;return e.isEmpty()?r=n+" EMPTY":r=n+"("+this.extract[t].apply(this,[e])+")",r},jsts.io.WKTParser.prototype.extract={coordinate:function(e){return e.x+" "+e.y},point:function(e){return e.coordinate.x+" "+e.coordinate.y},multipoint:function(e){var t=[];for(var n=0,r=e.geometries.length;n<r;++n)t.push("("+this.extract.point.apply(this,[e.geometries[n]])+")");return t.join(",")},linestring:function(e){var t=[];for(var n=0,r=e.points.length;n<r;++n)t.push(this.extract.coordinate.apply(this,[e.points[n]]));return t.join(",")},multilinestring:function(e){var t=[];for(var n=0,r=e.geometries.length;n<r;++n)t.push("("+this.extract.linestring.apply(this,[e.geometries[n]])+")");return t.join(",")},polygon:function(e){var t=[];t.push("("+this.extract.linestring.apply(this,[e.shell])+")");for(var n=0,r=e.holes.length;n<r;++n)t.push("("+this.extract.linestring.apply(this,[e.holes[n]])+")");return t.join(",")},multipolygon:function(e){var t=[];for(var n=0,r=e.geometries.length;n<r;++n)t.push("("+this.extract.polygon.apply(this,[e.geometries[n]])+")");return t.join(",")},geometrycollection:function(e){var t=[];for(var n=0,r=e.geometries.length;n<r;++n)t.push(this.extractGeometry.apply(this,[e.geometries[n]]));return t.join(",")}},jsts.io.WKTParser.prototype.parse={point:function(e){if(e===undefined)return this.geometryFactory.createPoint(null);var t=e.trim().split(this.regExes.spaces);return this.geometryFactory.createPoint(new jsts.geom.Coordinate(t[0],t[1]))},multipoint:function(e){if(e===undefined)return this.geometryFactory.createMultiPoint(null);var t,n=e.trim().split(","),r=[];for(var i=0,s=n.length;i<s;++i)t=n[i].replace(this.regExes.trimParens,"$1"),r.push(this.parse.point.apply(this,[t]));return this.geometryFactory.createMultiPoint(r)},linestring:function(e){if(e===undefined)return this.geometryFactory.createLineString(null);var t=e.trim().split(","),n=[],r;for(var i=0,s=t.length;i<s;++i)r=t[i].trim().split(this.regExes.spaces),n.push(new jsts.geom.Coordinate(r[0],r[1]));return this.geometryFactory.createLineString(n)},linearring:function(e){if(e===undefined)return this.geometryFactory.createLinearRing(null);var t=e.trim().split(","),n=[],r;for(var i=0,s=t.length;i<s;++i)r=t[i].trim().split(this.regExes.spaces),n.push(new jsts.geom.Coordinate(r[0],r[1]));return this.geometryFactory.createLinearRing(n)},multilinestring:function(e){if(e===undefined)return this.geometryFactory.createMultiLineString(null);var t,n=e.trim().split(this.regExes.parenComma),r=[];for(var i=0,s=n.length;i<s;++i)t=n[i].replace(this.regExes.trimParens,"$1"),r.push(this.parse.linestring.apply(this,[t]));return this.geometryFactory.createMultiLineString(r)},polygon:function(e){if(e===undefined)return this.geometryFactory.createPolygon(null);var t,n,r,i=e.trim().split(this.regExes.parenComma),s,o=[];for(var u=0,a=i.length;u<a;++u)t=i[u].replace(this.regExes.trimParens,"$1"),n=this.parse.linestring.apply(this,[t]),r=this.geometryFactory.createLinearRing(n.points),u===0?s=r:o.push(r);return this.geometryFactory.createPolygon(s,o)},multipolygon:function(e){if(e===undefined)return this.geometryFactory.createMultiPolygon(null);var t,n=e.trim().split(this.regExes.doubleParenComma),r=[];for(var i=0,s=n.length;i<s;++i)t=n[i].replace(this.regExes.trimParens,"$1"),r.push(this.parse.polygon.apply(this,[t]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(e){if(e===undefined)return this.geometryFactory.createGeometryCollection(null);e=e.replace(/,\s*([A-Za-z])/g,"|$1");var t=e.trim().split("|"),n=[];for(var r=0,i=t.length;r<i;++r)n.push(jsts.io.WKTParser.prototype.read.apply(this,[t[r]]));return this.geometryFactory.createGeometryCollection(n)}},jsts.io.WKTReader=function(e){this.geometryFactory=e||new jsts.geom.GeometryFactory,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new jsts.io.WKTParser(this.geometryFactory)},jsts.io.WKTReader.prototype.read=function(e){var t=this.parser.read(e);return this.precisionModel.getType()===jsts.geom.PrecisionModel.FIXED&&this.reducePrecision(t),t},jsts.io.WKTReader.prototype.reducePrecision=function(e){var t,n;if(e.coordinate)this.precisionModel.makePrecise(e.coordinate);else if(e.points)for(t=0,n=e.points.length;t<n;t++)this.precisionModel.makePrecise(e.points[t]);else if(e.geometries)for(t=0,n=e.geometries.length;t<n;t++)this.reducePrecision(e.geometries[t])},jsts.io.WKTWriter=function(){this.parser=new jsts.io.WKTParser(this.geometryFactory)},jsts.io.WKTWriter.prototype.write=function(e){var t=this.parser.write(e);return t},jsts.io.WKTWriter.toLineString=function(e,t){if(arguments.length!==2)throw new jsts.error.NotImplementedError;return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"},jsts.operation.BoundaryOp=function(e,t){this.geom=e,this.geomFact=e.getFactory(),this.bnRule=t||jsts.algorithm.BoundaryNodeRule.MOD2_BOUNDARY_RULE},jsts.operation.BoundaryOp.prototype.geom=null,jsts.operation.BoundaryOp.prototype.geomFact=null,jsts.operation.BoundaryOp.prototype.bnRule=null,jsts.operation.BoundaryOp.prototype.getBoundary=function(){return this.geom instanceof jsts.geom.LineString?this.boundaryLineString(this.geom):this.geom instanceof jsts.geom.MultiLineString?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()},jsts.operation.BoundaryOp.prototype.getEmptyMultiPoint=function(){return this.geomFact.createMultiPoint(null)},jsts.operation.BoundaryOp.prototype.boundaryMultiLineString=function(e){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var t=this.computeBoundaryCoordinates(e);return t.length==1?this.geomFact.createPoint(t[0]):this.geomFact.createMultiPoint(t)},jsts.operation.BoundaryOp.prototype.endpoints=null,jsts.operation.BoundaryOp.prototype.computeBoundaryCoordinates=function(e){var t,n,r,i=[];this.endpoints=[];for(t=0;t<e.getNumGeometries();t++){n=e.getGeometryN(t);if(n.getNumPoints()==0)continue;this.addEndpoint(n.getCoordinateN(0)),this.addEndpoint(n.getCoordinateN(n.getNumPoints()-1))}for(t=0;t<this.endpoints.length;t++)r=this.endpoints[t],this.bnRule.isInBoundary(r.count)&&i.push(r.coordinate);return i},jsts.operation.BoundaryOp.prototype.addEndpoint=function(e){var t,n,r=!1;for(t=0;t<this.endpoints.length;t++){n=this.endpoints[t];if(n.coordinate.equals(e)){r=!0;break}}r||(n={},n.coordinate=e,n.count=0,this.endpoints.push(n)),n.count++},jsts.operation.BoundaryOp.prototype.boundaryLineString=function(e){if(this.geom.isEmpty())return this.getEmptyMultiPoint();if(e.isClosed()){var t=this.bnRule.isInBoundary(2);return t?e.getStartPoint():this.geomFact.createMultiPoint(null)}return this.geomFact.createMultiPoint([e.getStartPoint(),e.getEndPoint()])},jsts.operation.GeometryGraphOperation=function(e,t,n){this.li=new jsts.algorithm.RobustLineIntersector,this.arg=[];if(e===undefined)return;if(t===undefined){this.setComputationPrecision(e.getPrecisionModel()),this.arg[0]=new jsts.geomgraph.GeometryGraph(0,e);return}n=n||jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE,e.getPrecisionModel().compareTo(t.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(t.getPrecisionModel()),this.arg[0]=new jsts.geomgraph.GeometryGraph(0,e,n),this.arg[1]=new jsts.geomgraph.GeometryGraph(1,t,n)},jsts.operation.GeometryGraphOperation.prototype.li=null,jsts.operation.GeometryGraphOperation.prototype.resultPrecisionModel=null,jsts.operation.GeometryGraphOperation.prototype.arg=null,jsts.operation.GeometryGraphOperation.prototype.getArgGeometry=function(e){return arg[e].getGeometry()},jsts.operation.GeometryGraphOperation.prototype.setComputationPrecision=function(e){this.resultPrecisionModel=e,this.li.setPrecisionModel(this.resultPrecisionModel)},jsts.operation.IsSimpleOp=function(e){this.geom=e},jsts.operation.IsSimpleOp.prototype.geom=null,jsts.operation.IsSimpleOp.prototype.isClosedEndpointsInInterior=!0,jsts.operation.IsSimpleOp.prototype.nonSimpleLocation=null,jsts.operation.IsSimpleOp.prototype.IsSimpleOp=function(e){this.geom=e},jsts.operation.IsSimpleOp.prototype.isSimple=function(){return this.nonSimpleLocation=null,this.geom instanceof jsts.geom.LineString?this.isSimpleLinearGeometry(this.geom):this.geom instanceof jsts.geom.MultiLineString?this.isSimpleLinearGeometry(this.geom):this.geom instanceof jsts.geom.MultiPoint?this.isSimpleMultiPoint(this.geom):!0},jsts.operation.IsSimpleOp.prototype.isSimpleMultiPoint=function(e){if(e.isEmpty())return!0;var t=[];for(var n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n),i=r.getCoordinate();for(var s=0;s<t.length;s++){var o=t[s];if(i.equals2D(o))return this.nonSimpleLocation=i,!1}t.push(i)}return!0},jsts.operation.IsSimpleOp.prototype.isSimpleLinearGeometry=function(e){if(e.isEmpty())return!0;var t=new jsts.geomgraph.GeometryGraph(0,e),n=new jsts.algorithm.RobustLineIntersector,r=t.computeSelfNodes(n,!0);return r.hasIntersection()?r.hasProperIntersection()?(this.nonSimpleLocation=r.getProperIntersectionPoint(),!1):this.hasNonEndpointIntersection(t)?!1:this.isClosedEndpointsInInterior&&this.hasClosedEndpointIntersection(t)?!1:!0:!0},jsts.operation.IsSimpleOp.prototype.hasNonEndpointIntersection=function(e){for(var t=e.getEdgeIterator();t.hasNext();){var n=t.next(),r=n.getMaximumSegmentIndex();for(var i=n.getEdgeIntersectionList().iterator();i.hasNext();){var s=i.next();if(!s.isEndPoint(r))return this.nonSimpleLocation=s.getCoordinate(),!0}}return!1},jsts.operation.IsSimpleOp.prototype.hasClosedEndpointIntersection=function(e){var t=new javascript.util.TreeMap;for(var n=e.getEdgeIterator();n.hasNext();){var r=n.next(),i=r.getMaximumSegmentIndex(),s=r.isClosed(),o=r.getCoordinate(0);this.addEndpoint(t,o,s);var u=r.getCoordinate(r.getNumPoints()-1);this.addEndpoint(t,u,s)}for(var n=t.values().iterator();n.hasNext();){var a=n.next();if(a.isClosed&&a.degree!=2)return this.nonSimpleLocation=a.getCoordinate(),!0}return!1},jsts.operation.IsSimpleOp.EndpointInfo=function(e){this.pt=e,this.isClosed=!1,this.degree=0},jsts.operation.IsSimpleOp.EndpointInfo.prototype.pt=null,jsts.operation.IsSimpleOp.EndpointInfo.prototype.isClosed=null,jsts.operation.IsSimpleOp.EndpointInfo.prototype.degree=null,jsts.operation.IsSimpleOp.EndpointInfo.prototype.getCoordinate=function(){return this.pt},jsts.operation.IsSimpleOp.EndpointInfo.prototype.addEndpoint=function(e){this.degree++,this.isClosed=this.isClosed||e},jsts.operation.IsSimpleOp.prototype.addEndpoint=function(e,t,n){var r=e.get(t);r===null&&(r=new jsts.operation.IsSimpleOp.EndpointInfo(t),e.put(t,r)),r.addEndpoint(n)},jsts.operation.buffer.BufferBuilder=function(e){this.bufParams=e,this.edgeList=new jsts.geomgraph.EdgeList},jsts.operation.buffer.BufferBuilder.depthDelta=function(e){var t=e.getLocation(0,jsts.geomgraph.Position.LEFT),n=e.getLocation(0,jsts.geomgraph.Position.RIGHT);return t===jsts.geom.Location.INTERIOR&&n===jsts.geom.Location.EXTERIOR?1:t===jsts.geom.Location.EXTERIOR&&n===jsts.geom.Location.INTERIOR?-1:0},jsts.operation.buffer.BufferBuilder.prototype.bufParams=null,jsts.operation.buffer.BufferBuilder.prototype.workingPrecisionModel=null,jsts.operation.buffer.BufferBuilder.prototype.workingNoder=null,jsts.operation.buffer.BufferBuilder.prototype.geomFact=null,jsts.operation.buffer.BufferBuilder.prototype.graph=null,jsts.operation.buffer.BufferBuilder.prototype.edgeList=null,jsts.operation.buffer.BufferBuilder.prototype.setWorkingPrecisionModel=function(e){this.workingPrecisionModel=e},jsts.operation.buffer.BufferBuilder.prototype.setNoder=function(e){this.workingNoder=e},jsts.operation.buffer.BufferBuilder.prototype.buffer=function(e,t){var n=this.workingPrecisionModel;n===null&&(n=e.getPrecisionModel()),this.geomFact=e.getFactory();var r=new jsts.operation.buffer.OffsetCurveBuilder(n,this.bufParams),i=new jsts.operation.buffer.OffsetCurveSetBuilder(e,t,r),s=i.getCurves();if(s.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(s,n),this.graph=new jsts.geomgraph.PlanarGraph(new jsts.operation.overlay.OverlayNodeFactory),this.graph.addEdges(this.edgeList.getEdges());var o=this.createSubgraphs(this.graph),u=new jsts.operation.overlay.PolygonBuilder(this.geomFact);this.buildSubgraphs(o,u);var a=u.getPolygons();if(a.size()<=0)return this.createEmptyResultGeometry();var f=this.geomFact.buildGeometry(a);return f},jsts.operation.buffer.BufferBuilder.prototype.getNoder=function(e){if(this.workingNoder!==null)return this.workingNoder;var t=new jsts.noding.MCIndexNoder,n=new jsts.algorithm.RobustLineIntersector;return n.setPrecisionModel(e),t.setSegmentIntersector(new jsts.noding.IntersectionAdder(n)),t},jsts.operation.buffer.BufferBuilder.prototype.computeNodedEdges=function(e,t){var n=this.getNoder(t);n.computeNodes(e);var r=n.getNodedSubstrings();for(var i=r.iterator();i.hasNext();){var s=i.next(),o=s.getData(),u=new jsts.geomgraph.Edge(s.getCoordinates(),new jsts.geomgraph.Label(o));this.insertUniqueEdge(u)}},jsts.operation.buffer.BufferBuilder.prototype.insertUniqueEdge=function(e){var t=this.edgeList.findEqualEdge(e);if(t!=null){var n=t.getLabel(),r=e.getLabel();t.isPointwiseEqual(e)||(r=new jsts.geomgraph.Label(e.getLabel()),r.flip()),n.merge(r);var i=jsts.operation.buffer.BufferBuilder.depthDelta(r),s=t.getDepthDelta(),o=s+i;t.setDepthDelta(o)}else this.edgeList.add(e),e.setDepthDelta(jsts.operation.buffer.BufferBuilder
.depthDelta(e.getLabel()))},jsts.operation.buffer.BufferBuilder.prototype.createSubgraphs=function(e){var t=[];for(var n=e.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new jsts.operation.buffer.BufferSubgraph;i.create(r),t.push(i)}}var s=function(e,t){return e.compareTo(t)};return t.sort(s),t.reverse(),t},jsts.operation.buffer.BufferBuilder.prototype.buildSubgraphs=function(e,t){var n=[];for(var r=0;r<e.length;r++){var i=e[r],s=i.getRightmostCoordinate(),o=new jsts.operation.buffer.SubgraphDepthLocater(n),u=o.getDepth(s);i.computeDepth(u),i.findResultEdges(),n.push(i),t.add(i.getDirectedEdges(),i.getNodes())}},jsts.operation.buffer.BufferBuilder.convertSegStrings=function(e){var t=new jsts.geom.GeometryFactory,n=new javascript.util.ArrayList;while(e.hasNext()){var r=e.next(),i=t.createLineString(r.getCoordinates());n.add(i)}return t.buildGeometry(n)},jsts.operation.buffer.BufferBuilder.prototype.createEmptyResultGeometry=function(){var e=this.geomFact.createPolygon(null,null);return e},jsts.operation.buffer.BufferInputLineSimplifier=function(e){this.inputLine=e},jsts.operation.buffer.BufferInputLineSimplifier.simplify=function(e,t){var n=new jsts.operation.buffer.BufferInputLineSimplifier(e);return n.simplify(t)},jsts.operation.buffer.BufferInputLineSimplifier.INIT=0,jsts.operation.buffer.BufferInputLineSimplifier.DELETE=1,jsts.operation.buffer.BufferInputLineSimplifier.KEEP=1,jsts.operation.buffer.BufferInputLineSimplifier.prototype.inputLine=null,jsts.operation.buffer.BufferInputLineSimplifier.prototype.distanceTol=null,jsts.operation.buffer.BufferInputLineSimplifier.prototype.isDeleted=null,jsts.operation.buffer.BufferInputLineSimplifier.prototype.angleOrientation=jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE,jsts.operation.buffer.BufferInputLineSimplifier.prototype.simplify=function(e){this.distanceTol=Math.abs(e),e<0&&(this.angleOrientation=jsts.algorithm.CGAlgorithms.CLOCKWISE),this.isDeleted=[],this.isDeleted.length=this.inputLine.length;var t=!1;do t=this.deleteShallowConcavities();while(t);return this.collapseLine()},jsts.operation.buffer.BufferInputLineSimplifier.prototype.deleteShallowConcavities=function(){var e=1,t=this.inputLine.length-1,n=this.findNextNonDeletedIndex(e),r=this.findNextNonDeletedIndex(n),i=!1;while(r<this.inputLine.length){var s=!1;this.isDeletable(e,n,r,this.distanceTol)&&(this.isDeleted[n]=jsts.operation.buffer.BufferInputLineSimplifier.DELETE,s=!0,i=!0),s?e=r:e=n,n=this.findNextNonDeletedIndex(e),r=this.findNextNonDeletedIndex(n)}return i},jsts.operation.buffer.BufferInputLineSimplifier.prototype.findNextNonDeletedIndex=function(e){var t=e+1;while(t<this.inputLine.length&&this.isDeleted[t]===jsts.operation.buffer.BufferInputLineSimplifier.DELETE)t++;return t},jsts.operation.buffer.BufferInputLineSimplifier.prototype.collapseLine=function(){var e=[];for(var t=0;t<this.inputLine.length;t++)this.isDeleted[t]!==jsts.operation.buffer.BufferInputLineSimplifier.DELETE&&e.push(this.inputLine[t]);return e},jsts.operation.buffer.BufferInputLineSimplifier.prototype.isDeletable=function(e,t,n,r){var i=this.inputLine[e],s=this.inputLine[t],o=this.inputLine[n];return this.isConcave(i,s,o)?this.isShallow(i,s,o,r)?this.isShallowSampled(i,s,e,n,r):!1:!1},jsts.operation.buffer.BufferInputLineSimplifier.prototype.isShallowConcavity=function(e,t,n,r){var i=jsts.algorithm.CGAlgorithms.computeOrientation(e,t,n),s=i===this.angleOrientation;if(!s)return!1;var o=jsts.algorithm.CGAlgorithms.distancePointLine(t,e,n);return o<r},jsts.operation.buffer.BufferInputLineSimplifier.NUM_PTS_TO_CHECK=10,jsts.operation.buffer.BufferInputLineSimplifier.prototype.isShallowSampled=function(e,t,n,r,i){var s=parseInt((r-n)/jsts.operation.buffer.BufferInputLineSimplifier.NUM_PTS_TO_CHECK);s<=0&&(s=1);for(var o=n;o<r;o+=s)if(!this.isShallow(e,t,this.inputLine[o],i))return!1;return!0},jsts.operation.buffer.BufferInputLineSimplifier.prototype.isShallow=function(e,t,n,r){var i=jsts.algorithm.CGAlgorithms.distancePointLine(t,e,n);return i<r},jsts.operation.buffer.BufferInputLineSimplifier.prototype.isConcave=function(e,t,n){var r=jsts.algorithm.CGAlgorithms.computeOrientation(e,t,n),i=r===this.angleOrientation;return i},jsts.operation.buffer.BufferOp=function(e,t){this.argGeom=e,this.bufParams=t?t:new jsts.operation.buffer.BufferParameters},jsts.operation.buffer.BufferOp.MAX_PRECISION_DIGITS=12,jsts.operation.buffer.BufferOp.precisionScaleFactor=function(e,t,n){var r=e.getEnvelopeInternal(),i=Math.max(r.getHeight(),r.getWidth()),s=t>0?t:0,o=i+2*s,u=Math.log(o)/Math.log(10)+1,a=u-n,f=Math.pow(10,-a);return f},jsts.operation.buffer.BufferOp.bufferOp=function(e,t){if(arguments.length>2)return jsts.operation.buffer.BufferOp.bufferOp2.apply(this,arguments);var n=new jsts.operation.buffer.BufferOp(e),r=n.getResultGeometry(t);return r},jsts.operation.buffer.BufferOp.bufferOp2=function(e,t,n){if(arguments.length>3)return jsts.operation.buffer.BufferOp.bufferOp3.apply(this,arguments);var r=new jsts.operation.buffer.BufferOp(e,n),i=r.getResultGeometry(t);return i},jsts.operation.buffer.BufferOp.bufferOp3=function(e,t,n){if(arguments.length>4)return jsts.operation.buffer.BufferOp.bufferOp4.apply(this,arguments);var r=new jsts.operation.buffer.BufferOp(e);r.setQuadrantSegments(n);var i=r.getResultGeometry(t);return i},jsts.operation.buffer.BufferOp.bufferOp4=function(e,t,n,r){var i=new jsts.operation.buffer.BufferOp(e);i.setQuadrantSegments(n),i.setEndCapStyle(r);var s=i.getResultGeometry(t);return s},jsts.operation.buffer.BufferOp.prototype.argGeom=null,jsts.operation.buffer.BufferOp.prototype.distance=null,jsts.operation.buffer.BufferOp.prototype.bufParams=null,jsts.operation.buffer.BufferOp.prototype.resultGeometry=null,jsts.operation.buffer.BufferOp.prototype.setEndCapStyle=function(e){this.bufParams.setEndCapStyle(e)},jsts.operation.buffer.BufferOp.prototype.setQuadrantSegments=function(e){this.bufParams.setQuadrantSegments(e)},jsts.operation.buffer.BufferOp.prototype.getResultGeometry=function(e){return this.distance=e,this.computeGeometry(),this.resultGeometry},jsts.operation.buffer.BufferOp.prototype.computeGeometry=function(){this.bufferOriginalPrecision();if(this.resultGeometry!==null)return;var e=this.argGeom.getPrecisionModel();e.getType()===jsts.geom.PrecisionModel.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()},jsts.operation.buffer.BufferOp.prototype.bufferReducedPrecision=function(){var e,t=null;for(e=jsts.operation.buffer.BufferOp.MAX_PRECISION_DIGITS;e>=0;e--){try{this.bufferReducedPrecision2(e)}catch(n){t=n}if(this.resultGeometry!==null)return}throw t},jsts.operation.buffer.BufferOp.prototype.bufferOriginalPrecision=function(){try{var e=new jsts.operation.buffer.BufferBuilder(this.bufParams);this.resultGeometry=e.buffer(this.argGeom,this.distance)}catch(t){}},jsts.operation.buffer.BufferOp.prototype.bufferReducedPrecision2=function(e){var t=jsts.operation.buffer.BufferOp.precisionScaleFactor(this.argGeom,this.distance,e),n=new jsts.geom.PrecisionModel(t);this.bufferFixedPrecision(n)},jsts.operation.buffer.BufferOp.prototype.bufferFixedPrecision=function(e){var t=new jsts.noding.ScaledNoder(new jsts.noding.snapround.MCIndexSnapRounder(new jsts.geom.PrecisionModel(1)),e.getScale()),n=new jsts.operation.buffer.BufferBuilder(this.bufParams);n.setWorkingPrecisionModel(e),n.setNoder(t),this.resultGeometry=n.buffer(this.argGeom,this.distance)},jsts.operation.buffer.BufferParameters=function(e,t,n,r){e&&this.setQuadrantSegments(e),t&&this.setEndCapStyle(t),n&&this.setJoinStyle(n),r&&this.setMitreLimit(r)},jsts.operation.buffer.BufferParameters.CAP_ROUND=1,jsts.operation.buffer.BufferParameters.CAP_FLAT=2,jsts.operation.buffer.BufferParameters.CAP_SQUARE=3,jsts.operation.buffer.BufferParameters.JOIN_ROUND=1,jsts.operation.buffer.BufferParameters.JOIN_MITRE=2,jsts.operation.buffer.BufferParameters.JOIN_BEVEL=3,jsts.operation.buffer.BufferParameters.DEFAULT_QUADRANT_SEGMENTS=8,jsts.operation.buffer.BufferParameters.DEFAULT_MITRE_LIMIT=5,jsts.operation.buffer.BufferParameters.prototype.quadrantSegments=jsts.operation.buffer.BufferParameters.DEFAULT_QUADRANT_SEGMENTS,jsts.operation.buffer.BufferParameters.prototype.endCapStyle=jsts.operation.buffer.BufferParameters.CAP_ROUND,jsts.operation.buffer.BufferParameters.prototype.joinStyle=jsts.operation.buffer.BufferParameters.JOIN_ROUND,jsts.operation.buffer.BufferParameters.prototype.mitreLimit=jsts.operation.buffer.BufferParameters.DEFAULT_MITRE_LIMIT,jsts.operation.buffer.BufferParameters.prototype._isSingleSided=!1,jsts.operation.buffer.BufferParameters.prototype.getQuadrantSegments=function(){return this.quadrantSegments},jsts.operation.buffer.BufferParameters.prototype.setQuadrantSegments=function(e){this.quadrantSegments=e},jsts.operation.buffer.BufferParameters.prototype.setQuadrantSegments=function(e){this.quadrantSegments=e,this.quadrantSegments===0&&(this.joinStyle=jsts.operation.buffer.BufferParameters.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=jsts.operation.buffer.BufferParameters.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),e<=0&&(this.quadrantSegments=1),this.joinStyle!==jsts.operation.buffer.BufferParameters.JOIN_ROUND&&(this.quadrantSegments=jsts.operation.buffer.BufferParameters.DEFAULT_QUADRANT_SEGMENTS)},jsts.operation.buffer.BufferParameters.bufferDistanceError=function(e){var t=Math.PI/2/e;return 1-Math.cos(t/2)},jsts.operation.buffer.BufferParameters.prototype.getEndCapStyle=function(){return this.endCapStyle},jsts.operation.buffer.BufferParameters.prototype.setEndCapStyle=function(e){this.endCapStyle=e},jsts.operation.buffer.BufferParameters.prototype.getJoinStyle=function(){return this.joinStyle},jsts.operation.buffer.BufferParameters.prototype.setJoinStyle=function(e){this.joinStyle=e},jsts.operation.buffer.BufferParameters.prototype.getMitreLimit=function(){return this.mitreLimit},jsts.operation.buffer.BufferParameters.prototype.setMitreLimit=function(e){this.mitreLimit=e},jsts.operation.buffer.BufferParameters.prototype.setSingleSided=function(e){this._isSingleSided=e},jsts.operation.buffer.BufferParameters.prototype.isSingleSided=function(){return this._isSingleSided},jsts.operation.buffer.BufferSubgraph=function(){this.dirEdgeList=new javascript.util.ArrayList,this.nodes=new javascript.util.ArrayList,this.finder=new jsts.operation.buffer.RightmostEdgeFinder},jsts.operation.buffer.BufferSubgraph.prototype.finder=null,jsts.operation.buffer.BufferSubgraph.prototype.dirEdgeList=null,jsts.operation.buffer.BufferSubgraph.prototype.nodes=null,jsts.operation.buffer.BufferSubgraph.prototype.rightMostCoord=null,jsts.operation.buffer.BufferSubgraph.prototype.env=null,jsts.operation.buffer.BufferSubgraph.prototype.getDirectedEdges=function(){return this.dirEdgeList},jsts.operation.buffer.BufferSubgraph.prototype.getNodes=function(){return this.nodes},jsts.operation.buffer.BufferSubgraph.prototype.getEnvelope=function(){if(this.env===null){var e=new jsts.geom.Envelope;for(var t=this.dirEdgeList.iterator();t.hasNext();){var n=t.next(),r=n.getEdge().getCoordinates();for(var i=0;i<r.length-1;i++)e.expandToInclude(r[i])}this.env=e}return this.env},jsts.operation.buffer.BufferSubgraph.prototype.getRightmostCoordinate=function(){return this.rightMostCoord},jsts.operation.buffer.BufferSubgraph.prototype.create=function(e){this.addReachable(e),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()},jsts.operation.buffer.BufferSubgraph.prototype.addReachable=function(e){var t=[];t.push(e);while(t.length!==0){var n=t.pop();this.add(n,t)}},jsts.operation.buffer.BufferSubgraph.prototype.add=function(e,t){e.setVisited(!0),this.nodes.add(e);for(var n=e.getEdges().iterator();n.hasNext();){var r=n.next();this.dirEdgeList.add(r);var i=r.getSym(),s=i.getNode();s.isVisited()||t.push(s)}},jsts.operation.buffer.BufferSubgraph.prototype.clearVisitedEdges=function(){for(var e=this.dirEdgeList.iterator();e.hasNext();){var t=e.next();t.setVisited(!1)}},jsts.operation.buffer.BufferSubgraph.prototype.computeDepth=function(e){this.clearVisitedEdges();var t=this.finder.getEdge(),n=t.getNode(),r=t.getLabel();t.setEdgeDepths(jsts.geomgraph.Position.RIGHT,e),this.copySymDepths(t),this.computeDepths(t)},jsts.operation.buffer.BufferSubgraph.prototype.computeDepths=function(e){var t=[],n=[],r=e.getNode();n.push(r),t.push(r),e.setVisited(!0);while(n.length!==0){var i=n.shift();t.push(i),this.computeNodeDepth(i);for(var s=i.getEdges().iterator();s.hasNext();){var o=s.next(),u=o.getSym();if(u.isVisited())continue;var a=u.getNode();t.indexOf(a)===-1&&(n.push(a),t.push(a))}}},jsts.operation.buffer.BufferSubgraph.prototype.computeNodeDepth=function(e){var t=null;for(var n=e.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){t=r;break}}if(t==null)throw new jsts.error.TopologyError("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(t);for(var n=e.getEdges().iterator();n.hasNext();){var r=n.next();r.setVisited(!0),this.copySymDepths(r)}},jsts.operation.buffer.BufferSubgraph.prototype.copySymDepths=function(e){var t=e.getSym();t.setDepth(jsts.geomgraph.Position.LEFT,e.getDepth(jsts.geomgraph.Position.RIGHT)),t.setDepth(jsts.geomgraph.Position.RIGHT,e.getDepth(jsts.geomgraph.Position.LEFT))},jsts.operation.buffer.BufferSubgraph.prototype.findResultEdges=function(){for(var e=this.dirEdgeList.iterator();e.hasNext();){var t=e.next();t.getDepth(jsts.geomgraph.Position.RIGHT)>=1&&t.getDepth(jsts.geomgraph.Position.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}},jsts.operation.buffer.BufferSubgraph.prototype.compareTo=function(e){var t=e;return this.rightMostCoord.x<t.rightMostCoord.x?-1:this.rightMostCoord.x>t.rightMostCoord.x?1:0},jsts.operation.buffer.OffsetCurveBuilder=function(e,t){this.precisionModel=e,this.bufParams=t},jsts.operation.buffer.OffsetCurveBuilder.prototype.distance=0,jsts.operation.buffer.OffsetCurveBuilder.prototype.precisionModel=null,jsts.operation.buffer.OffsetCurveBuilder.prototype.bufParams=null,jsts.operation.buffer.OffsetCurveBuilder.prototype.getBufferParameters=function(){return this.bufParams},jsts.operation.buffer.OffsetCurveBuilder.prototype.getLineCurve=function(e,t){this.distance=t;if(this.distance<0&&!this.bufParams.isSingleSided())return null;if(this.distance==0)return null;var n=Math.abs(this.distance),r=this.getSegGen(n);if(e.length<=1)this.computePointCurve(e[0],r);else if(this.bufParams.isSingleSided()){var i=t<0;this.computeSingleSidedBufferCurve(e,i,r)}else this.computeLineBufferCurve(e,r);var s=r.getCoordinates();return s},jsts.operation.buffer.OffsetCurveBuilder.prototype.getRingCurve=function(e,t,n){this.distance=n;if(e.length<=2)return this.getLineCurve(e,n);if(this.distance==0)return jsts.operation.buffer.OffsetCurveBuilder.copyCoordinates(e);var r=this.getSegGen(this.distance);return this.computeRingBufferCurve(e,t,r),r.getCoordinates()},jsts.operation.buffer.OffsetCurveBuilder.prototype.getOffsetCurve=function(e,t){this.distance=t;if(this.distance===0)return null;var n=this.distance<0,r=Math.abs(this.distance),i=this.getSegGen(r);e.length<=1?this.computePointCurve(e[0],i):this.computeOffsetCurve(e,n,i);var s=i.getCoordinates();return n&&s.reverse(),s},jsts.operation.buffer.OffsetCurveBuilder.copyCoordinates=function(e){var t=[];for(var n=0;n<e.length;n++)t.push(e[n].clone());return t},jsts.operation.buffer.OffsetCurveBuilder.prototype.getSegGen=function(e){return new jsts.operation.buffer.OffsetSegmentGenerator(this.precisionModel,this.bufParams,e)},jsts.operation.buffer.OffsetCurveBuilder.SIMPLIFY_FACTOR=100,jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance=function(e){return e/jsts.operation.buffer.OffsetCurveBuilder.SIMPLIFY_FACTOR},jsts.operation.buffer.OffsetCurveBuilder.prototype.computePointCurve=function(e,t){switch(this.bufParams.getEndCapStyle()){case jsts.operation.buffer.BufferParameters.CAP_ROUND:t.createCircle(e);break;case jsts.operation.buffer.BufferParameters.CAP_SQUARE:t.createSquare(e)}},jsts.operation.buffer.OffsetCurveBuilder.prototype.computeLineBufferCurve=function(e,t){var n=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance),r=jsts.operation.buffer.BufferInputLineSimplifier.simplify(e,n),i=r.length-1;t.initSideSegments(r[0],r[1],jsts.geomgraph.Position.LEFT);for(var s=2;s<=i;s++)t.addNextSegment(r[s],!0);t.addLastSegment(),t.addLineEndCap(r[i-1],r[i]);var o=jsts.operation.buffer.BufferInputLineSimplifier.simplify(e,-n),u=o.length-1;t.initSideSegments(o[u],o[u-1],jsts.geomgraph.Position.LEFT);for(var s=u-2;s>=0;s--)t.addNextSegment(o[s],!0);t.addLastSegment(),t.addLineEndCap(o[1],o[0]),t.closeRing()},jsts.operation.buffer.OffsetCurveBuilder.prototype.computeSingleSidedBufferCurve=function(e,t,n){var r=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance);if(t){n.addSegments(e,!0);var i=jsts.operation.buffer.BufferInputLineSimplifier.simplify(e,-r),s=i.length-1;n.initSideSegments(i[s],i[s-1],jsts.geomgraph.Position.LEFT),n.addFirstSegment();for(var o=s-2;o>=0;o--)n.addNextSegment(i[o],!0)}else{n.addSegments(e,!1);var u=jsts.operation.buffer.BufferInputLineSimplifier.simplify(e,r),a=u.length-1;n.initSideSegments(u[0],u[1],jsts.geomgraph.Position.LEFT),n.addFirstSegment();for(var o=2;o<=a;o++)n.addNextSegment(u[o],!0)}n.addLastSegment(),n.closeRing()},jsts.operation.buffer.OffsetCurveBuilder.prototype.computeOffsetCurve=function(e,t,n){var r=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance);if(t){var i=jsts.operation.buffer.BufferInputLineSimplifier.simplify(e,-r),s=i.length-1;n.initSideSegments(i[s],i[s-1],jsts.geomgraph.Position.LEFT),n.addFirstSegment();for(var o=s-2;o>=0;o--)n.addNextSegment(i[o],!0)}else{var u=jsts.operation.buffer.BufferInputLineSimplifier.simplify(e,r),a=u.length-1;n.initSideSegments(u[0],u[1],jsts.geomgraph.Position.LEFT),n.addFirstSegment();for(var o=2;o<=a;o++)n.addNextSegment(u[o],!0)}n.addLastSegment()},jsts.operation.buffer.OffsetCurveBuilder.prototype.computeRingBufferCurve=function(e,t,n){var r=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance);t===jsts.geomgraph.Position.RIGHT&&(r=-r);var i=jsts.operation.buffer.BufferInputLineSimplifier.simplify(e,r),s=i.length-1;n.initSideSegments(i[s-1],i[0],t);for(var o=1;o<=s;o++){var u=o!==1;n.addNextSegment(i[o],u)}n.closeRing()},jsts.operation.buffer.OffsetCurveSetBuilder=function(e,t,n){this.inputGeom=e,this.distance=t,this.curveBuilder=n,this.curveList=new javascript.util.ArrayList},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.inputGeom=null,jsts.operation.buffer.OffsetCurveSetBuilder.prototype.distance=null,jsts.operation.buffer.OffsetCurveSetBuilder.prototype.curveBuilder=null,jsts.operation.buffer.OffsetCurveSetBuilder.prototype.curveList=null,jsts.operation.buffer.OffsetCurveSetBuilder.prototype.getCurves=function(){return this.add(this.inputGeom),this.curveList},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addCurve=function(e,t,n){if(e==null||e.length<2)return;var r=new jsts.noding.NodedSegmentString(e,new jsts.geomgraph.Label(0,jsts.geom.Location.BOUNDARY,t,n));this.curveList.add(r)},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.add=function(e){if(e.isEmpty())return;if(e instanceof jsts.geom.Polygon)this.addPolygon(e);else if(e instanceof jsts.geom.LineString)this.addLineString(e);else if(e instanceof jsts.geom.Point)this.addPoint(e);else if(e instanceof jsts.geom.MultiPoint)this.addCollection(e);else if(e instanceof jsts.geom.MultiLineString)this.addCollection(e);else if(e instanceof jsts.geom.MultiPolygon)this.addCollection(e);else{if(!(e instanceof jsts.geom.GeometryCollection))throw new jsts.error.IllegalArgumentError;this.addCollection(e)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addCollection=function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);this.add(n)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addPoint=function(e){if(this.distance<=0)return;var t=e.getCoordinates(),n=this.curveBuilder.getLineCurve(t,this.distance);this.addCurve(n,jsts.geom.Location.EXTERIOR,jsts.geom.Location.INTERIOR)},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addLineString=function(e){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided())return;var t=jsts.geom.CoordinateArrays.removeRepeatedPoints(e.getCoordinates()),n=this.curveBuilder.getLineCurve(t,this.distance);this.addCurve(n,jsts.geom.Location.EXTERIOR,jsts.geom.Location.INTERIOR)},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addPolygon=function(e){var t=this.distance,n=jsts.geomgraph.Position.LEFT;this.distance<0&&(t=-this.distance,n=jsts.geomgraph.Position.RIGHT);var r=e.getExteriorRing(),i=jsts.geom.CoordinateArrays.removeRepeatedPoints(r.getCoordinates());if(this.distance<0&&this.isErodedCompletely(r,this.distance))return;if(this.distance<=0&&i.length<3)return;this.addPolygonRing(i,t,n,jsts.geom.Location.EXTERIOR,jsts.geom.Location.INTERIOR);for(var s=0;s<e.getNumInteriorRing();s++){var o=e.getInteriorRingN(s),u=jsts.geom.CoordinateArrays.removeRepeatedPoints(o.getCoordinates());if(this.distance>0&&this.isErodedCompletely(o,-this.distance))continue;this.addPolygonRing(u,t,jsts.geomgraph.Position.opposite(n),jsts.geom.Location.INTERIOR,jsts.geom.Location.EXTERIOR)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addPolygonRing=function(e,t,n,r,i){if(t==0&&e.length<jsts.geom.LinearRing.MINIMUM_VALID_SIZE)return;var s=r,o=i;e.length>=jsts.geom.LinearRing.MINIMUM_VALID_SIZE&&jsts.algorithm.CGAlgorithms.isCCW(e)&&(s=i,o=r,n=jsts.geomgraph.Position.opposite(n));var u=this.curveBuilder.getRingCurve(e,n,t);this.addCurve(u,s,o)},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.isErodedCompletely=function(e,t){var n=e.getCoordinates(),r=0;if(n.length<4)return t<0;if(n.length==4)return this.isTriangleErodedCompletely(n,t);var i=e.getEnvelopeInternal(),s=Math.min(i.getHeight(),i.getWidth());return t<0&&2*Math.abs(t)>s?!0:!1},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.isTriangleErodedCompletely=function(e,t){var n=new jsts.geom.Triangle(e[0],e[1],e[2]),r=n.inCentre(),i=jsts.algorithm.CGAlgorithms.distancePointLine(r,n.p0,n.p1);return i<Math.abs(t)},jsts.operation.buffer.OffsetSegmentGenerator=function(e,t,n){this.seg0=new jsts.geom.LineSegment,this.seg1=new jsts.geom.LineSegment,this.offset0=new jsts.geom.LineSegment,this.offset1=new jsts.geom.LineSegment,this.precisionModel=e,this.bufParams=t,this.li=new jsts.algorithm.RobustLineIntersector,this.filletAngleQuantum=Math.PI/2/t.getQuadrantSegments(),this.bufParams.getQuadrantSegments()>=8&&this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_ROUND&&(this.closingSegLengthFactor=jsts.operation.buffer.OffsetSegmentGenerator.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)},jsts.operation.buffer.OffsetSegmentGenerator.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,jsts.operation.buffer.OffsetSegmentGenerator.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,jsts.operation.buffer.OffsetSegmentGenerator.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,jsts.operation.buffer.OffsetSegmentGenerator.MAX_CLOSING_SEG_LEN_FACTOR=80,jsts.operation.buffer.OffsetSegmentGenerator.prototype.maxCurveSegmentError=0,jsts.operation.buffer.OffsetSegmentGenerator.prototype.filletAngleQuantum=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.closingSegLengthFactor=1,jsts.operation.buffer.OffsetSegmentGenerator.prototype.segList=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.distance=0,jsts.operation.buffer.OffsetSegmentGenerator.prototype.precisionModel=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.bufParams=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.li=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.s0=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.s1=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.s2=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.seg0=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.seg1=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.offset0=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.offset1=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.side=0,jsts.operation.buffer.OffsetSegmentGenerator.prototype.hasNarrowConcaveAngle=!1,jsts.operation.buffer.OffsetSegmentGenerator.prototype.hasNarrowConcaveAngle=function(){return this.hasNarrowConcaveAngle},jsts.operation.buffer.OffsetSegmentGenerator.prototype.init=function(e){this.distance=e,this.maxCurveSegmentError=this.distance*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new jsts.operation.buffer.OffsetSegmentString,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(this.distance*jsts.operation.buffer.OffsetSegmentGenerator.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.initSideSegments=function(e,t,n){this.s1=e,this.s2=t,this.side=n,this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.getCoordinates=function(){return this.segList.getCoordinates()},jsts.operation.buffer.OffsetSegmentGenerator.prototype.closeRing=function(){this.segList.closeRing()},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addSegments=function(e,t){this.segList.addPts(e,t)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addFirstSegment=function(){this.segList.addPt(this.offset1.p0)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addLastSegment=function(){this.segList.addPt(this.offset1.p1)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addNextSegment=function(e,t){this.s0=this.s1,this.s1=this.s2,this.s2=e,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1);if(this.s1.equals(this.s2))return;var n=jsts.algorithm.CGAlgorithms.computeOrientation(this.s0,this.s1,this.s2),r=n===jsts.algorithm.CGAlgorithms.CLOCKWISE&&this.side===jsts.geomgraph.Position.LEFT||n===jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE&&this.side===jsts.geomgraph.Position.RIGHT;n==0?this.addCollinear(t):r?this.addOutsideTurn(n,t):this.addInsideTurn(n,t)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addCollinear=function(e){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2);var t=this.li.getIntersectionNum();t>=2&&(this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_BEVEL||this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_MITRE?(e&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFillet(this.s1,this.offset0.p1,this.offset1.p0,jsts.algorithm.CGAlgorithms.CLOCKWISE,this.distance))},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addOutsideTurn=function(e,t){if(this.offset0.p1.distance(this.offset1.p0)<this.distance*jsts.operation.buffer.OffsetSegmentGenerator.OFFSET_SEGMENT_SEPARATION_FACTOR){this.segList.addPt(this.offset0.p1);return}this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(t&&this.segList.addPt(this.offset0.p1),this.addFillet(this.s1,this.offset0.p1,this.offset1.p0,e,this.distance),this.segList.addPt(this.offset1.p0))},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addInsideTurn=function(e,t){this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1);if(this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else{this.hasNarrowConcaveAngle=!0;if(this.offset0.p1.distance(this.offset1.p0)<this.distance*jsts.operation.buffer.OffsetSegmentGenerator.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{this.segList.addPt(this.offset0.p1);if(this.closingSegLengthFactor>0){var n=new jsts.geom.Coordinate((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(n);var r=new jsts.geom.Coordinate((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(r)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}}},jsts.operation.buffer.OffsetSegmentGenerator.prototype.computeOffsetSegment=function(e,t,n,r){var i=t===jsts.geomgraph.Position.LEFT?1:-1,s=e.p1.x-e.p0.x,o=e.p1.y-e.p0.y,u=Math.sqrt(s*s+o*o),a=i*n*s/u,f=i*n*o/u;r.p0.x=e.p0.x-f,r.p0.y=e.p0.y+a,r.p1.x=e.p1.x-f,r.p1.y=e.p1.y+a},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addLineEndCap=function(e,t){var n=new jsts.geom.LineSegment(e,t),r=new jsts.geom.LineSegment;this.computeOffsetSegment(n,jsts.geomgraph.Position.LEFT,this.distance,r);var i=new jsts.geom.LineSegment;this.computeOffsetSegment(n,jsts.geomgraph.Position.RIGHT,this.distance,i);var s=t.x-e.x,o=t.y-e.y,u=Math.atan2(o,s);switch(this.bufParams.getEndCapStyle()){case jsts.operation.buffer.BufferParameters.CAP_ROUND:this.segList.addPt(r.p1),this.addFillet(t,u+Math.PI/2,u-Math.PI/2,jsts.algorithm.CGAlgorithms.CLOCKWISE,this.distance),this.segList.addPt(i.p1);break;case jsts.operation.buffer.BufferParameters.CAP_FLAT:this.segList.addPt(r.p1),this.segList.addPt(i.p1);break;case jsts.operation.buffer.BufferParameters.CAP_SQUARE:var a=new jsts.geom.Coordinate;a.x=Math.abs(this.distance)*Math.cos(u),a.y=Math.abs(this.distance)*Math.sin(u);var f=new jsts.geom.Coordinate(r.p1.x+a.x,r.p1.y+a.y),l=new jsts.geom.Coordinate(i.p1.x+a.x,i.p1.y+a.y);this.segList.addPt(f),this.segList.addPt(l)}},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addMitreJoin=function(e,t,n,r){var i=!0,s=null;try{s=jsts.algorithm.HCoordinate.intersection(t.p0,t.p1,n.p0,n.p1);var o=r<=0?1:s.distance(e)/Math.abs(r);o>this.bufParams.getMitreLimit()&&(this.isMitreWithinLimit=!1)}catch(u){u instanceof jsts.error.NotRepresentableError&&(s=new jsts.geom.Coordinate(0,0),this.isMitreWithinLimit=!1)}i?this.segList.addPt(s):this.addLimitedMitreJoin(t,n,r,bufParams.getMitreLimit())},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addLimitedMitreJoin=function(e,t,n,r){var i=this.seg0.p1,s=jsts.algorithm.Angle.angle(i,this.seg0.p0),o=jsts.algorithm.Angle.angle(i,this.seg1.p1),u=jsts.algorithm.Angle.angleBetweenOriented(this.seg0.p0,i,this.seg1.p1),a=u/2,f=jsts.algorithm.Angle.normalize(s+a),l=jsts.algorithm.Angle.normalize(f+Math.PI),c=r*n,h=c*Math.abs(Math.sin(a)),p=n-h,d=i.x+c*Math.cos(l),v=i.y+c*Math.sin(l),m=new jsts.geom.Coordinate(d,v),g=new jsts.geom.LineSegment(i,m),y=g.pointAlongOffset(1,p),b=g.pointAlongOffset(1,-p);this.side==jsts.geomgraph.Position.LEFT?(this.segList.addPt(y),this.segList.addPt(b)):(this.segList.addPt(b),this.segList.addPt(y))},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addBevelJoin=function(e,t){this.segList.addPt(e.p1),this.segList.addPt(t.p0)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addFillet=function(e,t,n,r,i){if(!(n instanceof jsts.geom.Coordinate)){this.addFillet2.apply(this,arguments);return}var s=t.x-e.x,o=t.y-e.y,u=Math.atan2(o,s),a=n.x-e.x,f=n.y-e.y,l=Math.atan2(f,a);r===jsts.algorithm.CGAlgorithms.CLOCKWISE?u<=l&&(u+=2*Math.PI):u>=l&&(u-=2*Math.PI),this.segList.addPt(t),this.addFillet(e,u,l,r,i),this.segList.addPt(n)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addFillet2=function(e,t,n,r,i){var s=r===jsts.algorithm.CGAlgorithms.CLOCKWISE?-1:1,o=Math.abs(t-n),u=parseInt(o/this.filletAngleQuantum+.5);if(u<1)return;var a,f;a=0,f=o/u;var l=a,c=new jsts.geom.Coordinate;while(l<o){var h=t+s*l;c.x=e.x+i*Math.cos(h),c.y=e.y+i*Math.sin(h),this.segList.addPt(c),l+=f}},jsts.operation.buffer.OffsetSegmentGenerator.prototype.createCircle=function(e){var t=new jsts.geom.Coordinate(e.x+this.distance,e.y);this.segList.addPt(t),this.addFillet(e,0,2*Math.PI,-1,this.distance),this.segList.closeRing()},jsts.operation.buffer.OffsetSegmentGenerator.prototype.createSquare=function(e){this.segList.addPt(new jsts.geom.Coordinate(e.x+distance,e.y+distance)),this.segList.addPt(new jsts.geom.Coordinate(e.x+distance,e.y-distance)),this.segList.addPt(new jsts.geom.Coordinate(e.x-distance,e.y-distance)),this.segList.addPt(new jsts.geom.Coordinate(e.x-distance,e.y+distance)),this.segList.closeRing()},jsts.operation
.buffer.OffsetSegmentString=function(){this.ptList=[]},jsts.operation.buffer.OffsetSegmentString.prototype.ptList=null,jsts.operation.buffer.OffsetSegmentString.prototype.precisionModel=null,jsts.operation.buffer.OffsetSegmentString.prototype.minimimVertexDistance=0,jsts.operation.buffer.OffsetSegmentString.prototype.setPrecisionModel=function(e){this.precisionModel=e},jsts.operation.buffer.OffsetSegmentString.prototype.setMinimumVertexDistance=function(e){this.minimimVertexDistance=e},jsts.operation.buffer.OffsetSegmentString.prototype.addPt=function(e){var t=new jsts.geom.Coordinate(e);this.precisionModel.makePrecise(t);if(this.isRedundant(t))return;this.ptList.push(t)},jsts.operation.buffer.OffsetSegmentString.prototype.addPts=function(e,t){if(t)for(var n=0;n<e.length;n++)this.addPt(e[n]);else for(var n=e.length-1;n>=0;n--)this.addPt(e[n])},jsts.operation.buffer.OffsetSegmentString.prototype.isRedundant=function(e){if(this.ptList.length<1)return!1;var t=this.ptList[this.ptList.length-1],n=e.distance(t);return n<this.minimimVertexDistance?!0:!1},jsts.operation.buffer.OffsetSegmentString.prototype.closeRing=function(){if(this.ptList.length<1)return;var e=new jsts.geom.Coordinate(this.ptList[0]),t=this.ptList[this.ptList.length-1],n=null;this.ptList.length>=2&&(n=this.ptList[this.ptList.length-2]);if(e.equals(t))return;this.ptList.push(e)},jsts.operation.buffer.OffsetSegmentString.prototype.reverse=function(){},jsts.operation.buffer.OffsetSegmentString.prototype.getCoordinates=function(){return this.ptList},jsts.operation.buffer.RightmostEdgeFinder=function(){},jsts.operation.buffer.RightmostEdgeFinder.prototype.minIndex=-1,jsts.operation.buffer.RightmostEdgeFinder.prototype.minCoord=null,jsts.operation.buffer.RightmostEdgeFinder.prototype.minDe=null,jsts.operation.buffer.RightmostEdgeFinder.prototype.orientedDe=null,jsts.operation.buffer.RightmostEdgeFinder.prototype.getEdge=function(){return this.orientedDe},jsts.operation.buffer.RightmostEdgeFinder.prototype.getCoordinate=function(){return this.minCoord},jsts.operation.buffer.RightmostEdgeFinder.prototype.findEdge=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();if(!n.isForward())continue;this.checkForRightmostCoordinate(n)}jsts.util.Assert.isTrue(this.minIndex!==0||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),this.minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe;var r=this.getRightmostSide(this.minDe,this.minIndex);r==jsts.geomgraph.Position.LEFT&&(this.orientedDe=this.minDe.getSym())},jsts.operation.buffer.RightmostEdgeFinder.prototype.findRightmostEdgeAtNode=function(){var e=this.minDe.getNode(),t=e.getEdges();this.minDe=t.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)},jsts.operation.buffer.RightmostEdgeFinder.prototype.findRightmostEdgeAtVertex=function(){var e=this.minDe.getEdge().getCoordinates();jsts.util.Assert.isTrue(this.minIndex>0&&this.minIndex<e.length,"rightmost point expected to be interior vertex of edge");var t=e[this.minIndex-1],n=e[this.minIndex+1],r=jsts.algorithm.CGAlgorithms.computeOrientation(this.minCoord,n,t),i=!1;t.y<this.minCoord.y&&n.y<this.minCoord.y&&r===jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE?i=!0:t.y>this.minCoord.y&&n.y>this.minCoord.y&&r===jsts.algorithm.CGAlgorithms.CLOCKWISE&&(i=!0),i&&(this.minIndex=this.minIndex-1)},jsts.operation.buffer.RightmostEdgeFinder.prototype.checkForRightmostCoordinate=function(e){var t=e.getEdge().getCoordinates();for(var n=0;n<t.length-1;n++)if(this.minCoord===null||t[n].x>this.minCoord.x)this.minDe=e,this.minIndex=n,this.minCoord=t[n]},jsts.operation.buffer.RightmostEdgeFinder.prototype.getRightmostSide=function(e,t){var n=this.getRightmostSideOfSegment(e,t);return n<0&&(n=this.getRightmostSideOfSegment(e,t-1)),n<0&&(this.minCoord=null,this.checkForRightmostCoordinate(e)),n},jsts.operation.buffer.RightmostEdgeFinder.prototype.getRightmostSideOfSegment=function(e,t){var n=e.getEdge(),r=n.getCoordinates();if(t<0||t+1>=r.length)return-1;if(r[t].y==r[t+1].y)return-1;var i=jsts.geomgraph.Position.LEFT;return r[t].y<r[t+1].y&&(i=jsts.geomgraph.Position.RIGHT),i},jsts.operation.buffer.SubgraphDepthLocater=function(e){this.subgraphs=[],this.seg=new jsts.geom.LineSegment,this.subgraphs=e},jsts.operation.buffer.SubgraphDepthLocater.prototype.subgraphs=null,jsts.operation.buffer.SubgraphDepthLocater.prototype.seg=null,jsts.operation.buffer.SubgraphDepthLocater.prototype.getDepth=function(e){var t=this.findStabbedSegments(e);if(t.length===0)return 0;t.sort();var n=t[0];return n.leftDepth},jsts.operation.buffer.SubgraphDepthLocater.prototype.findStabbedSegments=function(e){if(arguments.length===3){this.findStabbedSegments2.apply(this,arguments);return}var t=[];for(var n=0;n<this.subgraphs.length;n++){var r=this.subgraphs[n],i=r.getEnvelope();if(e.y<i.getMinY()||e.y>i.getMaxY())continue;this.findStabbedSegments2(e,r.getDirectedEdges(),t)}return t},jsts.operation.buffer.SubgraphDepthLocater.prototype.findStabbedSegments2=function(e,t,n){if(arguments[1]instanceof jsts.geomgraph.DirectedEdge){this.findStabbedSegments3(e,t,n);return}for(var r=t.iterator();r.hasNext();){var i=r.next();if(!i.isForward())continue;this.findStabbedSegments3(e,i,n)}},jsts.operation.buffer.SubgraphDepthLocater.prototype.findStabbedSegments3=function(e,t,n){var r=t.getEdge().getCoordinates();for(var i=0;i<r.length-1;i++){this.seg.p0=r[i],this.seg.p1=r[i+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse();var s=Math.max(this.seg.p0.x,this.seg.p1.x);if(s<e.x)continue;if(this.seg.isHorizontal())continue;if(e.y<this.seg.p0.y||e.y>this.seg.p1.y)continue;if(jsts.algorithm.CGAlgorithms.computeOrientation(this.seg.p0,this.seg.p1,e)===jsts.algorithm.CGAlgorithms.RIGHT)continue;var o=t.getDepth(jsts.geomgraph.Position.LEFT);this.seg.p0.equals(r[i])||(o=t.getDepth(jsts.geomgraph.Position.RIGHT));var u=new jsts.operation.buffer.SubgraphDepthLocater.DepthSegment(this.seg,o);n.push(u)}},jsts.operation.buffer.SubgraphDepthLocater.DepthSegment=function(e,t){this.upwardSeg=new jsts.geom.LineSegment(e),this.leftDepth=t},jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.upwardSeg=null,jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.leftDepth=null,jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.compareTo=function(e){var t=e,n=this.upwardSeg.orientationIndex(t.upwardSeg);return n===0&&(n=-1*t.upwardSeg.orientationIndex(upwardSeg)),n!==0?n:this.compareX(this.upwardSeg,t.upwardSeg)},jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.compareX=function(e,t){var n=e.p0.compareTo(t.p0);return n!==0?n:e.p1.compareTo(t.p1)},jsts.operation.distance.ConnectedElementLocationFilter=function(e){this.locations=e},jsts.operation.distance.ConnectedElementLocationFilter.prototype=new jsts.geom.GeometryFilter,jsts.operation.distance.ConnectedElementLocationFilter.prototype.locations=null,jsts.operation.distance.ConnectedElementLocationFilter.getLocations=function(e){var t=[];return e.apply(new jsts.operation.distance.ConnectedElementLocationFilter(t)),t},jsts.operation.distance.ConnectedElementLocationFilter.prototype.filter=function(e){(e instanceof jsts.geom.Point||e instanceof jsts.geom.LineString||e instanceof jsts.geom.Polygon)&&this.locations.push(new jsts.operation.distance.GeometryLocation(e,0,e.getCoordinate()))},jsts.operation.distance.DistanceOp=function(e,t,n){this.ptLocator=new jsts.algorithm.PointLocator,this.geom=[],this.geom[0]=e,this.geom[1]=t,this.terminateDistance=n},jsts.operation.distance.DistanceOp.prototype.geom=null,jsts.operation.distance.DistanceOp.prototype.terminateDistance=0,jsts.operation.distance.DistanceOp.prototype.ptLocator=null,jsts.operation.distance.DistanceOp.prototype.minDistanceLocation=null,jsts.operation.distance.DistanceOp.prototype.minDistance=Number.MAX_VALUE,jsts.operation.distance.DistanceOp.distance=function(e,t){var n=new jsts.operation.distance.DistanceOp(e,t,0);return n.distance()},jsts.operation.distance.DistanceOp.isWithinDistance=function(e,t,n){var r=new jsts.operation.distance.DistanceOp(e,t,n);return r.distance()<=n},jsts.operation.distance.DistanceOp.nearestPoints=function(e,t){var n=new jsts.operation.distance.DistanceOp(e,t,0);return n.nearestPoints()},jsts.operation.distance.DistanceOp.prototype.distance=function(){if(this.geom[0]===null||this.geom[1]===null)throw new jsts.error.IllegalArgumentError("null geometries are not supported");return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)},jsts.operation.distance.DistanceOp.prototype.nearestPoints=function(){this.computeMinDistance();var e=[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()];return e},jsts.operation.distance.DistanceOp.prototype.nearestLocations=function(){return this.computeMinDistance(),this.minDistanceLocation},jsts.operation.distance.DistanceOp.prototype.updateMinDistance=function(e,t){if(e[0]===null)return;t?(this.minDistanceLocation[0]=e[1],this.minDistanceLocation[1]=e[0]):(this.minDistanceLocation[0]=e[0],this.minDistanceLocation[1]=e[1])},jsts.operation.distance.DistanceOp.prototype.computeMinDistance=function(){if(arguments.length>0){this.computeMinDistance2.apply(this,arguments);return}if(this.minDistanceLocation!==null)return;this.minDistanceLocation=[],this.computeContainmentDistance();if(this.minDistance<=this.terminateDistance)return;this.computeFacetDistance()},jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance=function(){if(arguments.length===2){this.computeContainmentDistance2.apply(this,arguments);return}if(arguments.length===3&&!arguments[0]instanceof jsts.operation.distance.GeometryLocation){this.computeContainmentDistance3.apply(this,arguments);return}if(arguments.length===3){this.computeContainmentDistance4.apply(this,arguments);return}var e=[];this.computeContainmentDistance2(0,e);if(this.minDistance<=this.terminateDistance)return;this.computeContainmentDistance2(1,e)},jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance2=function(e,t){var n=1-e,r=jsts.geom.util.PolygonExtracter.getPolygons(this.geom[e]);if(r.length>0){var i=jsts.operation.distance.ConnectedElementLocationFilter.getLocations(this.geom[n]);this.computeContainmentDistance3(i,r,t);if(this.minDistance<=this.terminateDistance){this.minDistanceLocation[n]=t[0],this.minDistanceLocation[e]=t[1];return}}},jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance3=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];for(var s=0;s<t.length;s++){this.computeContainmentDistance4(i,t[s],n);if(this.minDistance<=this.terminateDistance)return}}},jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance4=function(e,t,n){var r=e.getCoordinate();if(jsts.geom.Location.EXTERIOR!==this.ptLocator.locate(r,t)){this.minDistance=0,n[0]=e,n[1]=new jsts.operation.distance.GeometryLocation(t,r);return}},jsts.operation.distance.DistanceOp.prototype.computeFacetDistance=function(){var e=[],t=jsts.geom.util.LinearComponentExtracter.getLines(this.geom[0]),n=jsts.geom.util.LinearComponentExtracter.getLines(this.geom[1]),r=jsts.geom.util.PointExtracter.getPoints(this.geom[0]),i=jsts.geom.util.PointExtracter.getPoints(this.geom[1]);this.computeMinDistanceLines(t,n,e),this.updateMinDistance(e,!1);if(this.minDistance<=this.terminateDistance)return;e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(t,i,e),this.updateMinDistance(e,!1);if(this.minDistance<=this.terminateDistance)return;e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(n,r,e),this.updateMinDistance(e,!0);if(this.minDistance<=this.terminateDistance)return;e[0]=null,e[1]=null,this.computeMinDistancePoints(r,i,e),this.updateMinDistance(e,!1)},jsts.operation.distance.DistanceOp.prototype.computeMinDistanceLines=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];for(var s=0;s<t.length;s++){var o=t[s];this.computeMinDistance(i,o,n);if(this.minDistance<=this.terminateDistance)return}}},jsts.operation.distance.DistanceOp.prototype.computeMinDistancePoints=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];for(var s=0;s<t.length;s++){var o=t[s],u=i.getCoordinate().distance(o.getCoordinate());u<this.minDistance&&(this.minDistance=u,n[0]=new jsts.operation.distance.GeometryLocation(i,0,i.getCoordinate()),n[1]=new jsts.operation.distance.GeometryLocation(o,0,o.getCoordinate()));if(this.minDistance<=this.terminateDistance)return}}},jsts.operation.distance.DistanceOp.prototype.computeMinDistanceLinesPoints=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];for(var s=0;s<t.length;s++){var o=t[s];this.computeMinDistance(i,o,n);if(this.minDistance<=this.terminateDistance)return}}},jsts.operation.distance.DistanceOp.prototype.computeMinDistance2=function(e,t,n){if(t instanceof jsts.geom.Point){this.computeMinDistance3(e,t,n);return}if(e.getEnvelopeInternal().distance(t.getEnvelopeInternal())>this.minDistance)return;var r=e.getCoordinates(),i=t.getCoordinates();for(var s=0;s<r.length-1;s++)for(var o=0;o<i.length-1;o++){var u=jsts.algorithm.CGAlgorithms.distanceLineLine(r[s],r[s+1],i[o],i[o+1]);if(u<this.minDistance){this.minDistance=u;var a=new jsts.geom.LineSegment(r[s],r[s+1]),f=new jsts.geom.LineSegment(i[o],i[o+1]),l=a.closestPoints(f);n[0]=new jsts.operation.distance.GeometryLocation(e,s,l[0]),n[1]=new jsts.operation.distance.GeometryLocation(t,o,l[1])}if(this.minDistance<=this.terminateDistance)return}},jsts.operation.distance.DistanceOp.prototype.computeMinDistance3=function(e,t,n){if(e.getEnvelopeInternal().distance(t.getEnvelopeInternal())>this.minDistance)return;var r=e.getCoordinates(),i=t.getCoordinate();for(var s=0;s<r.length-1;s++){var o=jsts.algorithm.CGAlgorithms.distancePointLine(i,r[s],r[s+1]);if(o<this.minDistance){this.minDistance=o;var u=new jsts.geom.LineSegment(r[s],r[s+1]),a=u.closestPoint(i);n[0]=new jsts.operation.distance.GeometryLocation(e,s,a),n[1]=new jsts.operation.distance.GeometryLocation(t,0,i)}if(this.minDistance<=this.terminateDistance)return}},jsts.operation.distance.GeometryLocation=function(e,t,n){this.component=e,this.segIndex=t,this.pt=n},jsts.operation.distance.GeometryLocation.INSIDE_AREA=-1,jsts.operation.distance.GeometryLocation.prototype.component=null,jsts.operation.distance.GeometryLocation.prototype.segIndex=null,jsts.operation.distance.GeometryLocation.prototype.pt=null,jsts.operation.distance.GeometryLocation.prototype.getGeometryComponent=function(){return this.component},jsts.operation.distance.GeometryLocation.prototype.getSegmentIndex=function(){return this.segIndex},jsts.operation.distance.GeometryLocation.prototype.getCoordinate=function(){return this.pt},jsts.operation.distance.GeometryLocation.prototype.isInsideArea=function(){return this.segIndex===jsts.operation.distance.GeometryLocation.INSIDE_AREA},function(){var e=jsts.util.Assert,t=javascript.util.ArrayList,n=function(e,n,r){this.lineEdgesList=new t,this.resultLineList=new t,this.op=e,this.geometryFactory=n,this.ptLocator=r};n.prototype.op=null,n.prototype.geometryFactory=null,n.prototype.ptLocator=null,n.prototype.lineEdgesList=null,n.prototype.resultLineList=null,n.prototype.build=function(e){return this.findCoveredLineEdges(),this.collectLines(e),this.buildLines(e),this.resultLineList},n.prototype.findCoveredLineEdges=function(){for(var e=this.op.getGraph().getNodes().iterator();e.hasNext();){var t=e.next();t.getEdges().findCoveredLineEdges()}for(var n=this.op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getEdge();if(r.isLineEdge()&&!i.isCoveredSet()){var s=this.op.isCoveredByA(r.getCoordinate());i.setCovered(s)}}},n.prototype.collectLines=function(e){for(var t=this.op.getGraph().getEdgeEnds().iterator();t.hasNext();){var n=t.next();this.collectLineEdge(n,e,this.lineEdgesList),this.collectBoundaryTouchEdge(n,e,this.lineEdgesList)}},n.prototype.collectLineEdge=function(e,t,n){var r=e.getLabel(),i=e.getEdge();e.isLineEdge()&&!e.isVisited()&&jsts.operation.overlay.OverlayOp.isResultOfOp(r,t)&&!i.isCovered()&&(n.add(i),e.setVisitedEdge(!0))},n.prototype.collectBoundaryTouchEdge=function(t,n,r){var i=t.getLabel();if(t.isLineEdge())return;if(t.isVisited())return;if(t.isInteriorAreaEdge())return;if(t.getEdge().isInResult())return;e.isTrue(!t.isInResult()&&!t.getSym().isInResult()||!t.getEdge().isInResult()),jsts.operation.overlay.OverlayOp.isResultOfOp(i,n)&&n===jsts.operation.overlay.OverlayOp.INTERSECTION&&(r.add(t.getEdge()),t.setVisitedEdge(!0))},n.prototype.buildLines=function(e){for(var t=this.lineEdgesList.iterator();t.hasNext();){var n=t.next(),r=n.getLabel(),i=this.geometryFactory.createLineString(n.getCoordinates());this.resultLineList.add(i),n.setInResult(!0)}},n.prototype.labelIsolatedLines=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},n.prototype.labelIsolatedLine=function(e,t){var n=ptLocator.locate(e.getCoordinate(),op.getArgGeometry(t));e.getLabel().setLocation(t,n)},jsts.operation.overlay.LineBuilder=n}(),jsts.operation.overlay.OverlayNodeFactory=function(){},jsts.operation.overlay.OverlayNodeFactory.prototype=new jsts.geomgraph.NodeFactory,jsts.operation.overlay.OverlayNodeFactory.constructor=jsts.operation.overlay.OverlayNodeFactory,jsts.operation.overlay.OverlayNodeFactory.prototype.createNode=function(e){return new jsts.geomgraph.Node(e,new jsts.geomgraph.DirectedEdgeStar)},jsts.operation.overlay.PolygonBuilder=function(e){this.shellList=[],this.geometryFactory=e},jsts.operation.overlay.PolygonBuilder.prototype.geometryFactory=null,jsts.operation.overlay.PolygonBuilder.prototype.shellList=null,jsts.operation.overlay.PolygonBuilder.prototype.add=function(e){if(arguments.length===2){this.add2.apply(this,arguments);return}this.add2(e.getEdgeEnds(),e.getNodes())},jsts.operation.overlay.PolygonBuilder.prototype.add2=function(e,t){jsts.geomgraph.PlanarGraph.linkResultDirectedEdges(t);var n=this.buildMaximalEdgeRings(e),r=[],i=this.buildMinimalEdgeRings(n,this.shellList,r);this.sortShellsAndHoles(i,this.shellList,r),this.placeFreeHoles(this.shellList,r)},jsts.operation.overlay.PolygonBuilder.prototype.getPolygons=function(){var e=this.computePolygons(this.shellList);return e},jsts.operation.overlay.PolygonBuilder.prototype.buildMaximalEdgeRings=function(e){var t=[];for(var n=e.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&r.getEdgeRing()==null){var i=new jsts.operation.overlay.MaximalEdgeRing(r,this.geometryFactory);t.push(i),i.setInResult()}}return t},jsts.operation.overlay.PolygonBuilder.prototype.buildMinimalEdgeRings=function(e,t,n){var r=[];for(var i=0;i<e.length;i++){var s=e[i];if(s.getMaxNodeDegree()>2){s.linkDirectedEdgesForMinimalEdgeRings();var o=s.buildMinimalRings(),u=this.findShell(o);u!==null?(this.placePolygonHoles(u,o),t.push(u)):n=n.concat(o)}else r.push(s)}return r},jsts.operation.overlay.PolygonBuilder.prototype.findShell=function(e){var t=0,n=null;for(var r=0;r<e.length;r++){var i=e[r];i.isHole()||(n=i,t++)}return jsts.util.Assert.isTrue(t<=1,"found two shells in MinimalEdgeRing list"),n},jsts.operation.overlay.PolygonBuilder.prototype.placePolygonHoles=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.isHole()&&r.setShell(e)}},jsts.operation.overlay.PolygonBuilder.prototype.sortShellsAndHoles=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];i.isHole()?n.push(i):t.push(i)}},jsts.operation.overlay.PolygonBuilder.prototype.placeFreeHoles=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(r.getShell()==null){var i=this.findEdgeRingContaining(r,e);if(i===null)throw new jsts.error.TopologyError("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},jsts.operation.overlay.PolygonBuilder.prototype.findEdgeRingContaining=function(e,t){var n=e.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),s=null,o=null;for(var u=0;u<t.length;u++){var a=t[u],f=a.getLinearRing(),l=f.getEnvelopeInternal();s!==null&&(o=s.getLinearRing().getEnvelopeInternal());var c=!1;l.contains(r)&&jsts.algorithm.CGAlgorithms.isPointInRing(i,f.getCoordinates())&&(c=!0),c&&(s==null||o.contains(l))&&(s=a)}return s},jsts.operation.overlay.PolygonBuilder.prototype.computePolygons=function(e){var t=new javascript.util.ArrayList;for(var n=0;n<e.length;n++){var r=e[n],i=r.toPolygon(this.geometryFactory);t.add(i)}return t},jsts.operation.overlay.PolygonBuilder.prototype.containsPoint=function(e){for(var t=0;t<this.shellList.length;t++){var n=this.shellList[t];if(n.containsPoint(e))return!0}return!1},jsts.operation.overlay.MaximalEdgeRing=function(e,t){jsts.geomgraph.EdgeRing.call(this,e,t)},jsts.operation.overlay.MaximalEdgeRing.prototype=new jsts.geomgraph.EdgeRing,jsts.operation.overlay.MaximalEdgeRing.constructor=jsts.operation.overlay.MaximalEdgeRing,jsts.operation.overlay.MaximalEdgeRing.prototype.getNext=function(e){return e.getNext()},jsts.operation.overlay.MaximalEdgeRing.prototype.setEdgeRing=function(e,t){e.setEdgeRing(t)},jsts.operation.overlay.MaximalEdgeRing.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var e=this.startDe;do{var t=e.getNode();t.getEdges().linkMinimalDirectedEdges(this),e=e.getNext()}while(e!=this.startDe)},jsts.operation.overlay.MaximalEdgeRing.prototype.buildMinimalRings=function(){var e=[],t=this.startDe;do{if(t.getMinEdgeRing()===null){var n=new jsts.operation.overlay.MinimalEdgeRing(t,this.geometryFactory);e.push(n)}t=t.getNext()}while(t!=this.startDe);return e},jsts.operation.overlay.MinimalEdgeRing=function(e,t){jsts.geomgraph.EdgeRing.call(this,e,t)},jsts.operation.overlay.MinimalEdgeRing.prototype=new jsts.geomgraph.EdgeRing,jsts.operation.overlay.MinimalEdgeRing.constructor=jsts.operation.overlay.MinimalEdgeRing,jsts.operation.overlay.MinimalEdgeRing.prototype.getNext=function(e){return e.getNextMin()},jsts.operation.overlay.MinimalEdgeRing.prototype.setEdgeRing=function(e,t){e.setMinEdgeRing(t)},function(){var e=javascript.util.ArrayList,t=function(t,n,r){this.resultPointList=new e,this.op=t,this.geometryFactory=n};t.prototype.op=null,t.prototype.geometryFactory=null,t.prototype.resultPointList=null,t.prototype.build=function(e){return this.extractNonCoveredResultNodes(e),this.resultPointList},t.prototype.extractNonCoveredResultNodes=function(e){for(var t=this.op.getGraph().getNodes().iterator();t.hasNext();){var n=t.next();if(n.isInResult())continue;if(n.isIncidentEdgeInResult())continue;if(n.getEdges().getDegree()===0||e===jsts.operation.overlay.OverlayOp.INTERSECTION){var r=n.getLabel();jsts.operation.overlay.OverlayOp.isResultOfOp(r,e)&&this.filterCoveredNodeToPoint(n)}}},t.prototype.filterCoveredNodeToPoint=function(e){var t=e.getCoordinate();if(!this.op.isCoveredByLA(t)){var n=this.geometryFactory.createPoint(t);this.resultPointList.add(n)}},jsts.operation.overlay.PointBuilder=t}(),function(){var e=jsts.algorithm.PointLocator,t=jsts.geom.Location,n=jsts.geomgraph.EdgeList,r=jsts.geomgraph.Label,i=jsts.geomgraph.PlanarGraph,s=jsts.geomgraph.Position,o=jsts.geomgraph.EdgeNodingValidator,u=jsts.operation.GeometryGraphOperation,a=jsts.operation.overlay.OverlayNodeFactory,f=jsts.operation.overlay.PolygonBuilder,l=jsts.operation.overlay.LineBuilder,c=jsts.operation.overlay.PointBuilder,h=jsts.util.Assert,p=javascript.util.ArrayList;jsts.operation.overlay.OverlayOp=function(t,r){this.ptLocator=new e,this.edgeList=new n,this.resultPolyList=new p,this.resultLineList=new p,this.resultPointList=new p,u.call(this,t,r),this.graph=new i(new a),this.geomFact=t.getFactory()},jsts.operation.overlay.OverlayOp.prototype=new u,jsts.operation.overlay.OverlayOp.constructor=jsts.operation.overlay.OverlayOp,jsts.operation.overlay.OverlayOp.INTERSECTION=1,jsts.operation.overlay.OverlayOp.UNION=2,jsts.operation.overlay.OverlayOp.DIFFERENCE=3,jsts.operation.overlay.OverlayOp.SYMDIFFERENCE=4,jsts.operation.overlay.OverlayOp.overlayOp=function(e,t,n){var r=new jsts.operation.overlay.OverlayOp(e,t),i=r.getResultGeometry(n);return i},jsts.operation.overlay.OverlayOp.isResultOfOp=function(e,t){if(arguments.length===3)return jsts.operation.overlay.OverlayOp.isResultOfOp2.apply(this,arguments);var n=e.getLocation(0),r=e.getLocation(1);return jsts.operation.overlay.OverlayOp.isResultOfOp2(n,r,t)},jsts.operation.overlay.OverlayOp.isResultOfOp2=function(e,n,r){e==t.BOUNDARY&&(e=t.INTERIOR),n==t.BOUNDARY&&(n=t.INTERIOR);switch(r){case jsts.operation.overlay.OverlayOp.INTERSECTION:return e==t.INTERIOR&&n==t.INTERIOR;case jsts.operation.overlay.OverlayOp.UNION:return e==t.INTERIOR||n==t.INTERIOR;case jsts.operation.overlay.OverlayOp.DIFFERENCE:return e==t.INTERIOR&&n!=t.INTERIOR;case jsts.operation.overlay.OverlayOp.SYMDIFFERENCE:return e==t.INTERIOR&&n!=t.INTERIOR||e!=t.INTERIOR&&n==t.INTERIOR}return!1},jsts.operation.overlay.OverlayOp.prototype.ptLocator=null,jsts.operation.overlay.OverlayOp.prototype.geomFact=null,jsts.operation.overlay.OverlayOp.prototype.resultGeom=null,jsts.operation.overlay.OverlayOp.prototype.graph=null,jsts.operation.overlay.OverlayOp.prototype.edgeList=null,jsts.operation.overlay.OverlayOp.prototype.resultPolyList=null,jsts.operation.overlay.OverlayOp.prototype.resultLineList=null,jsts.operation.overlay.OverlayOp.prototype.resultPointList=null,jsts.operation.overlay.OverlayOp.prototype.getResultGeometry=function(e){return this.computeOverlay(e),this.resultGeom},jsts.operation.overlay.OverlayOp.prototype.getGraph=function(){return this.graph},jsts.operation.overlay.OverlayOp.prototype.computeOverlay=function(e){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var t=new p;this.arg[0].computeSplitEdges(t),this.arg[1].computeSplitEdges(t);var n=t;this.insertUniqueEdges(t),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),o.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(e),this.cancelDuplicateResultEdges();var r=new f(this.geomFact);r.add(this.graph),this.resultPolyList=r.getPolygons();var i=new l(this,this.geomFact,this.ptLocator);this.resultLineList=i.build(e);var s=new c(this,this.geomFact,this.ptLocator);this.resultPointList=s.build(e),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,e)},jsts.operation.overlay.OverlayOp.prototype.insertUniqueEdges=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.insertUniqueEdge(n)}},jsts.operation.overlay.OverlayOp.prototype.insertUniqueEdge=function(e){var t=this.edgeList.findEqualEdge(e);if(t!==null){var n=t.getLabel(),i=e.getLabel();t.isPointwiseEqual(e)||(i=new r(e.getLabel()),i.flip());var s=t.getDepth();s.isNull()&&s.add(n),s.add(i),n.merge(i)}else this.edgeList.add(e)},jsts.operation.overlay.OverlayOp.prototype.computeLabelsFromDepths=function(){for(var e=this.edgeList.iterator();e.hasNext();){var t=e.next(),n=t.getLabel(),r=t.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)!n.isNull(i)&&n.isArea()&&!r.isNull(i)&&(r.getDelta(i)==0?n.toLine(i):(h.isTrue(!r.isNull(i,s.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,s.LEFT,r.getLocation(i,s.LEFT)),h.isTrue(!r.isNull(i,s.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,s.RIGHT,r.getLocation(i,s.RIGHT))))}}},jsts.operation.overlay.OverlayOp.prototype.replaceCollapsedEdges=function(){var e=new p;for(var t=this.edgeList.iterator();t.hasNext();){var n=t.next();n.isCollapsed()&&(t.remove(),e.add(n.getCollapsedEdge()))}this.edgeList.addAll(e)},jsts.operation.overlay.OverlayOp.prototype.copyPoints=function(e){for(var t=this.arg[e].getNodeIterator();t.hasNext();){var n=t.next(),r=this.graph.addNode(n.getCoordinate());r.setLabel(e,n.getLabel().getLocation(e))}},jsts.operation.overlay.OverlayOp.prototype.computeLabelling=function(){for(var e=this.graph.getNodes().iterator();e.hasNext();){var t=e.next();t.getEdges().computeLabelling(this.arg)}this.mergeSymLabels(),this.updateNodeLabelling()},jsts.operation.overlay.OverlayOp.prototype.mergeSymLabels=function(){for(var e=this.graph.getNodes().iterator();e.hasNext();){var t=e.next();t.getEdges().mergeSymLabels()}},jsts.operation.overlay.OverlayOp.prototype.updateNodeLabelling=function(){for(var e=this.graph.getNodes().iterator();e.hasNext();){var t=e.next(),n=t.getEdges().getLabel();t.getLabel().merge(n)}},jsts.operation.overlay.OverlayOp.prototype.labelIncompleteNodes=function(){var e=0;for(var t=this.graph.getNodes().iterator();t.hasNext();){var n=t.next(),r=n.getLabel();n.isIsolated()&&(e++,r.isNull(0)?this.labelIncompleteNode(n,0):this.labelIncompleteNode(n,1)),n.getEdges().updateLabelling(r)}},jsts.operation.overlay.OverlayOp.prototype.labelIncompleteNode=function(e,t){var n=this.ptLocator.locate(e.getCoordinate(),this.arg[t].getGeometry());e.getLabel().setLocation(t,n)},jsts.operation.overlay.OverlayOp.prototype.findResultAreaEdges=function(e){for(var t=this.graph.getEdgeEnds().iterator();t.hasNext();){var n=t.next(),r=n.getLabel();r.isArea()&&!n.isInteriorAreaEdge()&&jsts.operation.overlay.OverlayOp.isResultOfOp(r.getLocation(0,s.RIGHT),r.getLocation(1,s.RIGHT),e)&&n.setInResult(!0)}},jsts.operation.overlay.OverlayOp.prototype.cancelDuplicateResultEdges=function(){for(var e=this.graph.getEdgeEnds().iterator();e.hasNext();){var t=e.next(),n=t.getSym();t.isInResult()&&n.isInResult()&&(t.setInResult(!1),n.setInResult(!1))}},jsts.operation.overlay.OverlayOp.prototype.isCoveredByLA=function(e){return this.isCovered(e,this.resultLineList)?!0:this.isCovered(e,this.resultPolyList)?!0:!1},jsts.operation.overlay.OverlayOp.prototype.isCoveredByA=function(e){return this.isCovered(e,this.resultPolyList)?!0:!1},jsts.operation.overlay.OverlayOp.prototype.isCovered=function(e,n){for(var r=n.iterator();r.hasNext();){var i=r.next(),s=this.ptLocator.locate(e,i);if(s!=t.EXTERIOR)return!0}return!1},jsts.operation.overlay.OverlayOp.prototype.computeGeometry=function(e,t,n,r){var i=new p;return i.addAll(e),i.addAll(t),i.addAll(n),this.geomFact.buildGeometry(i)},jsts.operation.overlay.OverlayOp.prototype.createEmptyResult=function(e){var t=null;switch(resultDimension(e,this.arg[0].getGeometry(),this.arg[1].getGeometry())){case-1:t=geomFact.createGeometryCollection();break;case 0:t=geomFact.createPoint(null);break;case 1:t=geomFact.createLineString(null);break;case 2:t=geomFact.createPolygon(null,null)}return t},jsts.operation.overlay.OverlayOp.prototype.resultDimension=function(e,t,n){var r=t.getDimension(),i=n.getDimension(),s=-1;switch(e){case jsts.operation.overlay.OverlayOp.INTERSECTION:s=Math.min(r,i);break;case jsts.operation.overlay.OverlayOp.UNION:s=Math.max(r,i);break;case jsts.operation.overlay.OverlayOp.DIFFERENCE:s=r;break;case jsts.operation.overlay.OverlayOp.SYMDIFFERENCE:s=Math.max(r,i)}return s}}(),function(){var e=function(){this.snapTolerance=0,this.seg=new jsts.geom.LineSegment,this.allowSnappingToSourceVertices=!1,this.isClosed=!1,this.srcPts=[],arguments[0]instanceof jsts.geom.LineString?this.initFromLine.apply(this,arguments):this.initFromPoints.apply(this,arguments)};e.prototype.initFromLine=function(e,t){this.initFromPoints(e.getCoordinates(),t)},e.prototype.initFromPoints=function(e,t){this.srcPts=e,this.isClosed=this.calcIsClosed(e),this.snapTolerance=t},e.prototype.setAllowSnappingToSourceVertices=function(e){this.allowSnappingToSourceVertices=e},e.prototype.calcIsClosed=function(e){return e.length<=1?!1:e[0].equals(e[e.length-1])},e.prototype.snapTo=function(e){var t=new jsts.geom.CoordinateList(this.srcPts);return this.snapVertices(t,e),this.snapSegments(t,e),t.toCoordinateArray()},e.prototype.snapVertices=function(e,t){var n=this.isClosed?e.size()-1:e.size(),r=0,i,s;for(r;r<n;r++)i=e.get(r),s=this.findSnapForVertex(i,t),s!==null&&(e.set(r,new jsts.geom.Coordinate(s)),r===0&&this.isClosed&&e.set(e.size()-1,new jsts.geom.Coordinate(s)))},e.prototype.findSnapForVertex=function(e,t){var n=0,r=t.length;for(n=0;n<r;n++){if(e.equals(t[n]))return null;if(e.distance(t[n])<this.snapTolerance)return t[n]}return null},e.prototype.snapSegments=function(e,t){if(t.length===0)return;var n=t.length,r,i,s;t.length>1&&t[0].equals2D(t[t.length-1])&&(n=t.length-1),r=0;for(r;r<n;r++)i=t[r],s=this.findSegmentIndexToSnap(i,e),s>=0&&e.add(s+1,new jsts.geom.Coordinate(i),!1)},e.prototype.findSegmentIndexToSnap=function(e,t){var n=Number.MAX_VALUE,r=-1,i=0,s;for(i;i<t.size()-1;i++){this.seg.p0=t.get(i),this.seg.p1=t.get(i+1);if(this.seg.p0.equals(e)||this.seg.p1.equals(e)){if(this.allowSnappingToSourceVertices
)continue;return-1}s=this.seg.distance(e),s<this.snapTolerance&&s<n&&(n=s,r=i)}return r},jsts.operation.overlay.snap.LineStringSnapper=e}(),function(){var e=jsts.operation.overlay.snap.LineStringSnapper,t=jsts.geom.PrecisionModel,n=javascript.util.TreeSet,r=function(e,t,n){this.snapTolerance=e,this.snapPts=t,this.isSelfSnap=n||!1};r.prototype=new jsts.geom.util.GeometryTransformer,r.prototype.snapTolerance=null,r.prototype.snapPts=null,r.prototype.isSelfSnap=!1,r.prototype.transformCoordinates=function(e,t){var n=e,r=this.snapLine(n,this.snapPts);return r},r.prototype.snapLine=function(t,n){var r=new e(t,this.snapTolerance);return r.setAllowSnappingToSourceVertices(this.isSelfSnap),r.snapTo(n)};var i=function(e){this.srcGeom=e};i.SNAP_PRECISION_FACTOR=1e-9,i.computeOverlaySnapTolerance=function(e){if(arguments.length===2)return i.computeOverlaySnapTolerance2.apply(this,arguments);var n=this.computeSizeBasedSnapTolerance(e),r=e.getPrecisionModel();if(r.getType()==t.FIXED){var s=1/r.getScale()*2/1.415;s>n&&(n=s)}return n},i.computeSizeBasedSnapTolerance=function(e){var t=e.getEnvelopeInternal(),n=Math.min(t.getHeight(),t.getWidth()),r=n*i.SNAP_PRECISION_FACTOR;return r},i.computeOverlaySnapTolerance2=function(e,t){return Math.min(this.computeOverlaySnapTolerance(e),this.computeOverlaySnapTolerance(t))},i.snap=function(e,t,n){var r=[],s=new i(e);r[0]=s.snapTo(t,n);var o=new i(t);return r[1]=o.snapTo(r[0],n),r},i.snapToSelf=function(e,t,n){var r=new i(e);return r.snapToSelf(t,n)},i.prototype.srcGeom=null,i.prototype.snapTo=function(e,t){var n=this.extractTargetCoordinates(e),i=new r(t,n);return i.transform(this.srcGeom)},i.prototype.snapToSelf=function(e,t){var n=this.extractTargetCoordinates(srcGeom),i=new r(e,n,!0),s=i.transform(srcGeom),o=s;return t&&o instanceof Polygonal&&(o=s.buffer(0)),o},i.prototype.extractTargetCoordinates=function(e){var t=new n,r=e.getCoordinates();for(var i=0;i<r.length;i++)t.add(r[i]);return t.toArray()},i.prototype.computeSnapTolerance=function(e){var t=this.computeMinimumSegmentLength(e),n=t/10;return n},i.prototype.computeMinimumSegmentLength=function(e){var t=Number.MAX_VALUE;for(var n=0;n<e.length-1;n++){var r=e[n].distance(e[n+1]);r<t&&(t=r)}return t},jsts.operation.overlay.snap.GeometrySnapper=i}(),function(){var e=jsts.operation.overlay.OverlayOp,t=jsts.operation.overlay.snap.GeometrySnapper,n=function(e,t){this.geom=[],this.geom[0]=e,this.geom[1]=t,this.computeSnapTolerance()};n.overlayOp=function(e,t,r){var i=new n(e,t);return i.getResultGeometry(r)},n.intersection=function(t,n){return this.overlayOp(t,n,e.INTERSECTION)},n.union=function(t,n){return this.overlayOp(t,n,e.UNION)},n.difference=function(t,n){return overlayOp(t,n,e.DIFFERENCE)},n.symDifference=function(t,n){return overlayOp(t,n,e.SYMDIFFERENCE)},n.prototype.geom=null,n.prototype.snapTolerance=null,n.prototype.computeSnapTolerance=function(){this.snapTolerance=t.computeOverlaySnapTolerance(this.geom[0],this.geom[1])},n.prototype.getResultGeometry=function(t){var n=this.snap(this.geom),r=e.overlayOp(n[0],n[1],t);return this.prepareResult(r)},n.prototype.selfSnap=function(e){var n=new t(e),r=n.snapTo(e,this.snapTolerance);return r},n.prototype.snap=function(e){var n=e,r=t.snap(n[0],n[1],this.snapTolerance);return r},n.prototype.prepareResult=function(e){return e},n.prototype.cbr=null,n.prototype.removeCommonBits=function(e){this.cbr=new jsts.precision.CommonBitsRemover,this.cbr.add(this.geom[0]),this.cbr.add(this.geom[1]);var t=[];return t[0]=cbr.removeCommonBits(this.geom[0].clone()),t[1]=cbr.removeCommonBits(this.geom[1].clone()),t},jsts.operation.overlay.snap.SnapOverlayOp=n}(),function(){var e=jsts.operation.overlay.OverlayOp,t=jsts.operation.overlay.snap.SnapOverlayOp,n=function(e,t){this.geom=[],this.geom[0]=e,this.geom[1]=t};n.overlayOp=function(e,t,r){var i=new n(e,t);return i.getResultGeometry(r)},n.intersection=function(t,n){return overlayOp(t,n,e.INTERSECTION)},n.union=function(t,n){return overlayOp(t,n,e.UNION)},n.difference=function(t,n){return overlayOp(t,n,e.DIFFERENCE)},n.symDifference=function(t,n){return overlayOp(t,n,e.SYMDIFFERENCE)},n.prototype.geom=null,n.prototype.getResultGeometry=function(n){var r=null,i=!1,s=null;try{r=e.overlayOp(this.geom[0],this.geom[1],n);var o=!0;o&&(i=!0)}catch(u){s=u}if(!i)try{r=t.overlayOp(this.geom[0],this.geom[1],n)}catch(u){throw s}return r},jsts.operation.overlay.snap.SnapIfNeededOverlayOp=n}(),function(){var e=function(e){this.deList=new javascript.util.ArrayList,this.factory=e};e.findEdgeRingContaining=function(e,t){var n=e.getRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),s=null,o=null;for(var u=t.iterator();u.hasNext();){var a=u.next(),f=a.getRing(),l=f.getEnvelopeInternal();s!=null&&(o=s.getRing().getEnvelopeInternal());var c=!1;if(l.equals(r))continue;i=jsts.geom.CoordinateArrays.ptNotInList(n.getCoordinates(),f.getCoordinates()),l.contains(r)&&jsts.algorithm.CGAlgorithms.isPointInRing(i,f.getCoordinates())&&(c=!0),c&&(s==null||o.contains(l))&&(s=a)}return s},e.ptNotInList=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(!isInList(r,t))return r}return null},e.isInList=function(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return!0;return!1},e.prototype.factory=null,e.prototype.deList=null,e.prototype.ring=null,e.prototype.ringPts=null,e.prototype.holes=null,e.prototype.add=function(e){this.deList.add(e)},e.prototype.isHole=function(){var e=this.getRing();return jsts.algorithm.CGAlgorithms.isCCW(e.getCoordinates())},e.prototype.addHole=function(e){this.holes==null&&(this.holes=new javascript.util.ArrayList),this.holes.add(e)},e.prototype.getPolygon=function(){var e=null;if(this.holes!=null){e=[];for(var t=0;t<this.holes.size();t++)e[t]=this.holes.get(t)}var n=this.factory.createPolygon(this.ring,e);return n},e.prototype.isValid=function(){return this.getCoordinates(),this.ringPts.length<=3?!1:(this.getRing(),this.ring.isValid())},e.prototype.getCoordinates=function(){if(this.ringPts==null){var t=new jsts.geom.CoordinateList;for(var n=this.deList.iterator();n.hasNext();){var r=n.next(),i=r.getEdge();e.addEdge(i.getLine().getCoordinates(),r.getEdgeDirection(),t)}this.ringPts=t.toCoordinateArray()}return this.ringPts},e.prototype.getLineString=function(){return this.getCoordinates(),this.factory.createLineString(this.ringPts)},e.prototype.getRing=function(){if(this.ring!=null)return this.ring;this.getCoordinates(),this.ringPts.length<3&&console.log(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(e){console.log(this.ringPts)}return this.ring},e.addEdge=function(e,t,n){if(t)for(var r=0;r<e.length;r++)n.add(e[r],!1);else for(var r=e.length-1;r>=0;r--)n.add(e[r],!1)},jsts.operation.polygonize.EdgeRing=e}(),function(){var e=jsts.planargraph.DirectedEdge,t=function(t,n,r,i){e.apply(this,arguments)};t.prototype=new e,t.prototype.edgeRing=null,t.prototype.next=null,t.prototype.label=-1,t.prototype.getLabel=function(){return this.label},t.prototype.setLabel=function(e){this.label=e},t.prototype.getNext=function(){return this.next},t.prototype.setNext=function(e){this.next=e},t.prototype.isInRing=function(){return this.edgeRing!=null},t.prototype.setRing=function(e){this.edgeRing=e},jsts.operation.polygonize.PolygonizeDirectedEdge=t}(),jsts.operation.polygonize.PolygonizeEdge=function(e){this.line=e},jsts.operation.polygonize.PolygonizeEdge.prototype=new jsts.planargraph.Edge,jsts.operation.polygonize.PolygonizeEdge.prototype.line=null,jsts.operation.polygonize.PolygonizeEdge.prototype.getLine=function(){return this.line},function(){var e=javascript.util.ArrayList,t=javascript.util.Stack,n=javascript.util.HashSet,r=jsts.util.Assert,i=jsts.operation.polygonize.EdgeRing,s=jsts.operation.polygonize.PolygonizeEdge,o=jsts.operation.polygonize.PolygonizeDirectedEdge,u=jsts.planargraph.PlanarGraph,a=jsts.planargraph.Node,f=function(e){u.apply(this),this.factory=e};f.prototype=new u,f.getDegreeNonDeleted=function(e){var t=e.getOutEdges().getEdges(),n=0;for(var r=t.iterator();r.hasNext();){var i=r.next();i.isMarked()||n++}return n},f.getDegree=function(e,t){var n=e.getOutEdges().getEdges(),r=0;for(var i=n.iterator();i.hasNext();){var s=i.next();s.getLabel()==t&&r++}return r},f.deleteAllEdges=function(e){var t=e.getOutEdges().getEdges();for(var n=t.iterator();n.hasNext();){var r=n.next();r.setMarked(!0);var i=r.getSym();i!=null&&i.setMarked(!0)}},f.prototype.factory=null,f.prototype.addEdge=function(e){if(e.isEmpty())return;var t=jsts.geom.CoordinateArrays.removeRepeatedPoints(e.getCoordinates());if(t.length<2)return;var n=t[0],r=t[t.length-1],i=this.getNode(n),u=this.getNode(r),a=new o(i,u,t[1],!0),f=new o(u,i,t[t.length-2],!1),l=new s(e);l.setDirectedEdges(a,f),this.add(l)},f.prototype.getNode=function(e){var t=this.findNode(e);return t==null&&(t=new a(e),this.add(t)),t},f.prototype.computeNextCWEdges=function(){for(var e=this.nodeIterator();e.hasNext();){var t=e.next();f.computeNextCWEdges(t)}},f.prototype.convertMaximalToMinimalEdgeRings=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),r=n.getLabel(),i=f.findIntersectionNodes(n,r);if(i==null)continue;for(var s=i.iterator();s.hasNext();){var o=s.next();f.computeNextCCWEdges(o,r)}}},f.findIntersectionNodes=function(t,n){var i=t,s=null;do{var o=i.getFromNode();f.getDegree(o,n)>1&&(s==null&&(s=new e),s.add(o)),i=i.getNext(),r.isTrue(i!=null,"found null DE in ring"),r.isTrue(i==t||!i.isInRing(),"found DE already in ring")}while(i!=t);return s},f.prototype.getEdgeRings=function(){this.computeNextCWEdges(),f.label(this.dirEdges,-1);var t=f.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(t);var n=new e;for(var r=this.dirEdges.iterator();r.hasNext();){var i=r.next();if(i.isMarked())continue;if(i.isInRing())continue;var s=this.findEdgeRing(i);n.add(s)}return n},f.findLabeledEdgeRings=function(t){var n=new e,r=1;for(var i=t.iterator();i.hasNext();){var s=i.next();if(s.isMarked())continue;if(s.getLabel()>=0)continue;n.add(s);var o=f.findDirEdgesInRing(s);f.label(o,r),r++}return n},f.prototype.deleteCutEdges=function(){this.computeNextCWEdges(),f.findLabeledEdgeRings(this.dirEdges);var t=new e;for(var n=this.dirEdges.iterator();n.hasNext();){var r=n.next();if(r.isMarked())continue;var i=r.getSym();if(r.getLabel()==i.getLabel()){r.setMarked(!0),i.setMarked(!0);var s=r.getEdge();t.add(s.getLine())}}return t},f.label=function(e,t){for(var n=e.iterator();n.hasNext();){var r=n.next();r.setLabel(t)}},f.computeNextCWEdges=function(e){var t=e.getOutEdges(),n=null,r=null;for(var i=t.getEdges().iterator();i.hasNext();){var s=i.next();if(s.isMarked())continue;n==null&&(n=s);if(r!=null){var o=r.getSym();o.setNext(s)}r=s}if(r!=null){var o=r.getSym();o.setNext(n)}},f.computeNextCCWEdges=function(e,t){var n=e.getOutEdges(),i=null,s=null,o=n.getEdges();for(var u=o.size()-1;u>=0;u--){var a=o.get(u),f=a.getSym(),l=null;a.getLabel()==t&&(l=a);var c=null;f.getLabel()==t&&(c=f);if(l==null&&c==null)continue;c!=null&&(s=c),l!=null&&(s!=null&&(s.setNext(l),s=null),i==null&&(i=l))}s!=null&&(r.isTrue(i!=null),s.setNext(i))},f.findDirEdgesInRing=function(t){var n=t,i=new e;do i.add(n),n=n.getNext(),r.isTrue(n!=null,"found null DE in ring"),r.isTrue(n==t||!n.isInRing(),"found DE already in ring");while(n!=t);return i},f.prototype.findEdgeRing=function(e){var t=e,n=new i(this.factory);do n.add(t),t.setRing(n),t=t.getNext(),r.isTrue(t!=null,"found null DE in ring"),r.isTrue(t==e||!t.isInRing(),"found DE already in ring");while(t!=e);return n},f.prototype.deleteDangles=function(){var e=this.findNodesOfDegree(1),r=new n,i=new t;for(var s=e.iterator();s.hasNext();)i.push(s.next());while(!i.isEmpty()){var o=i.pop();f.deleteAllEdges(o);var u=o.getOutEdges().getEdges();for(var s=u.iterator();s.hasNext();){var a=s.next();a.setMarked(!0);var l=a.getSym();l!=null&&l.setMarked(!0);var c=a.getEdge();r.add(c.getLine());var h=a.getToNode();f.getDegreeNonDeleted(h)==1&&i.push(h)}}return r},f.prototype.computeDepthParity=function(){for(;;){var e=null;if(e==null)return;this.computeDepthParity(e)}},f.prototype.computeDepthParity=function(e){},jsts.operation.polygonize.PolygonizeGraph=f}(),function(){var e=javascript.util.ArrayList,t=jsts.geom.GeometryComponentFilter,n=jsts.geom.LineString,r=jsts.operation.polygonize.EdgeRing,i=jsts.operation.polygonize.PolygonizeGraph,s=function(){var r=this,i=function(){};i.prototype=new t,i.prototype.filter=function(e){e instanceof n&&r.add(e)},this.lineStringAdder=new i,this.dangles=new e,this.cutEdges=new e,this.invalidRingLines=new e};s.prototype.lineStringAdder=null,s.prototype.graph=null,s.prototype.dangles=null,s.prototype.cutEdges=null,s.prototype.invalidRingLines=null,s.prototype.holeList=null,s.prototype.shellList=null,s.prototype.polyList=null,s.prototype.add=function(e){if(e instanceof jsts.geom.LineString)return this.add3(e);if(e instanceof jsts.geom.Geometry)return this.add2(e);for(var t=e.iterator();t.hasNext();){var n=t.next();this.add2(n)}},s.prototype.add2=function(e){e.apply(this.lineStringAdder)},s.prototype.add3=function(e){this.graph==null&&(this.graph=new i(e.getFactory())),this.graph.addEdge(e)},s.prototype.getPolygons=function(){return this.polygonize(),this.polyList},s.prototype.getDangles=function(){return this.polygonize(),this.dangles},s.prototype.getCutEdges=function(){return this.polygonize(),this.cutEdges},s.prototype.getInvalidRingLines=function(){return this.polygonize(),this.invalidRingLines},s.prototype.polygonize=function(){if(this.polyList!=null)return;this.polyList=new e;if(this.graph==null)return;this.dangles=this.graph.deleteDangles(),this.cutEdges=this.graph.deleteCutEdges();var t=this.graph.getEdgeRings(),n=new e;this.invalidRingLines=new e,this.findValidRings(t,n,this.invalidRingLines),this.findShellsAndHoles(n),s.assignHolesToShells(this.holeList,this.shellList),this.polyList=new e;for(var r=this.shellList.iterator();r.hasNext();){var i=r.next();this.polyList.add(i.getPolygon())}},s.prototype.findValidRings=function(e,t,n){for(var r=e.iterator();r.hasNext();){var i=r.next();i.isValid()?t.add(i):n.add(i.getLineString())}},s.prototype.findShellsAndHoles=function(t){this.holeList=new e,this.shellList=new e;for(var n=t.iterator();n.hasNext();){var r=n.next();r.isHole()?this.holeList.add(r):this.shellList.add(r)}},s.assignHolesToShells=function(e,t){for(var n=e.iterator();n.hasNext();){var r=n.next();s.assignHoleToShell(r,t)}},s.assignHoleToShell=function(e,t){var n=r.findEdgeRingContaining(e,t);n!=null&&n.addHole(e.getRing())},jsts.operation.polygonize.Polygonizer=s}(),function(){var e=javascript.util.ArrayList;jsts.operation.relate.EdgeEndBuilder=function(){},jsts.operation.relate.EdgeEndBuilder.prototype.computeEdgeEnds=function(t){if(arguments.length==2){this.computeEdgeEnds2.apply(this,arguments);return}var n=new e;for(var r=t;r.hasNext();){var i=r.next();this.computeEdgeEnds2(i,n)}return n},jsts.operation.relate.EdgeEndBuilder.prototype.computeEdgeEnds2=function(e,t){var n=e.getEdgeIntersectionList();n.addEndpoints();var r=n.iterator(),i=null,s=null;if(!r.hasNext())return;var o=r.next();do i=s,s=o,o=null,r.hasNext()&&(o=r.next()),s!==null&&(this.createEdgeEndForPrev(e,t,s,i),this.createEdgeEndForNext(e,t,s,o));while(s!==null)},jsts.operation.relate.EdgeEndBuilder.prototype.createEdgeEndForPrev=function(e,t,n,r){var i=n.segmentIndex;if(n.dist===0){if(i===0)return;i--}var s=e.getCoordinate(i);r!==null&&r.segmentIndex>=i&&(s=r.coord);var o=new jsts.geomgraph.Label(e.getLabel());o.flip();var u=new jsts.geomgraph.EdgeEnd(e,n.coord,s,o);t.add(u)},jsts.operation.relate.EdgeEndBuilder.prototype.createEdgeEndForNext=function(e,t,n,r){var i=n.segmentIndex+1;if(i>=e.getNumPoints()&&r===null)return;var s=e.getCoordinate(i);r!==null&&r.segmentIndex===n.segmentIndex&&(s=r.coord);var o=new jsts.geomgraph.EdgeEnd(e,n.coord,s,new jsts.geomgraph.Label(e.getLabel()));t.add(o)}}(),jsts.operation.relate.EdgeEndBundle=function(){this.edgeEnds=[];var e=arguments[0]instanceof jsts.geomgraph.EdgeEnd?arguments[0]:arguments[1],t=e.getEdge(),n=e.getCoordinate(),r=e.getDirectedCoordinate(),i=new jsts.geomgraph.Label(e.getLabel());jsts.geomgraph.EdgeEnd.call(this,t,n,r,i),this.insert(e)},jsts.operation.relate.EdgeEndBundle.prototype=new jsts.geomgraph.EdgeEnd,jsts.operation.relate.EdgeEndBundle.prototype.edgeEnds=null,jsts.operation.relate.EdgeEndBundle.prototype.getLabel=function(){return this.label},jsts.operation.relate.EdgeEndBundle.prototype.getEdgeEnds=function(){return this.edgeEnds},jsts.operation.relate.EdgeEndBundle.prototype.insert=function(e){this.edgeEnds.push(e)},jsts.operation.relate.EdgeEndBundle.prototype.computeLabel=function(e){var t=!1;for(var n=0;n<this.edgeEnds.length;n++){var r=this.edgeEnds[n];r.getLabel().isArea()&&(t=!0)}t?this.label=new jsts.geomgraph.Label(jsts.geom.Location.NONE,jsts.geom.Location.NONE,jsts.geom.Location.NONE):this.label=new jsts.geomgraph.Label(jsts.geom.Location.NONE);for(var n=0;n<2;n++)this.computeLabelOn(n,e),t&&this.computeLabelSides(n)},jsts.operation.relate.EdgeEndBundle.prototype.computeLabelOn=function(e,t){var n=0,r=!1;for(var i=0;i<this.edgeEnds.length;i++){var s=this.edgeEnds[i],o=s.getLabel().getLocation(e);o==jsts.geom.Location.BOUNDARY&&n++,o==jsts.geom.Location.INTERIOR&&(r=!0)}var o=jsts.geom.Location.NONE;r&&(o=jsts.geom.Location.INTERIOR),n>0&&(o=jsts.geomgraph.GeometryGraph.determineBoundary(t,n)),this.label.setLocation(e,o)},jsts.operation.relate.EdgeEndBundle.prototype.computeLabelSides=function(e){this.computeLabelSide(e,jsts.geomgraph.Position.LEFT),this.computeLabelSide(e,jsts.geomgraph.Position.RIGHT)},jsts.operation.relate.EdgeEndBundle.prototype.computeLabelSide=function(e,t){for(var n=0;n<this.edgeEnds.length;n++){var r=this.edgeEnds[n];if(r.getLabel().isArea()){var i=r.getLabel().getLocation(e,t);if(i===jsts.geom.Location.INTERIOR){this.label.setLocation(e,t,jsts.geom.Location.INTERIOR);return}i===jsts.geom.Location.EXTERIOR&&this.label.setLocation(e,t,jsts.geom.Location.EXTERIOR)}}},jsts.operation.relate.EdgeEndBundle.prototype.updateIM=function(e){jsts.geomgraph.Edge.updateIM(this.label,e)},jsts.operation.relate.EdgeEndBundleStar=function(){jsts.geomgraph.EdgeEndStar.apply(this,arguments)},jsts.operation.relate.EdgeEndBundleStar.prototype=new jsts.geomgraph.EdgeEndStar,jsts.operation.relate.EdgeEndBundleStar.prototype.insert=function(e){var t=this.edgeMap.get(e);t===null?(t=new jsts.operation.relate.EdgeEndBundle(e),this.insertEdgeEnd(e,t)):t.insert(e)},jsts.operation.relate.EdgeEndBundleStar.prototype.updateIM=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.updateIM(e)}},function(){var e=jsts.geom.Location,t=jsts.util.Assert,n=javascript.util.ArrayList;jsts.operation.relate.RelateComputer=function(e){this.li=new jsts.algorithm.RobustLineIntersector,this.ptLocator=new jsts.algorithm.PointLocator,this.nodes=new jsts.geomgraph.NodeMap(new jsts.operation.relate.RelateNodeFactory),this.isolatedEdges=new n,this.arg=e},jsts.operation.relate.RelateComputer.prototype.li=null,jsts.operation.relate.RelateComputer.prototype.ptLocator=null,jsts.operation.relate.RelateComputer.prototype.arg=null,jsts.operation.relate.RelateComputer.prototype.nodes=null,jsts.operation.relate.RelateComputer.prototype.im=null,jsts.operation.relate.RelateComputer.prototype.isolatedEdges=null,jsts.operation.relate.RelateComputer.prototype.invalidPoint=null,jsts.operation.relate.RelateComputer.prototype.computeIM=function(){var t=new jsts.geom.IntersectionMatrix;t.set(e.EXTERIOR,e.EXTERIOR,2);if(!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var n=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(n,t);var r=new jsts.operation.relate.EdgeEndBuilder,i=r.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(i);var s=r.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(s),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t},jsts.operation.relate.RelateComputer.prototype.insertEdgeEnds=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.nodes.add(n)}},jsts.operation.relate.RelateComputer.prototype.computeProperIntersectionIM=function(e,t){var n=this.arg[0].getGeometry().getDimension(),r=this.arg[1].getGeometry().getDimension(),i=e.hasProperIntersection(),s=e.hasProperInteriorIntersection();n===2&&r===2?i&&t.setAtLeast("212101212"):n===2&&r===1?(i&&t.setAtLeast("FFF0FFFF2"),s&&t.setAtLeast("1FFFFF1FF")):n===1&&r===2?(i&&t.setAtLeast("F0FFFFFF2"),s&&t.setAtLeast("1F1FFFFFF")):n===1&&r===1&&s&&t.setAtLeast("0FFFFFFFF")},jsts.operation.relate.RelateComputer.prototype.copyNodesAndLabels=function(e){for(var t=this.arg[e].getNodeIterator();t.hasNext();){var n=t.next(),r=this.nodes.addNode(n.getCoordinate());r.setLabel(e,n.getLabel().getLocation(e))}},jsts.operation.relate.RelateComputer.prototype.computeIntersectionNodes=function(t){for(var n=this.arg[t].getEdgeIterator();n.hasNext();){var r=n.next(),i=r.getLabel().getLocation(t);for(var s=r.getEdgeIntersectionList().iterator();s.hasNext();){var o=s.next(),u=this.nodes.addNode(o.coord);i===e.BOUNDARY?u.setLabelBoundary(t):u.getLabel().isNull(t)&&u.setLabel(t,e.INTERIOR)}}},jsts.operation.relate.RelateComputer.prototype.labelIntersectionNodes=function(t){for(var n=this.arg[t].getEdgeIterator();n.hasNext();){var r=n.next(),i=r.getLabel().getLocation(t);for(var s=r.getEdgeIntersectionList().iterator();s.hasNext();){var o=s.next(),u=this.nodes.find(o.coord);u.getLabel().isNull(t)&&(i===e.BOUNDARY?u.setLabelBoundary(t):u.setLabel(t,e.INTERIOR))}}},jsts.operation.relate.RelateComputer.prototype.computeDisjointIM=function(t){var n=this.arg[0].getGeometry();n.isEmpty()||(t.set(e.INTERIOR,e.EXTERIOR,n.getDimension()),t.set(e.BOUNDARY,e.EXTERIOR,n.getBoundaryDimension()));var r=this.arg[1].getGeometry();r.isEmpty()||(t.set(e.EXTERIOR,e.INTERIOR,r.getDimension()),t.set(e.EXTERIOR,e.BOUNDARY,r.getBoundaryDimension()))},jsts.operation.relate.RelateComputer.prototype.labelNodeEdges=function(){for(var e=this.nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().computeLabelling(this.arg)}},jsts.operation.relate.RelateComputer.prototype.updateIM=function(e){for(var t=this.isolatedEdges.iterator();t.hasNext();){var n=t.next();n.updateIM(e)}for(var r=this.nodes.iterator();r.hasNext();){var i=r.next();i.updateIM(e),i.updateIMFromEdges(e)}},jsts.operation.relate.RelateComputer.prototype.labelIsolatedEdges=function(e,t){for(var n=this.arg[e].getEdgeIterator();n.hasNext();){var r=n.next();r.isIsolated()&&(this.labelIsolatedEdge(r,t,this.arg[t].getGeometry()),this.isolatedEdges.add(r))}},jsts.operation.relate.RelateComputer.prototype.labelIsolatedEdge=function(t,n,r){if(r.getDimension()>0){var i=this.ptLocator.locate(t.getCoordinate(),r);t.getLabel().setAllLocations(n,i)}else t.getLabel().setAllLocations(n,e.EXTERIOR)},jsts.operation.relate.RelateComputer.prototype.labelIsolatedNodes=function(){for(var e=this.nodes.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();t.isTrue(r.getGeometryCount()>0,"node with empty label found"),n.isIsolated()&&(r.isNull(0)?this.labelIsolatedNode(n,0):this.labelIsolatedNode(n,1))}},jsts.operation.relate.RelateComputer.prototype.labelIsolatedNode=function(e,t){var n=this.ptLocator.locate(e.getCoordinate(),this.arg[t].getGeometry());e.getLabel().setAllLocations(t,n)}}(),jsts.operation.relate.RelateNode=function(e,t){jsts.geomgraph.Node.apply(this,arguments)},jsts.operation.relate.RelateNode.prototype=new jsts.geomgraph.Node,jsts.operation.relate.RelateNode.prototype.computeIM=function(e){e.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)},jsts.operation.relate.RelateNode.prototype.updateIMFromEdges=function(e){this.edges.updateIM(e)},jsts.operation.relate.RelateNodeFactory=function(){},jsts.operation.relate.RelateNodeFactory.prototype=new jsts.geomgraph.NodeFactory,jsts.operation.relate.RelateNodeFactory.prototype.createNode=function(e){return new jsts.operation.relate.RelateNode(e,new jsts.operation.relate.EdgeEndBundleStar)},function(){var e=jsts.geom.Location;jsts.operation.relate.RelateNodeGraph=function(){this.nodes=new jsts.geomgraph.NodeMap(new jsts.operation.relate.RelateNodeFactory)},jsts.operation.relate.RelateNodeGraph.prototype.nodes=null,jsts.operation.relate.RelateNodeGraph.prototype.build=function(e){this.computeIntersectionNodes(e,0),this.copyNodesAndLabels(e,0);var t=new jsts.operation.relate.EdgeEndBuilder,n=t.computeEdgeEnds(e.getEdgeIterator());this.insertEdgeEnds(n)},jsts.operation.relate.RelateNodeGraph.prototype.computeIntersectionNodes=function(t,n){for(var r=t.getEdgeIterator();r.hasNext();){var i=r.next(),s=i.getLabel().getLocation(n);for(var o=i.getEdgeIntersectionList().iterator();o.hasNext();){var u=o.next(),a=this.nodes.addNode(u.coord);s===e.BOUNDARY?a.setLabelBoundary(n):a.getLabel().isNull(n)&&a.setLabel(n,e.INTERIOR)}}},jsts.operation.relate.RelateNodeGraph.prototype.copyNodesAndLabels=function(e,t){for(var n=e.getNodeIterator();n.hasNext();){var r=n.next(),i=this.nodes.addNode(r.getCoordinate());i.setLabel(t,r.getLabel().getLocation(t))}},jsts.operation.relate.RelateNodeGraph.prototype.insertEdgeEnds=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.nodes.add(n)}},jsts.operation.relate.RelateNodeGraph.prototype.getNodeIterator=function(){return this.nodes.iterator()}}(),jsts.operation.relate.RelateOp=function(){jsts.operation.GeometryGraphOperation.apply(this,arguments),this._relate=new jsts.operation.relate.RelateComputer(this.arg)},jsts.operation.relate.RelateOp.prototype=new jsts.operation.GeometryGraphOperation,jsts.operation.relate.RelateOp.relate=function(e,t,n){var r=new jsts.operation.relate.RelateOp(e,t,n),i=r.getIntersectionMatrix();return i},jsts.operation.relate.RelateOp.prototype._relate=null,jsts.operation.relate.RelateOp.prototype.getIntersectionMatrix=function(){return this._relate.computeIM()},jsts.operation.union.CascadedPolygonUnion=function(e){this.inputPolys=e},jsts.operation.union.CascadedPolygonUnion.union=function(e){var t=new jsts.operation.union.CascadedPolygonUnion(e);return t.union()},jsts.operation.union.CascadedPolygonUnion.prototype.inputPolys,jsts.operation.union.CascadedPolygonUnion.prototype.geomFactory=null,jsts.operation.union.CascadedPolygonUnion.prototype.STRTREE_NODE_CAPACITY=4,jsts.operation.union.CascadedPolygonUnion.prototype.union=function(){if(this.inputPolys.length===0)return null;this.geomFactory=this.inputPolys[0].getFactory();var e=new jsts.index.strtree.STRtree(this.STRTREE_NODE_CAPACITY);for(var t=0,n=this.inputPolys.length;t<n;t++){var r=this.inputPolys[t];e.insert(r.getEnvelopeInternal(),r)}var i=e.itemsTree(),s=this.unionTree(i);return s},jsts.operation.union.CascadedPolygonUnion.prototype.unionTree=function(e){var t=this.reduceToGeometries(e),n=this.binaryUnion(t);return n},jsts.operation.union.CascadedPolygonUnion.prototype.binaryUnion=function(e,t,n){t=t||0,n=n||e.length;if(n-t<=1){var r=this.getGeometry(e,t);return this.unionSafe(r,null)}if(n-t===2)return this.unionSafe(this.getGeometry(e,t),this.getGeometry(e,t+1));var i=parseInt((n+t)/2),r=this.binaryUnion(e,t,i),s=this.binaryUnion(e,i,n);return this.unionSafe(r,s)},jsts.operation.union.CascadedPolygonUnion.prototype.getGeometry=function(e,t){return t>=e.length?null:e[t]},jsts.operation.union.CascadedPolygonUnion.prototype.reduceToGeometries=function(e){var t=[];for(var n=0,r=e.length;n<r;n++){var i=e[n],s=null;i instanceof Array?s=this.unionTree(i):i instanceof jsts.geom.Geometry&&(s=i),t.push(s)}return t},jsts.operation.union.CascadedPolygonUnion.prototype.unionSafe=function(e,t){return e===null&&t===null?null:e===null?t.clone():t===null?e.clone():this.unionOptimized(e,t)},jsts.operation.union.CascadedPolygonUnion.prototype.unionOptimized=function(e,t){var n=e.getEnvelopeInternal(),r=t.getEnvelopeInternal();if(!n.intersects(r)){var i=jsts.geom.util.GeometryCombiner.combine(e,t);return i}if(e.getNumGeometries<=1&&t.getNumGeometries<=1)return this.unionActual(e,t);var s=n.intersection(r);return this.unionUsingEnvelopeIntersection(e,t,s)},jsts.operation.union.CascadedPolygonUnion.prototype.unionUsingEnvelopeIntersection=function(e,t,n){var r=new javascript.util.ArrayList,i=this.extractByEnvelope(n,e,r),s=this.extractByEnvelope(n,t,r),o=this.unionActual(i,s);r.add(o);var u=jsts.geom.util.GeometryCombiner.combine(r);return u},jsts.operation.union.CascadedPolygonUnion.prototype.extractByEnvelope=function(e,t,n){var r=new javascript.util.ArrayList;for(var i=0;i<t.getNumGeometries();i++){var s=t.getGeometryN(i);s.getEnvelopeInternal().intersects(e)?r.add(s):n.add(s)}return this.geomFactory.buildGeometry(r)},jsts.operation.union.CascadedPolygonUnion.prototype.unionActual=function(e,t){return e.union(t)},jsts.operation.union.PointGeometryUnion=function(e,t){this.pointGeom=e,this.otherGeom=t,this.geomFact=t.getFactory()},jsts.operation.union.PointGeometryUnion.union=function(e,t){var n=new jsts.operation.union.PointGeometryUnion(e,t);return n.union()},jsts.operation.union.PointGeometryUnion.prototype.pointGeom=null,jsts.operation.union.PointGeometryUnion.prototype.otherGeom=null,jsts.operation.union.PointGeometryUnion.prototype.geomFact=null,jsts.operation.union.PointGeometryUnion.prototype.union=function(){var e=new jsts.algorithm.PointLocator,t=[];for(var n=0,r=this.pointGeom.getNumGeometries();n<r;n++){var i=this.pointGeom.getGeometryN(n),s=i.getCoordinate(),o=e.locate(s,this.otherGeom);if(o===jsts.geom.Location.EXTERIOR){var u=!0;for(var a=t.length;n--;)if(t[a].equals(s)){u=!1;break}u&&t.push(s)}}t.sort(function(e,t){return e.compareTo(t)});if(t.length===0)return this.otherGeom;var f=null,l=jsts.geom.CoordinateArrays.toCoordinateArray(t);return l.length===1?f=this.geomFact.createPoint(l[0]):f=this.geomFact.createMultiPoint(l),jsts.geom.util.GeometryCombiner.combine(f,this.otherGeom)},function(){var e=jsts.geom.util.GeometryExtracter,t=jsts.operation.union.CascadedPolygonUnion,n=jsts.operation.union.PointGeometryUnion,r=jsts.operation.overlay.OverlayOp,i=jsts.operation.overlay.snap.SnapIfNeededOverlayOp,s=javascript.util.ArrayList;jsts.operation.union.UnaryUnionOp=function(e,t){this.polygons=new s,this.lines=new s,this.points=new s,t&&(this.geomFact=t),this.extract(e)},jsts.operation.union.UnaryUnionOp.union=function(e,t){var n=new jsts.operation.union.UnaryUnionOp(e,t);return n.union()},jsts.operation.union.UnaryUnionOp.prototype.polygons=null,jsts.operation.union.UnaryUnionOp.prototype.lines=null,jsts.operation.union.UnaryUnionOp.prototype.points=null,jsts.operation.union.UnaryUnionOp.prototype.geomFact=null,jsts.operation.union.UnaryUnionOp.prototype.extract=function(t){if(t instanceof s)for(var n=t.iterator();n.hasNext();){var r=n.next();this.extract(r)}else this.geomFact===null&&(this.geomFact=t.getFactory()),e.extract(t,jsts.geom.Polygon,this.polygons),e.extract(t,jsts.geom.LineString,this.lines),e.extract(t,jsts.geom.Point,this.points)},jsts.operation.union.UnaryUnionOp.prototype.union=function(){if(this.geomFact===null)return null;var e=null;if(this.points.size()>0){var r=this.geomFact.buildGeometry(this.points);e=this.unionNoOpt(r)}var i=null;if(this.lines.size()>0){var s=this.geomFact.buildGeometry(this.lines);i=this.unionNoOpt(s)}var o=null;this.polygons.size()>0&&(o=t.union(this.polygons));var u=this.unionWithNull(i,o),a=null;return e===null?a=u:u===null?a=e:a=n(e,u),a===null?this.geomFact.createGeometryCollection(null):a},jsts.operation.union.UnaryUnionOp.prototype.unionWithNull=function(e,t){return e===null&&t===null?null:t===null?e:e===null?t:e.union(t)},jsts.operation.union.UnaryUnionOp.prototype.unionNoOpt=function(e){var t=this.geomFact.createPoint(null);return i.overlayOp(e,t,r.UNION)}}(),jsts.operation.union.UnionInteracting=function(e,t){this.g0=e,this.g1=t,this.geomFactory=e.getFactory(),this.interacts0=[],this.interacts1=[]},jsts.operation.union.UnionInteracting.union=function(e,t){var n=new jsts.operation.union.UnionInteracting(e,t);return n.union()},jsts.operation.union.UnionInteracting.prototype.geomFactory=null,jsts.operation.union.UnionInteracting.prototype.g0=null,jsts.operation.union.UnionInteracting.prototype.g1=null,jsts.operation.union.UnionInteracting.prototype.interacts0=null,jsts.operation.union.UnionInteracting.prototype.interacts1=null,jsts.operation.union.UnionInteracting.prototype.union=function(){this.computeInteracting();var e=this.extractElements(this.g0,this.interacts0,!0
),t=this.extractElements(this.g1,this.interacts1,!0);e.isEmpty()||t.isEmpty();var n=in0.union(t),r=this.extractElements(this.g0,this.interacts0,!1),i=this.extractElements(this.g1,this.interacts1,!1),s=jsts.geom.util.GeometryCombiner.combine(n,r,i);return s},jsts.operation.union.UnionInteracting.prototype.bufferUnion=function(e,t){var n=e.getFactory(),r=n.createGeometryCollection([e,t]),i=r.buffer(0);return i},jsts.operation.union.UnionInteracting.prototype.computeInteracting=function(e){if(!!e){var i=!1;for(var t=0,n=g1.getNumGeometries();t<n;t++){var s=this.g1.getGeometryN(t),o=s.getEnvelopeInternal().intersects(e.getEnvelopeInternal());o&&(this.interacts1[t]=!0,i=!0)}return i}for(var t=0,n=this.g0.getNumGeometries();t<n;t++){var r=this.g0.getGeometryN(t);this.interacts0[t]=this.computeInteracting(r)}},jsts.operation.union.UnionInteracting.prototype.extractElements=function(e,t,n){var r=[];for(var i=0,s=e.getNumGeometries();i<s;i++){var o=e.getGeometryN(i);t[i]===n&&r.push(o)}return this.geomFactory.buildGeometry(r)},jsts.operation.valid.IsValidOp=function(e){this.parentGeometry=e,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null},jsts.operation.valid.IsValidOp.isValid=function(e){if(arguments[0]instanceof jsts.geom.Coordinate)return isNaN(e.x)?!1:!isFinite(e.x)&&!isNaN(e.x)?!1:isNaN(e.y)?!1:!isFinite(e.y)&&!isNaN(e.y)?!1:!0;var t=new jsts.operation.valid.IsValidOp(e);return t.isValid()},jsts.operation.valid.IsValidOp.findPtNotNode=function(e,t,n){var r=n.findEdge(t),i=r.getEdgeIntersectionList();for(var s=0;s<e.length;s++){var o=e[s];if(!i.isIntersection(o))return o}return null},jsts.operation.valid.IsValidOp.prototype.setSelfTouchingRingFormingHoleValid=function(e){this.isSelfTouchingRingFormingHoleValid=e},jsts.operation.valid.IsValidOp.prototype.isValid=function(){return this.checkValid(this.parentGeometry),this.validErr==null},jsts.operation.valid.IsValidOp.prototype.getValidationError=function(){return this.checkValid(this.parentGeometry),this.validErr},jsts.operation.valid.IsValidOp.prototype.checkValid=function(e){this.validErr=null;if(e.isEmpty())return;if(e instanceof jsts.geom.Point)this.checkValidPoint(e);else if(e instanceof jsts.geom.MultiPoint)this.checkValidMultiPoint(e);else if(e instanceof jsts.geom.LinearRing)this.checkValidLinearRing(e);else if(e instanceof jsts.geom.LineString)this.checkValidLineString(e);else if(e instanceof jsts.geom.Polygon)this.checkValidPolygon(e);else if(e instanceof jsts.geom.MultiPolygon)this.checkValidMultiPolygon(e);else{if(!(e instanceof jsts.geom.GeometryCollection))throw e.constructor;this.checkValidGeometryCollection(e)}},jsts.operation.valid.IsValidOp.prototype.checkValidPoint=function(e){this.checkInvalidCoordinates(e.getCoordinates())},jsts.operation.valid.IsValidOp.prototype.checkValidMultiPoint=function(e){this.checkInvalidCoordinates(e.getCoordinates())},jsts.operation.valid.IsValidOp.prototype.checkValidLineString=function(e){this.checkInvalidCoordinates(e.getCoordinates());if(this.validErr!=null)return;var t=new jsts.geomgraph.GeometryGraph(0,e);this.checkTooFewPoints(t)},jsts.operation.valid.IsValidOp.prototype.checkValidLinearRing=function(e){this.checkInvalidCoordinates(e.getCoordinates());if(this.validErr!=null)return;this.checkClosedRing(e);if(this.validErr!=null)return;var t=new jsts.geomgraph.GeometryGraph(0,e);this.checkTooFewPoints(t);if(this.validErr!=null)return;var n=new jsts.algorithm.RobustLineIntersector;t.computeSelfNodes(n,!0),this.checkNoSelfIntersectingRings(t)},jsts.operation.valid.IsValidOp.prototype.checkValidPolygon=function(e){this.checkInvalidCoordinates(e);if(this.validErr!=null)return;this.checkClosedRings(e);if(this.validErr!=null)return;var t=new jsts.geomgraph.GeometryGraph(0,e);this.checkTooFewPoints(t);if(this.validErr!=null)return;this.checkConsistentArea(t);if(this.validErr!=null)return;if(!this.isSelfTouchingRingFormingHoleValid){this.checkNoSelfIntersectingRings(t);if(this.validErr!=null)return}this.checkHolesInShell(e,t);if(this.validErr!=null)return;this.checkHolesNotNested(e,t);if(this.validErr!=null)return;this.checkConnectedInteriors(t)},jsts.operation.valid.IsValidOp.prototype.checkValidMultiPolygon=function(e){var t=e.getNumGeometries();for(var n=0;n<t;n++){var r=e.getGeometryN(n);this.checkInvalidCoordinates(r);if(this.validErr!=null)return;this.checkClosedRings(r);if(this.validErr!=null)return}var i=new jsts.geomgraph.GeometryGraph(0,e);this.checkTooFewPoints(i);if(this.validErr!=null)return;this.checkConsistentArea(i);if(this.validErr!=null)return;if(!this.isSelfTouchingRingFormingHoleValid){this.checkNoSelfIntersectingRings(i);if(this.validErr!=null)return}for(var n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n);this.checkHolesInShell(r,i);if(this.validErr!=null)return}for(var n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n);this.checkHolesNotNested(r,i);if(this.validErr!=null)return}this.checkShellsNotNested(e,i);if(this.validErr!=null)return;this.checkConnectedInteriors(i)},jsts.operation.valid.IsValidOp.prototype.checkValidGeometryCollection=function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);this.checkValid(n);if(this.validErr!=null)return}},jsts.operation.valid.IsValidOp.prototype.checkInvalidCoordinates=function(e){if(e instanceof jsts.geom.Polygon){var t=e;this.checkInvalidCoordinates(t.getExteriorRing().getCoordinates());if(this.validErr!=null)return;for(var n=0;n<t.getNumInteriorRing();n++){this.checkInvalidCoordinates(t.getInteriorRingN(n).getCoordinates());if(this.validErr!=null)return}}else{var r=e;for(var n=0;n<r.length;n++)if(!jsts.operation.valid.IsValidOp.isValid(r[n])){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.INVALID_COORDINATE,r[n]);return}}},jsts.operation.valid.IsValidOp.prototype.checkClosedRings=function(e){this.checkClosedRing(e.getExteriorRing());if(this.validErr!=null)return;for(var t=0;t<e.getNumInteriorRing();t++){this.checkClosedRing(e.getInteriorRingN(t));if(this.validErr!=null)return}},jsts.operation.valid.IsValidOp.prototype.checkClosedRing=function(e){if(!e.isClosed()){var t=null;e.getNumPoints()>=1&&(t=e.getCoordinateN(0)),this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.RING_NOT_CLOSED,t)}},jsts.operation.valid.IsValidOp.prototype.checkTooFewPoints=function(e){if(e.hasTooFewPoints){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.TOO_FEW_POINTS,e.getInvalidPoint());return}},jsts.operation.valid.IsValidOp.prototype.checkConsistentArea=function(e){var t=new jsts.operation.valid.ConsistentAreaTester(e),n=t.isNodeConsistentArea();if(!n){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.SELF_INTERSECTION,t.getInvalidPoint());return}t.hasDuplicateRings()&&(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.DUPLICATE_RINGS,t.getInvalidPoint()))},jsts.operation.valid.IsValidOp.prototype.checkNoSelfIntersectingRings=function(e){for(var t=e.getEdgeIterator();t.hasNext();){var n=t.next();this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList());if(this.validErr!=null)return}},jsts.operation.valid.IsValidOp.prototype.checkNoSelfIntersectingRing=function(e){var t=[],n=!0;for(var r=e.iterator();r.hasNext();){var i=r.next();if(n){n=!1;continue}if(t.indexOf(i.coord)>=0){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.RING_SELF_INTERSECTION,i.coord);return}t.push(i.coord)}},jsts.operation.valid.IsValidOp.prototype.checkHolesInShell=function(e,t){var n=e.getExteriorRing(),r=new jsts.algorithm.MCPointInRing(n);for(var i=0;i<e.getNumInteriorRing();i++){var s=e.getInteriorRingN(i),o=jsts.operation.valid.IsValidOp.findPtNotNode(s.getCoordinates(),n,t);if(o==null)return;var u=!r.isInside(o);if(u){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.HOLE_OUTSIDE_SHELL,o);return}}},jsts.operation.valid.IsValidOp.prototype.checkHolesNotNested=function(e,t){var n=new jsts.operation.valid.IndexedNestedRingTester(t);for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);n.add(i)}var s=n.isNonNested();s||(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.NESTED_HOLES,n.getNestedPoint()))},jsts.operation.valid.IsValidOp.prototype.checkShellsNotNested=function(e,t){for(var n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n),i=r.getExteriorRing();for(var s=0;s<e.getNumGeometries();s++){if(n==s)continue;var o=e.getGeometryN(s);this.checkShellNotNested(i,o,t);if(this.validErr!=null)return}}},jsts.operation.valid.IsValidOp.prototype.checkShellNotNested=function(e,t,n){var r=e.getCoordinates(),i=t.getExteriorRing(),s=i.getCoordinates(),o=jsts.operation.valid.IsValidOp.findPtNotNode(r,i,n);if(o==null)return;var u=jsts.algorithm.CGAlgorithms.isPointInRing(o,s);if(!u)return;if(t.getNumInteriorRing()<=0){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.NESTED_SHELLS,o);return}var a=null;for(var f=0;f<t.getNumInteriorRing();f++){var l=t.getInteriorRingN(f);a=this.checkShellInsideHole(e,l,n);if(a==null)return}this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.NESTED_SHELLS,a)},jsts.operation.valid.IsValidOp.prototype.checkShellInsideHole=function(e,t,n){var r=e.getCoordinates(),i=t.getCoordinates(),s=jsts.operation.valid.IsValidOp.findPtNotNode(r,t,n);if(s!=null){var o=jsts.algorithm.CGAlgorithms.isPointInRing(s,i);if(!o)return s}var u=jsts.operation.valid.IsValidOp.findPtNotNode(i,e,n);if(u!=null){var a=jsts.algorithm.CGAlgorithms.isPointInRing(u,r);return a?u:null}return jsts.util.Assert.shouldNeverReachHere("points in shell and hole appear to be equal"),null},jsts.operation.valid.IsValidOp.prototype.checkConnectedInteriors=function(e){var t=new jsts.operation.valid.ConnectedInteriorTester(e);t.isInteriorsConnected()||(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.DISCONNECTED_INTERIOR,t.getCoordinate()))},jsts.operation.valid.TopologyValidationError=function(e,t){this.errorType=e,this.pt=null,t!=null&&(this.pt=t.clone())},jsts.operation.valid.TopologyValidationError.HOLE_OUTSIDE_SHELL=2,jsts.operation.valid.TopologyValidationError.NESTED_HOLES=3,jsts.operation.valid.TopologyValidationError.DISCONNECTED_INTERIOR=4,jsts.operation.valid.TopologyValidationError.SELF_INTERSECTION=5,jsts.operation.valid.TopologyValidationError.RING_SELF_INTERSECTION=6,jsts.operation.valid.TopologyValidationError.NESTED_SHELLS=7,jsts.operation.valid.TopologyValidationError.DUPLICATE_RINGS=8,jsts.operation.valid.TopologyValidationError.TOO_FEW_POINTS=9,jsts.operation.valid.TopologyValidationError.INVALID_COORDINATE=10,jsts.operation.valid.TopologyValidationError.RING_NOT_CLOSED=11,jsts.operation.valid.TopologyValidationError.prototype.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],jsts.operation.valid.TopologyValidationError.prototype.getCoordinate=function(){return this.pt},jsts.operation.valid.TopologyValidationError.prototype.getErrorType=function(){return this.errorType},jsts.operation.valid.TopologyValidationError.prototype.getMessage=function(){return this.errMsg[this.errorType]},jsts.operation.valid.TopologyValidationError.prototype.toString=function(){var e="";return this.pt!=null?(e=" at or near point "+this.pt,this.getMessage()+e):e},jsts.operation.valid.ConsistentAreaTester=function(e){this.geomGraph=e,this.li=new jsts.algorithm.RobustLineIntersector,this.nodeGraph=new jsts.operation.relate.RelateNodeGraph,this.invalidPoint=null},jsts.operation.valid.ConsistentAreaTester.prototype.getInvalidPoint=function(){return this.invalidPoint},jsts.operation.valid.ConsistentAreaTester.prototype.isNodeConsistentArea=function(){var e=this.geomGraph.computeSelfNodes(this.li,!0);return e.hasProperIntersection()?(this.invalidPoint=e.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())},jsts.operation.valid.ConsistentAreaTester.prototype.isNodeEdgeAreaLabelsConsistent=function(){for(var e=this.nodeGraph.getNodeIterator();e.hasNext();){var t=e.next();if(!t.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=t.getCoordinate().clone(),!1}return!0},jsts.operation.valid.ConsistentAreaTester.prototype.hasDuplicateRings=function(){for(var e=this.nodeGraph.getNodeIterator();e.hasNext();){var t=e.next();for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.getEdgeEnds().length>1)return invalidPoint=r.getEdge().getCoordinate(0),!0}}return!1},jsts.operation.valid.IndexedNestedRingTester=function(e){this.graph=e,this.rings=new javascript.util.ArrayList,this.totalEnv=new jsts.geom.Envelope,this.index=null,this.nestedPt=null},jsts.operation.valid.IndexedNestedRingTester.prototype.getNestedPoint=function(){return this.nestedPt},jsts.operation.valid.IndexedNestedRingTester.prototype.add=function(e){this.rings.add(e),this.totalEnv.expandToInclude(e.getEnvelopeInternal())},jsts.operation.valid.IndexedNestedRingTester.prototype.isNonNested=function(){this.buildIndex();for(var e=0;e<this.rings.size();e++){var t=this.rings.get(e),n=t.getCoordinates(),r=this.index.query(t.getEnvelopeInternal());for(var i=0;i<r.length;i++){var s=r[i],o=s.getCoordinates();if(t==s)continue;if(!t.getEnvelopeInternal().intersects(s.getEnvelopeInternal()))continue;var u=jsts.operation.valid.IsValidOp.findPtNotNode(n,s,this.graph);if(u==null)continue;var a=jsts.algorithm.CGAlgorithms.isPointInRing(u,o);if(a)return this.nestedPt=u,!1}}return!0},jsts.operation.valid.IndexedNestedRingTester.prototype.buildIndex=function(){this.index=new jsts.index.strtree.STRtree;for(var e=0;e<this.rings.size();e++){var t=this.rings.get(e),n=t.getEnvelopeInternal();this.index.insert(n,t)}},jsts.operation.valid.ConnectedInteriorTester=function(e){this.geomGraph=e,this.geometryFactory=new jsts.geom.GeometryFactory,this.disconnectedRingcoord=null},jsts.operation.valid.ConnectedInteriorTester.findDifferentPoint=function(e,t){var n=0,r=e.length;for(n;n<r;n++)if(!e[n].equals(t))return e[n];return null},jsts.operation.valid.ConnectedInteriorTester.prototype.getCoordinate=function(){return this.disconnectedRingcoord},jsts.operation.valid.ConnectedInteriorTester.prototype.isInteriorsConnected=function(){var e=new javascript.util.ArrayList;this.geomGraph.computeSplitEdges(e);var t=new jsts.geomgraph.PlanarGraph(new jsts.operation.overlay.OverlayNodeFactory);t.addEdges(e),this.setInteriorEdgesInResult(t),t.linkResultDirectedEdges();var n=this.buildEdgeRings(t.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),t),!this.hasUnvisitedShellEdge(n)},jsts.operation.valid.ConnectedInteriorTester.prototype.setInteriorEdgesInResult=function(e){var t=e.getEdgeEnds().iterator(),n;while(t.hasNext())n=t.next(),n.getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR&&n.setInResult(!0)},jsts.operation.valid.ConnectedInteriorTester.prototype.buildEdgeRings=function(e){var t=new javascript.util.ArrayList;for(var n=e.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getEdgeRing()==null){var i=new jsts.operation.overlay.MaximalEdgeRing(r,this.geometryFactory);i.linkDirectedEdgesForMinimalEdgeRings();var s=i.buildMinimalRings(),o=0,u=s.length;for(o;o<u;o++)t.add(s[o])}}return t},jsts.operation.valid.ConnectedInteriorTester.prototype.visitShellInteriors=function(e,t){if(e instanceof jsts.geom.Polygon){var n=e;this.visitInteriorRing(n.getExteriorRing(),t)}if(e instanceof jsts.geom.MultiPolygon){var r=e;for(var i=0;i<r.getNumGeometries();i++){var n=r.getGeometryN(i);this.visitInteriorRing(n.getExteriorRing(),t)}}},jsts.operation.valid.ConnectedInteriorTester.prototype.visitInteriorRing=function(e,t){var n=e.getCoordinates(),r=n[0],i=jsts.operation.valid.ConnectedInteriorTester.findDifferentPoint(n,r),s=t.findEdgeInSameDirection(r,i),o=t.findEdgeEnd(s),u=null;o.getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR?u=o:o.getSym().getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR&&(u=o.getSym()),this.visitLinkedDirectedEdges(u)},jsts.operation.valid.ConnectedInteriorTester.prototype.visitLinkedDirectedEdges=function(e){var t=e,n=e;do n.setVisited(!0),n=n.getNext();while(n!=t)},jsts.operation.valid.ConnectedInteriorTester.prototype.hasUnvisitedShellEdge=function(e){for(var t=0;t<e.size();t++){var n=e.get(t);if(n.isHole())continue;var r=n.getEdges(),i=r[0];if(i.getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)!=jsts.geom.Location.INTERIOR)continue;for(var s=0;s<r.length;s++){i=r[s];if(!i.isVisited())return disconnectedRingcoord=i.getCoordinate(),!0}}return!1},jsts.simplify.LineSegmentIndex=function(){this.index=new jsts.index.quadtree.Quadtree},jsts.simplify.LineSegmentIndex.prototype.index=null,jsts.simplify.LineSegmentIndex.prototype.add=function(e){if(e instanceof jsts.geom.LineSegment){this.add2(e);return}var t=e.getSegments();for(var n=0;n<t.length;n++){var r=t[n];this.add2(r)}},jsts.simplify.LineSegmentIndex.prototype.add2=function(e){this.index.insert(new jsts.geom.Envelope(e.p0,e.p1),e)},jsts.simplify.LineSegmentIndex.prototype.remove=function(e){this.index.remove(new jsts.geom.Envelope(e.p0,e.p1),e)},jsts.simplify.LineSegmentIndex.prototype.query=function(e){var t=new jsts.geom.Envelope(e.p0,e.p1),n=new jsts.simplify.LineSegmentIndex.LineSegmentVisitor(e);this.index.query(t,n);var r=n.getItems();return r},jsts.simplify.LineSegmentIndex.LineSegmentVisitor=function(e){this.items=[],this.querySeg=e},jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype=new jsts.index.ItemVisitor,jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.querySeg=null,jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.items=null,jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.visitItem=function(e){var t=e;jsts.geom.Envelope.intersects(t.p0,t.p1,this.querySeg.p0,this.querySeg.p1)&&this.items.push(e)},jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.getItems=function(){return this.items},jsts.triangulate.DelaunayTriangulationBuilder=function(){this.siteCoords=null,this.tolerance=0,this.subdiv=null},jsts.triangulate.DelaunayTriangulationBuilder.extractUniqueCoordinates=function(e){if(e===undefined||e===null)return(new jsts.geom.CoordinateList([],!1)).toArray();var t=e.getCoordinates();return jsts.triangulate.DelaunayTriangulationBuilder.unique(t)},jsts.triangulate.DelaunayTriangulationBuilder.unique=function(e){e.sort(function(e,t){return e.compareTo(t)});var t=new jsts.geom.CoordinateList(e,!1);return t.toArray()},jsts.triangulate.DelaunayTriangulationBuilder.toVertices=function(e){var t=new Array(e.length),n=0,r=e.length,i;for(n;n<r;n++)i=e[n],t[n]=new jsts.triangulate.quadedge.Vertex(i);return t},jsts.triangulate.DelaunayTriangulationBuilder.envelope=function(e){var t=new jsts.geom.Envelope,n=0,r=e.length;for(n;n<r;n++)t.expandToInclude(e[n]);return t},jsts.triangulate.DelaunayTriangulationBuilder.prototype.setSites=function(){var e=arguments[0];e instanceof jsts.geom.Geometry||e instanceof jsts.geom.Coordinate||e instanceof jsts.geom.Point||e instanceof jsts.geom.MultiPoint||e instanceof jsts.geom.LineString||e instanceof jsts.geom.MultiLineString||e instanceof jsts.geom.LinearRing||e instanceof jsts.geom.Polygon||e instanceof jsts.geom.MultiPolygon?this.setSitesFromGeometry(e):this.setSitesFromCollection(e)},jsts.triangulate.DelaunayTriangulationBuilder.prototype.setSitesFromGeometry=function(e){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.extractUniqueCoordinates(e)},jsts.triangulate.DelaunayTriangulationBuilder.prototype.setSitesFromCollection=function(e){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.unique(e)},jsts.triangulate.DelaunayTriangulationBuilder.prototype.setTolerance=function(e){this.tolerance=e},jsts.triangulate.DelaunayTriangulationBuilder.prototype.create=function(){if(this.subdiv===null){var e,t,n;e=jsts.triangulate.DelaunayTriangulationBuilder.envelope(this.siteCoords),t=jsts.triangulate.DelaunayTriangulationBuilder.toVertices(this.siteCoords),this.subdiv=new jsts.triangulate.quadedge.QuadEdgeSubdivision(e,this.tolerance),n=new jsts.triangulate.IncrementalDelaunayTriangulator(this.subdiv),n.insertSites(t)}},jsts.triangulate.DelaunayTriangulationBuilder.prototype.getSubdivision=function(){return this.create(),this.subdiv},jsts.triangulate.DelaunayTriangulationBuilder.prototype.getEdges=function(e){return this.create(),this.subdiv.getEdges(e)},jsts.triangulate.DelaunayTriangulationBuilder.prototype.getTriangles=function(e){return this.create(),this.subdiv.getTriangles(e)},jsts.triangulate.VoronoiDiagramBuilder=function(){this.siteCoords=null,this.tolerance=0,this.subdiv=null,this.clipEnv=null,this.diagramEnv=null},jsts.triangulate.VoronoiDiagramBuilder.prototype.setSites=function(){var e=arguments[0];e instanceof jsts.geom.Geometry||e instanceof jsts.geom.Coordinate||e instanceof jsts.geom.Point||e instanceof jsts.geom.MultiPoint||e instanceof jsts.geom.LineString||e instanceof jsts.geom.MultiLineString||e instanceof jsts.geom.LinearRing||e instanceof jsts.geom.Polygon||e instanceof jsts.geom.MultiPolygon?this.setSitesByGeometry(e):this.setSitesByArray(e)},jsts.triangulate.VoronoiDiagramBuilder.prototype.setSitesByGeometry=function(e){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.extractUniqueCoordinates(e)},jsts.triangulate.VoronoiDiagramBuilder.prototype.setSitesByArray=function(e){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.unique(e)},jsts.triangulate.VoronoiDiagramBuilder.prototype.setClipEnvelope=function(e){this.clipEnv=e},jsts.triangulate.VoronoiDiagramBuilder.prototype.setTolerance=function(e){this.tolerance=e},jsts.triangulate.VoronoiDiagramBuilder.prototype.create=function(){if(this.subdiv!==null)return;var e,t,n,r;e=jsts.triangulate.DelaunayTriangulationBuilder.envelope(this.siteCoords),this.diagramEnv=e,t=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight()),this.diagramEnv.expandBy(t),this.clipEnv!==null&&this.diagramEnv.expandToInclude(this.clipEnv),n=jsts.triangulate.DelaunayTriangulationBuilder.toVertices(this.siteCoords),this.subdiv=new jsts.triangulate.quadedge.QuadEdgeSubdivision(e,this.tolerance),r=new jsts.triangulate.IncrementalDelaunayTriangulator(this.subdiv),r.insertSites(n)},jsts.triangulate.VoronoiDiagramBuilder.prototype.getSubdivision=function(){return this.create(),this.subdiv},jsts.triangulate.VoronoiDiagramBuilder.prototype.getDiagram=function(e){this.create();var t=this.subdiv.getVoronoiDiagram(e);return this.clipGeometryCollection(t,this.diagramEnv)},jsts.triangulate.VoronoiDiagramBuilder.prototype.clipGeometryCollection=function(e,t){var n,r,i,s,o,u;n=e.getFactory().toGeometry(t),r=[],i=0,s=e.getNumGeometries();for(i;i<s;i++)o=e.getGeometryN(i),u=null,t.contains(o.getEnvelopeInternal())?u=o:t.intersects(o.getEnvelopeInternal())&&(u=n.intersection(o)),u!==null&&!u.isEmpty()&&r.push(u);return e.getFactory().createGeometryCollection(r)},function(){jsts.triangulate.IncrementalDelaunayTriangulator=function(e){this.subdiv=e,this.isUsingTolerance=e.getTolerance()>0},jsts.triangulate.IncrementalDelaunayTriangulator.prototype.insertSites=function(e){var t=0,n=e.length,r;for(t;t<n;t++)r=e[t],this.insertSite(r)},jsts.triangulate.IncrementalDelaunayTriangulator.prototype.insertSite=function(e){var t,n,r,i;t=this.subdiv.locate(e);if(this.subdiv.isVertexOfEdge(t,e))return t;this.subdiv.isOnEdge(t,e.getCoordinate())&&(t=t.oPrev(),this.subdiv.delete_jsts(t.oNext())),n=this.subdiv.makeEdge(t.orig(),e),jsts.triangulate.quadedge.QuadEdge.splice(n,t),r=n;do n=this.subdiv.connect(t,n.sym()),t=n.oPrev();while(t.lNext()!=r);do{i=t.oPrev();if(i.dest().rightOf(t)&&e.isInCircle(t.orig(),i.dest(),t.dest()))jsts.triangulate.quadedge.QuadEdge.swap(t),t=t.oPrev();else{if(t.oNext()==r)return n;t=t.oNext().lPrev()}}while(!0)}}(),jsts.triangulate.quadedge.LastFoundQuadEdgeLocator=function(e){this.subdiv=e,this.lastEdge=null,this.init()},jsts.triangulate.quadedge.LastFoundQuadEdgeLocator.prototype.init=function(){this.lastEdge=this.findEdge()},jsts.triangulate.quadedge.LastFoundQuadEdgeLocator.prototype.findEdge=function(){var e=this.subdiv.getEdges();return e[0]},jsts.triangulate.quadedge.LastFoundQuadEdgeLocator.prototype.locate=function(e){this.lastEdge.isLive()||this.init();var t=this.subdiv.locateFromEdge(e,this.lastEdge);return this.lastEdge=t,t},function(){jsts.triangulate.quadedge.QuadEdge=function(){this.rot=null,this.vertex=null,this.next=null,this.data=null};var e=jsts.triangulate.quadedge.QuadEdge;jsts.triangulate.quadedge.QuadEdge.makeEdge=function(t,n){var r,i,s,o,u;return r=new e,i=new e,s=new e,o=new e,r.rot=i,i.rot=s,s.rot=o,o.rot=r,r.setNext(r),i.setNext(o),s.setNext(s),o.setNext(i),u=r,u.setOrig(t),u.setDest(n),u},jsts.triangulate.quadedge.QuadEdge.connect=function(t,n){var r=e.makeEdge(t.dest(),n.orig());return e.splice(r,t.lNext()),e.splice(r.sym(),n),r},jsts.triangulate.quadedge.QuadEdge.splice=function(e,t){var n,r,i,s,o,u;n=e.oNext().rot,r=t.oNext().rot,i=t.oNext(),s=e.oNext(),o=r.oNext(),u=n.oNext(),e.setNext(i),t.setNext(s),n.setNext(o),r.setNext(u)},jsts.triangulate.quadedge.QuadEdge.swap=function(t){var n,r;n=t.oPrev(),r=t.sym().oPrev(),e.splice(t,n),e.splice(t.sym(),r),e.splice(t,n.lNext()),e.splice(t.sym(),r.lNext()),t.setOrig(n.dest()),t.setDest(r.dest())},jsts.triangulate.quadedge.QuadEdge.prototype.getPrimary=function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()},jsts.triangulate.quadedge.QuadEdge.prototype.setData=function(e){this.data=e},jsts.triangulate.quadedge.QuadEdge.prototype.getData=function(){return this.data},jsts.triangulate.quadedge.QuadEdge.prototype.delete_jsts=function(){this.rot=null},jsts.triangulate.quadedge.QuadEdge.prototype.isLive=function(){return this.rot!==null},jsts.triangulate.quadedge.QuadEdge.prototype.setNext=function(e){this.next=e},jsts.triangulate.quadedge.QuadEdge.prototype.invRot=function(){return this.rot.sym()},jsts.triangulate.quadedge.QuadEdge.prototype.sym=function(){return this.rot.rot},jsts.triangulate.quadedge.QuadEdge.prototype.oNext=function(){return this.next},jsts.triangulate.quadedge.QuadEdge.prototype.oPrev=function(){return this.rot.next.rot},jsts.triangulate.quadedge.QuadEdge.prototype.dNext=function(){return this.sym().oNext().sym()},jsts.triangulate.quadedge.QuadEdge.prototype.dPrev=function(){return this.invRot().oNext().invRot()},jsts.triangulate.quadedge.QuadEdge.prototype.lNext=function(){return this.invRot().oNext().rot},jsts.triangulate.quadedge.QuadEdge.prototype.lPrev=function(){return this.next.sym()},jsts.triangulate.quadedge.QuadEdge.prototype.rNext=function(){return this.rot.next.invRot()},jsts.triangulate.quadedge.QuadEdge.prototype.rPrev=function(){return this.sym().oNext()},jsts.triangulate.quadedge.QuadEdge.prototype.setOrig=function(e){this.vertex=e},jsts.triangulate.quadedge.QuadEdge.prototype.setDest=function(e){this.sym().setOrig(e)},jsts.triangulate.quadedge.QuadEdge.prototype.orig=function(){return this.vertex},jsts.triangulate.quadedge.QuadEdge.prototype.dest=function(){return this.sym().orig()},jsts.triangulate.quadedge.QuadEdge.prototype.getLength=function(){return this.orig().getCoordinate().distance(dest().getCoordinate())},jsts.triangulate.quadedge.QuadEdge.prototype.equalsNonOriented=function(e){return this.equalsOriented(e)?!0:this.equalsOriented(e.sym())?!0:!1},jsts.triangulate.quadedge.QuadEdge.prototype.equalsOriented=function(e){return this.orig().getCoordinate().equals2D(e.orig().getCoordinate())&&this.dest().getCoordinate().equals2D(e.dest().getCoordinate())?!0:!1},jsts.triangulate.quadedge.QuadEdge.prototype.toLineSegment=function(){return new jsts.geom.LineSegment(this.vertex.getCoordinate(),this.dest().getCoordinate())},jsts.triangulate.quadedge.QuadEdge.prototype.toString=function(){var e,t;return e=this.vertex.getCoordinate(),t=this.dest().getCoordinate(),jsts.io.WKTWriter.toLineString(e,t)}}(),jsts.triangulate.quadedge.QuadEdgeSubdivision=function(e,t){this.tolerance=t,this.edgeCoincidenceTolerance=t/jsts.triangulate.quadedge.QuadEdgeSubdivision.EDGE_COINCIDENCE_TOL_FACTOR,this.visitedKey=0,this.quadEdges=[],this.startingEdge,this.tolerance,this.edgeCoincidenceTolerance,this.frameEnv,this.locator=null,this.seg=new jsts.geom.LineSegment,this.triEdges=new Array(3),this.frameVertex=new Array(3),this.createFrame(e),this.startingEdge=this.initSubdiv(),this.locator=new jsts.triangulate.quadedge.LastFoundQuadEdgeLocator(this)},jsts.triangulate.quadedge.QuadEdgeSubdivision.EDGE_COINCIDENCE_TOL_FACTOR=1e3,jsts.triangulate.quadedge.QuadEdgeSubdivision.getTriangleEdges=function(e,t){t[0]=e,t[1]=t[0].lNext(),t[2]=t[1].lNext();if(t[2].lNext()!=t[0])throw new jsts.IllegalArgumentError("Edges do not form a triangle")},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.createFrame=function(e){var t,n,r;t=e.getWidth(),n=e.getHeight(),r=0,t>n?r=t*10:r=n*10,this.frameVertex[0]=new jsts.triangulate.quadedge.Vertex((e.getMaxX()+e.getMinX())/2,e.getMaxY()+r),this.frameVertex[1]=new jsts.triangulate.quadedge.Vertex(e.getMinX()-r,e.getMinY()-r),this.frameVertex[2]=new jsts.triangulate.quadedge.Vertex(e.getMaxX()+r,e.getMinY()-r),this.frameEnv=new jsts.geom.Envelope(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate()),this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate())},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.initSubdiv=function(){var e,t,n;return e=this.makeEdge(this.frameVertex[0],this.frameVertex[1]),t=this.makeEdge(this.frameVertex[1],this.frameVertex[2]),jsts.triangulate.quadedge.QuadEdge.splice(e.sym(),t),n=this.makeEdge(this.frameVertex[2],this.frameVertex[0]),jsts.triangulate.quadedge.QuadEdge.splice(t.sym(),n),jsts.triangulate.quadedge.QuadEdge.splice(n.sym(),e),e},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTolerance=function(){return this.tolerance},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getEnvelope=function(){return new jsts.geom.Envelope(this.frameEnv)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getEdges=function(){return arguments.length>0?this.getEdgesByFactory(arguments[0]):this.quadEdges},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.setLocator=function(e){this.locator=e},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.makeEdge=function(e,t){var n=jsts.triangulate.quadedge.QuadEdge.makeEdge(e,t);return this.quadEdges.push(n),n},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.connect=function(e,t){var n=jsts.triangulate.quadedge.QuadEdge.connect(e,t);return this.quadEdges.push(n),n},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.delete_jsts=function(e){jsts.triangulate.quadedge.QuadEdge.splice(e,e.oPrev()),jsts.triangulate.quadedge.QuadEdge.splice(e.sym(),e.sym().oPrev());var t,n,r;e.eSym=e.sym(),n=e.rot,r=e.rot.sym();var i=this.quadEdges.indexOf(e);i!==-1&&this.quadEdges.splice(i,1),i=this.quadEdges.indexOf(t),i!==-1&&this.quadEdges.splice(i,1),i=this.quadEdges.indexOf(n),i!==-1&&this.quadEdges.splice(i,1),i=this.quadEdges.indexOf(r),i!==-1&&this.quadEdges.splice(i,1),e.delete_jsts(),t.delete_jsts(),n.delete_jsts(),r.delete_jsts()},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateFromEdge=function(e,t){var n=0,r=this.quadEdges.length,i;i=t;for(;;){n++;if(n>r)throw new jsts.error.LocateFailureError(i.toLineSegment());if(e.equals(i.orig())||e.equals(i.dest()))break;if(e.rightOf(i))i=i.sym();else if(!e.rightOf(i.oNext()))i=i.oNext();else{if(!!e.rightOf(i.dPrev()))break;i=i.dPrev()}}return i},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locate=function(){return arguments.length===1?arguments[0]instanceof jsts.triangulate.quadedge.Vertex?this.locateByVertex(arguments[0]):this.locateByCoordinate(arguments[0]):this.locateByCoordinates(arguments[0],arguments[1])},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateByVertex=function(e){return this.locator.locate(e)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateByCoordinate=function(e){return this.locator.locate(new jsts.triangulate.quadedge.Vertex(e))},jsts.triangulate.quadedge
.QuadEdgeSubdivision.prototype.locateByCoordinates=function(e,t){var n,r,i,n=this.locator.locate(new jsts.triangulate.quadedge.Vertex(e));if(n===null)return null;r=n,n.dest().getCoordinate().equals2D(e)&&(r=n.sym()),i=r;do{if(i.dest().getCoordinate().equals2D(t))return i;i=i.oNext()}while(i!=r);return null},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.insertSite=function(e){var t,n,r;t=this.locate(e);if(e.equals(t.orig(),this.tolerance)||e.equals(t.dest(),this.tolerance))return t;n=this.makeEdge(t.orig(),e),jsts.triangulate.quadedge.QuadEdge.splice(n,t),r=n;do n=this.connect(t,n.sym()),t=n.oPrev();while(t.lNext()!=r);return r},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isFrameEdge=function(e){return this.isFrameVertex(e.orig())||this.isFrameVertex(e.dest())?!0:!1},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isFrameBorderEdge=function(e){var t,n,r,i;return t=new Array(3),this.getTriangleEdges(e,t),n=new Array(3),this.getTriangleEdges(e.sym(),n),r=e.lNext().dest(),this.isFrameVertex(r)?!0:(i=e.sym().lNext().dest(),this.isFrameVertex(i)?!0:!1)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isFrameVertex=function(e){return e.equals(this.frameVertex[0])?!0:e.equals(this.frameVertex[1])?!0:e.equals(this.frameVertex[2])?!0:!1},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isOnEdge=function(e,t){this.seg.setCoordinates(e.orig().getCoordinate(),e.dest().getCoordinate());var n=this.seg.distance(t);return n<this.edgeCoincidenceTolerance},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isVertexOfEdge=function(e,t){return t.equals(e.orig(),this.tolerance)||t.equals(e.dest(),this.tolerance)?!0:!1},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVertices=function(e){var t=[],n,r,i,s,o;n=0,r=this.quadEdges.length;for(n;n<r;n++)i=this.quadEdges[n],s=i.orig(),(e||!this.isFrameVertex(s))&&t.push(s),o=i.dest(),(e||!this.isFrameVertex(o))&&t.push(o);return t},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVertexUniqueEdges=function(e){var t,n,r,i,s,o,u,a;t=[],n=[],r=0,i=this.quadEdges.length;for(r;r<i;r++)s=this.quadEdges[r],o=s.orig(),n.indexOf(o)===-1&&(n.push(o),(e||!this.isFrameVertex(o))&&t.push(s)),u=s.sym(),a=u.orig(),n.indexOf(a)===-1&&(n.push(a),(e||!this.isFrameVertex(a))&&t.push(u));return t},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getPrimaryEdges=function(e){this.visitedKey++;var t,n,r,i,s;t=[],n=[],n.push(this.startingEdge),r=[];while(n.length>0)i=n.pop(),r.indexOf(i)===-1&&(s=i.getPrimary(),(e||!this.isFrameEdge(s))&&t.push(s),n.push(i.oNext()),n.push(i.sym().oNext()),r.push(i),r.push(i.sym()));return t},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.visitTriangles=function(e,t){this.visitedKey++;var n,r,i,s;n=[],n.push(this.startingEdge),r=[];while(n.length>0)i=n.pop(),r.indexOf(i)===-1&&(s=this.fetchTriangleToVisit(i,n,t,r),s!==null&&e.visit(s))},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.fetchTriangleToVisit=function(e,t,n,r){var i,s,o,u;i=e,s=0,o=!1;do this.triEdges[s]=i,this.isFrameEdge(i)&&(o=!0),u=i.sym(),r.indexOf(u)===-1&&t.push(u),r.push(i),s++,i=i.lNext();while(i!==e);return o&&!n?null:this.triEdges},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangleEdges=function(e){var t=new jsts.triangulate.quadedge.TriangleEdgesListVisitor;return this.visitTriangles(t,e),t.getTriangleEdges()},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangleVertices=function(e){var t=new TriangleVertexListVisitor;return this.visitTriangles(t,e),t.getTriangleVertices()},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangleCoordinates=function(e){var t=new jsts.triangulate.quadedge.TriangleCoordinatesVisitor;return this.visitTriangles(t,e),t.getTriangles()},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getEdgesByFactory=function(e){var t,n,r,i,s,o;t=this.getPrimaryEdges(!1),n=[],r=0,i=t.length;for(r;r<i;r++)s=t[r],o=[],o[0]=s.orig().getCoordinate(),o[1]=s.dest().getCoordinate(),n[r]=e.createLineString(o);return e.createMultiLineString(n)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangles=function(e){var t,n,r,i,s;t=this.getTriangleCoordinates(!1),n=new Array(t.length),i=0,s=t.length;for(i;i<s;i++)r=t[i],n[i]=e.createPolygon(e.createLinearRing(r,null));return e.createGeometryCollection(n)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVoronoiDiagram=function(e){var t=this.getVoronoiCellPolygons(e);return e.createGeometryCollection(t)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVoronoiCellPolygons=function(e){this.visitTriangles(new jsts.triangulate.quadedge.TriangleCircumcentreVisitor,!0);var t,n,r,i,s;t=[],n=this.getVertexUniqueEdges(!1),r=0,i=n.length;for(r;r<i;r++)s=n[r],t.push(this.getVoronoiCellPolygon(s,e));return t},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVoronoiCellPolygon=function(e,t){var n,r,i,s,o,u;n=[],startQE=e;do i=e.rot.orig().getCoordinate(),n.push(i),e=e.oPrev();while(e!==startQE);return s=new jsts.geom.CoordinateList([],!1),s.add(n,!1),s.closeRing(),s.size()<4&&s.add(s.get(s.size()-1),!0),o=t.createPolygon(t.createLinearRing(s.toArray()),null),u=startQE.orig(),o},jsts.triangulate.quadedge.TriangleCircumcentreVisitor=function(){},jsts.triangulate.quadedge.TriangleCircumcentreVisitor.prototype.visit=function(e){var t,n,r,i,s,o;t=e[0].orig().getCoordinate(),n=e[1].orig().getCoordinate(),r=e[2].orig().getCoordinate(),i=jsts.geom.Triangle.circumcentre(t,n,r),s=new jsts.triangulate.quadedge.Vertex(i),o=0;for(o;o<3;o++)e[o].rot.setOrig(s)},jsts.triangulate.quadedge.TriangleEdgesListVisitor=function(){this.triList=[]},jsts.triangulate.quadedge.TriangleEdgesListVisitor.prototype.visit=function(e){var t=e.concat();this.triList.push(t)},jsts.triangulate.quadedge.TriangleEdgesListVisitor.prototype.getTriangleEdges=function(){return this.triList},jsts.triangulate.quadedge.TriangleVertexListVisitor=function(){this.triList=[]},jsts.triangulate.quadedge.TriangleVertexListVisitor.prototype.visit=function(e){var t=[];t.push(trieEdges[0].orig()),t.push(trieEdges[1].orig()),t.push(trieEdges[2].orig()),this.triList.push(t)},jsts.triangulate.quadedge.TriangleVertexListVisitor.prototype.getTriangleVertices=function(){return this.triList},jsts.triangulate.quadedge.TriangleCoordinatesVisitor=function(){this.coordList=new jsts.geom.CoordinateList([],!1),this.triCoords=[]},jsts.triangulate.quadedge.TriangleCoordinatesVisitor.prototype.visit=function(e){this.coordList=new jsts.geom.CoordinateList([],!1);var t=0,n,r;for(t;t<3;t++)n=e[t].orig(),this.coordList.add(n.getCoordinate());if(this.coordList.size()>0){this.coordList.closeRing(),r=this.coordList.toArray();if(r.length!==4)return;this.triCoords.push(r)}},jsts.triangulate.quadedge.TriangleCoordinatesVisitor.prototype.getTriangles=function(){return this.triCoords},jsts.triangulate.quadedge.TrianglePredicate=function(){},jsts.triangulate.quadedge.TrianglePredicate.isInCircleNonRobust=function(e,t,n,r){var i=(e.x*e.x+e.y*e.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(t,n,r)-(t.x*t.x+t.y*t.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(e,n,r)+(n.x*n.x+n.y*n.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(e,t,r)-(r.x*r.x+r.y*r.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(e,t,n)>0;return i},jsts.triangulate.quadedge.TrianglePredicate.isInCircleNormalized=function(e,t,n,r){var i,s,o,u,a,f,l,c,h,p,d,v,m;return i=e.x-r.x,s=e.y-r.y,o=t.x-r.x,u=t.y-r.y,a=n.x-r.x,f=n.y-r.y,l=i*u-o*s,c=o*f-a*u,h=a*s-i*f,p=i*i+s*s,d=o*o+u*u,v=a*a+f*f,m=p*c+d*h+v*l,m>0},jsts.triangulate.quadedge.TrianglePredicate.triArea=function(e,t,n){return(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x)},jsts.triangulate.quadedge.TrianglePredicate.isInCircleRobust=function(e,t,n,r){return jsts.triangulate.quadedge.TrianglePredicate.isInCircleNormalized(e,t,n,r)},jsts.triangulate.quadedge.TrianglePredicate.isInCircleDDSlow=function(e,t,n,r){var i,s,o,u,a,f,l,c,h,p,d,v,m,g;return i=jsts.math.DD.valueOf(r.x),s=jsts.math.DD.valueOf(r.y),o=jsts.math.DD.valueOf(e.x),u=jsts.math.DD.valueOf(e.y),a=jsts.math.DD.valueOf(t.x),f=jsts.math.DD.valueOf(t.y),l=jsts.math.DD.valueOf(n.x),c=jsts.math.DD.valueOf(n.y),h=o.multiply(o).add(u.multiply(u)).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(a,f,l,c,i,s)),p=a.multiply(a).add(f.multiply(f)).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(o,u,l,c,i,s)),d=l.multiply(l).add(c.multiply(c)).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(o,u,a,f,i,s)),v=i.multiply(i).add(s.multiply(s)).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(o,u,a,f,l,c)),m=h.subtract(p).add(d).subtract(v),g=m.doubleValue()>0,g},jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow=function(e,t,n,r,i,s){return n.subtract(e).multiply(s.subtract(t)).subtract(r.subtract(t).multiply(i.subtract(e)))},jsts.triangulate.quadedge.TrianglePredicate.isInCircleDDFast=function(e,t,n,r){var i,s,o,u,a,f;return i=jsts.math.DD.sqr(e.x).selfAdd(jsts.math.DD.sqr(e.y)).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(t,n,r)),s=jsts.math.DD.sqr(t.x).selfAdd(jsts.math.DD.sqr(t.y)).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(e,n,r)),o=jsts.math.DD.sqr(n.x).selfAdd(jsts.math.DD.sqr(n.y)).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(e,t,r)),u=jsts.math.DD.sqr(r.x).selfAdd(jsts.math.DD.sqr(r.y)).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(e,t,n)),a=i.selfSubtract(s).selfAdd(o).selfSubtract(u),f=a.doubleValue()>0,f},jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast=function(e,t,n){var r,i;return r=jsts.math.DD.valueOf(t.x).selfSubtract(e.x).selfMultiply(jsts.math.DD.valueOf(n.y).selfSubtract(e.y)),i=jsts.math.DD.valueOf(t.y).selSubtract(e.y).selfMultiply(jsts.math.DD.valueOf(n.x).selfSubtract(e.x)),r.selfSubtract(i)},jsts.triangulate.quadedge.TrianglePredicate.isInCircleDDNormalized=function(e,t,n,r){var i,s,o,u,a,f,l,c,h,p,d,v,m,g;return i=jsts.math.DD.valueOf(e.x).selfSubtract(r.x),s=jsts.math.DD.valueOf(e.y).selfSubtract(r.y),o=jsts.math.DD.valueOf(t.x).selfSubtract(r.x),o=jsts.math.DD.valueOf(t.y).selfSubtract(r.y),a=jsts.math.DD.valueOf(n.x).selfSubtract(r.x),a=jsts.math.DD.valueOf(n.y).selfSubtract(r.y),l=i.multiply(u).selfSubtract(o.multiply(s)),c=o.multiply(f).selfSubtract(a.multiply(u)),h=a.multiply(s).selfSubtract(i.multiply(f)),p=i.multiply(i).selfAdd(s.multiply(s)),d=o.multiply(o).selfAdd(u.multiply(u)),v=a.multiply(a).selfAdd(f.multiply(f)),m=p.selfMultiply(c).selfAdd(d.selfMultiply(h)).selfAdd(v.selfMultiply(l)),g=m.doubleValue()>0,g},jsts.triangulate.quadedge.TrianglePredicate.isInCircleCC=function(e,t,n,r){var i,s,o;return i=jsts.geom.Triangle.circumcentre(e,t,n),s=e.distance(i),o=r.distance(i)-s,o<=0},jsts.triangulate.quadedge.Vertex=function(){arguments.length===1?this.initFromCoordinate(arguments[0]):this.initFromXY(arguments[0],arguments[1])},jsts.triangulate.quadedge.Vertex.LEFT=0,jsts.triangulate.quadedge.Vertex.RIGHT=1,jsts.triangulate.quadedge.Vertex.BEYOND=2,jsts.triangulate.quadedge.Vertex.BEHIND=3,jsts.triangulate.quadedge.Vertex.BETWEEN=4,jsts.triangulate.quadedge.Vertex.ORIGIN=5,jsts.triangulate.quadedge.Vertex.DESTINATION=6,jsts.triangulate.quadedge.Vertex.prototype.initFromXY=function(e,t){this.p=new jsts.geom.Coordinate(e,t)},jsts.triangulate.quadedge.Vertex.prototype.initFromCoordinate=function(e){this.p=new jsts.geom.Coordinate(e)},jsts.triangulate.quadedge.Vertex.prototype.getX=function(){return this.p.x},jsts.triangulate.quadedge.Vertex.prototype.getY=function(){return this.p.y},jsts.triangulate.quadedge.Vertex.prototype.getZ=function(){return this.p.z},jsts.triangulate.quadedge.Vertex.prototype.setZ=function(e){this.p.z=e},jsts.triangulate.quadedge.Vertex.prototype.getCoordinate=function(){return this.p},jsts.triangulate.quadedge.Vertex.prototype.toString=function(){return"POINT ("+this.p.x+" "+this.p.y+")"},jsts.triangulate.quadedge.Vertex.prototype.equals=function(){return arguments.length===1?this.equalsExact(arguments[0]):this.equalsWithTolerance(arguments[0],arguments[1])},jsts.triangulate.quadedge.Vertex.prototype.equalsExact=function(e){return this.p.x===e.getX()&&this.p.y===e.getY()},jsts.triangulate.quadedge.Vertex.prototype.equalsWithTolerance=function(e,t){return this.p.distance(e.getCoordinate())<t},jsts.triangulate.quadedge.Vertex.prototype.classify=function(e,t){var n,r,i,s;return n=this,r=t.sub(e),i=n.sub(e),s=r.crossProduct(i),s>0?jsts.triangulate.quadedge.Vertex.LEFT:s<0?jsts.triangulate.quadedge.Vertex.RIGHT:r.getX()*i.getX()<0||r.getY()*i.getY()<0?jsts.triangulate.quadedge.Vertex.BEHIND:r.magn()<i.magn()?jsts.triangulate.quadedge.Vertex.BEYOND:e.equals(n)?jsts.triangulate.quadedge.Vertex.ORIGIN:t.equals(n)?jsts.triangulate.quadedge.Vertex.DESTINATION:jsts.triangulate.quadedge.Vertex.BETWEEN},jsts.triangulate.quadedge.Vertex.prototype.crossProduct=function(e){return this.p.x*e.getY()-this.p.y*e.getX()},jsts.triangulate.quadedge.Vertex.prototype.dot=function(e){return this.p.x*e.getX()+this.p.y*e.getY()},jsts.triangulate.quadedge.Vertex.prototype.times=function(e){return new jsts.triangulate.quadedge.Vertex(e*this.p.x,e*this.p.y)},jsts.triangulate.quadedge.Vertex.prototype.sum=function(e){return new jsts.triangulate.quadedge.Vertex(this.p.x+e.getX(),this.p.y+e.getY())},jsts.triangulate.quadedge.Vertex.prototype.sub=function(e){return new jsts.triangulate.quadedge.Vertex(this.p.x-e.getX(),this.p.y-e.getY())},jsts.triangulate.quadedge.Vertex.prototype.magn=function(){return Math.sqrt(this.p.x*this.p.x+this.p.y*this.p.y)},jsts.triangulate.quadedge.Vertex.prototype.cross=function(){return new Vertex(this.p.y,-this.p.x)},jsts.triangulate.quadedge.Vertex.prototype.isInCircle=function(e,t,n){return jsts.triangulate.quadedge.TrianglePredicate.isInCircleRobust(e.p,t.p,n.p,this.p)},jsts.triangulate.quadedge.Vertex.prototype.isCCW=function(e,t){return(e.p.x-this.p.x)*(t.p.y-this.p.y)-(e.p.y-this.p.y)*(t.p.x-this.p.x)>0},jsts.triangulate.quadedge.Vertex.prototype.rightOf=function(e){return this.isCCW(e.dest(),e.orig())},jsts.triangulate.quadedge.Vertex.prototype.leftOf=function(e){return this.isCCW(e.orig(),e.dest())},jsts.triangulate.quadedge.Vertex.prototype.bisector=function(e,t){var n,r,i,s;return n=t.getX()-e.getX(),r=t.getY()-e.getY(),i=new jsts.algorithm.HCoordinate(e.getX()+n/2,e.getY()+r/2,1),s=new jsts.algorithm.HCoordinate(e.getX()-r+n/2,e.getY()+n+r/2,1),new jsts.algorithm.HCoordinate(i,s)},jsts.triangulate.quadedge.Vertex.prototype.distance=function(e,t){return e.p.distance(t.p)},jsts.triangulate.quadedge.Vertex.prototype.circumRadiusRatio=function(e,t){var n,r,i,s;return n=this.circleCenter(e,t),r=this.distance(n,e),i=this.distance(this,e),s=this.distance(e,t),s<i&&(i=s),s=this.distance(t,this),s<i&&(i=s),r/i},jsts.triangulate.quadedge.Vertex.prototype.midPoint=function(e){var t,n;return t=(this.p.x+e.getX())/2,n=(this.p.y+e.getY())/2,new jsts.triangulate.quadedge.Vertex(t,n)},jsts.triangulate.quadedge.Vertex.prototype.circleCenter=function(e,t){var n,r,i,s,o;n=new jsts.triangulate.quadedge.Vertex(this.getX(),this.getY()),r=this.bisector(n,e),i=this.bisector(e,t),s=new jsts.algorithm.HCoordinate(r,i),o=null;try{o=new jsts.triangulate.quadedge.Vertex(s.getX(),s.getY())}catch(u){}return o};